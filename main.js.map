{"version":3,"file":"main.js","mappings":";;;;;;;;;;;;;;;;;;;AACqD;AACiB;AACI;AAC3B;AAC8B;;;AAE7E,MAAMK,MAAM,GAAW,CACrB;EACEC,IAAI,EAAEH,sDAAoB;EAC1BK,aAAa,EAAE,MAAM,ybAAyD,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,sBAAsB,CAAC;EACtHC,WAAW,EAAE,CAACX,iFAAoB,EAAEC,qFAAsB;CAC3D,EACD;EACEI,IAAI,EAAEH,mDAAiB;EACvBK,aAAa,EAAE,MAAM,uVAAqD,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACI,mBAAmB,CAAC;EAC/GF,WAAW,EAAE,CAACR,wFAAuB;CACtC,EACD;EACEE,IAAI,EAAEH,mDAAiB;EACvBK,aAAa,EAAE,MAAM,uVAAqD,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACM,mBAAmB,CAAC;EAC/GJ,WAAW,EAAE,CAACR,wFAAuB;CACtC,EACD;EACEE,IAAI,EAAEH,4DAA0B;EAChCK,aAAa,EAAE,MAAM,qcAA+D,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACQ,yBAAyB,CAAC;EAC/HN,WAAW,EAAE,CAACX,iFAAoB;CACnC,EACD;EACEK,IAAI,EAAE,IAAI;EACVa,UAAU,EAAE,IAAIhB,sDAAoB;CACrC,CACF;AAMK,MAAOiB,gBAAgB;AAAhBA,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;QAAhBA;AAAgB;AAAhBA,gBAAgB;YAHjBpB,iEAAoB,CAACK,MAAM,CAAC,EAC5BL,yDAAY;AAAA;;sHAEXoB,gBAAgB;IAAAE,UAAAA,yDAAAA;IAAAC,UAFjBvB,yDAAY;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;ACjC0B;AACtB;;;;;;AAOtB,MAAO0B,YAAY;EACvBC,YAAoBC,gBAAkC,EAAUC,KAAY;IAAxD,qBAAgB,GAAhBD,gBAAgB;IAA4B,UAAK,GAALC,KAAK;IACnEA,KAAK,CAACC,MAAM,CAACN,sEAAkB,CAAC,CAC7BQ,IAAI,CACHP,4CAAM,CAACQ,IAAI,IAAIA,IAAI,IAAI,IAAI,CAAC,CAC7B,CACAC,SAAS,CAACD,IAAI,IAAIL,gBAAgB,CAACO,GAAG,CAACF,IAAI,CAAC,CAAC;IAEhDL,gBAAgB,CAACQ,cAAc,CAACZ,8EAA0B,CAAC;EAC7D;;AATWE,YAAY;mBAAZA,YAAY;AAAA;AAAZA,YAAY;QAAZA,YAAY;EAAAY;EAAAC;EAAAC;EAAAC;IAAA;MCXzBC,uDAAAA,kBAA2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACC6B;AAEF;AACT;AACgC;AACT;AACZ;AACG;AACA;AACpB;AACW;AACM;AACU;AACG;AACN;AACS;AACjB;AACW;;;;;;;;AAE5D,SAAUiB,iBAAiB,CAACC,IAAgB;EAChD,OAAO,IAAIL,4EAAmB,CAACK,IAAI,EAAE,gBAAgB,CAAC;AACxD;AAmCM,MAAOC,SAAS;AAATA,SAAS;mBAATA,SAAS;AAAA;AAATA,SAAS;QAATA,SAAS;EAAAC,YAFRpC,wDAAY;AAAA;AAEbmC,SAAS;YA5BlBlB,qEAAa,EACbvB,iEAAgB,EAChBgC,mEAAgB,EAChBR,0FAAuB,EACvBK,2DAAkB,CAAC,CAACzB,6DAAS,EAAE0B,mEAAW,EAAEQ,8EAAgB,CAAC,EAC3D;IAACK,eAAe,EAAE,CAACjB,6EAAsBkB;EAAA,CAAC,CAAC,EAC7CjB,+EAA8B,EAAE,EAChCC,+EAA8B,CAAC;IAC7BiB,QAAQ,EAAEnB,6EAAsBkB;GACjC,CAAC,EACFP,4EAA4B,EAAE,EAC9BH,yEAAuB,CAAC;IACtBY,eAAe,EAAE,IAAI;IACrBC,MAAM,EAAE;MACNC,OAAO,EAAEf,iEAAe;MACxBgB,UAAU,EAAEV,iBAAiB;MAC7BW,IAAI,EAAE,CAACnB,6DAAU;;GAEpB,CAAC,EAEFN,wFAAqC,CAAC;IACpCoB,QAAQ,EAAEnB,6EAAsBkB;GACjC,CAAC,EACFR,mFAAgB;AAAA;;uHAKPK,SAAS;IAAAU,eA/BlB7C,wDAAY;IAAAJ,UAGZqB,qEAAa,EACbvB,iEAAgB,EAChBgC,mEAAgB,EAChBR,0FAAuB,4aAoBvBY,mFAAgB;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;ACpD4B;AAEM;AAEhD,SAAUkB,YAAY,CAACC,EAA6B,EAC7BC,EAA6B;EACxD,IAAIC,aAAa,CAACF,EAAE,CAAC,IAAIE,aAAa,CAACD,EAAE,CAAC,EAAE;IAC1C,OAAOE,SAAS;GACjB,MAAM,IAAID,aAAa,CAACF,EAAE,CAAC,IAAII,SAAS,CAACH,EAAE,CAAC,EAAE;IAC7C,OAAOA,EAAE;GACV,MAAM,IAAIC,aAAa,CAACD,EAAE,CAAC,IAAIG,SAAS,CAACJ,EAAE,CAAC,EAAE;IAC7C,OAAOA,EAAE;GACV,MAAM,IAAII,SAAS,CAACJ,EAAE,CAAC,IAAII,SAAS,CAACH,EAAE,CAAC,EAAE;IACzC,OAAOD,EAAE,GAAGC,EAAE;;EAGhB,MAAM,IAAII,KAAK,CAAC,eAAe,CAAC;AAClC;AAEM,SAAUC,OAAO,CAACC,IAAc;EACpC,OAAOA,IAAI,CAACC,GAAG,CAACC,YAAY,CAAC,CAC1BC,MAAM,CAACb,+CAAY,EAAE,CAACW,GAAG,CAACC,YAAY,CAAC,CAAC;AAC7C;AAEM,SAAUG,eAAe,CAACL,IAAc;EAC5C,OAAOA,IAAI,CAACC,GAAG,CAACK,aAAa,CAAC,CAC3BH,MAAM,CAAEb,+CAAY,EAAE,CAACW,GAAG,CAACK,aAAa,CAAC,CAAE;AAChD;AAEA,MAAMJ,YAAY,GAAoB;EAACK,IAAI,EAAE,CAAC;EAAEC,MAAM,EAAE,CAAC;EAAEC,MAAM,EAAE,CAAC;EAAEC,WAAW,EAAE;AAAC,CAAC;AACrF,MAAMJ,aAAa,GAAoB;EAACC,IAAI,EAAE,CAAC;EAAEC,MAAM,EAAE,CAAC;EAAEC,MAAM,EAAE,CAAC;EAAEC,WAAW,EAAE,CAAC;EAAEC,OAAO,EAAE;AAAC,CAAC;AAElG,SAASd,SAAS,CAAIe,KAA2B;EAC/C,OAAOA,KAAK,IAAI,IAAI;AACtB;AAEA,SAASjB,aAAa,CAAIiB,KAA2B;EACnD,OAAO,CAACf,SAAS,CAACe,KAAK,CAAC;AAC1B;AAEM,SAAUC,QAAQ,CAAC,GAAGC,KAAc;EACxC,OAAOA,KAAK,CACTC,MAAM,CAAC,CAACC,EAAE,EAAEC,EAAE,KAAI;IACjB,OAAO;MACLC,OAAO,EAAE,CAACF,EAAE,CAACE,OAAO,IAAI,CAAC,KAAKD,EAAE,CAACC,OAAO,IAAI,CAAC,CAAC;MAC9CC,GAAG,EAAE,CAACH,EAAE,CAACG,GAAG,IAAI,CAAC,KAAKF,EAAE,CAACE,GAAG,IAAI,CAAC,CAAC;MAClCC,aAAa,EAAE,CAACJ,EAAE,CAACI,aAAa,IAAI,CAAC,KAAKH,EAAE,CAACG,aAAa,IAAI,CAAC,CAAC;MAChEC,QAAQ,EAAE,CAACL,EAAE,CAACK,QAAQ,IAAI,CAAC,KAAKJ,EAAE,CAACI,QAAQ,IAAI,CAAC;KACjD;EACH,CAAC,EAAE,EAAW,CAAC;AACnB;AAEM,SAAUC,QAAQ,CAACC,IAAW,EAAEC,aAAa,GAAG,CAAC,EAAEC,oBAAoB,GAAG,CAAC;EAC/E,OAAO;IACLP,OAAO,EAAEK,IAAI,CAACL,OAAO,IAAI,IAAI,GAAGQ,IAAI,CAACH,IAAI,CAACL,OAAO,EAAEM,aAAa,CAAC,GAAG,IAAI;IACxEL,GAAG,EAAEI,IAAI,CAACJ,GAAG,IAAI,IAAI,GAAGO,IAAI,CAACH,IAAI,CAACJ,GAAG,EAAEK,aAAa,CAAC,GAAG,IAAI;IAC5DJ,aAAa,EAAEG,IAAI,CAACH,aAAa,IAAI,IAAI,GAAGM,IAAI,CAACH,IAAI,CAACH,aAAa,EAAEI,aAAa,CAAC,GAAG,IAAI;IAC1FH,QAAQ,EAAEE,IAAI,CAACF,QAAQ,IAAI,IAAI,GAAGK,IAAI,CAACH,IAAI,CAACF,QAAQ,EAAEI,oBAAoB,CAAC,GAAG;GAC/E;AACH;AAEM,SAAUE,YAAY,CAACJ,IAAW,EAAEK,UAAkB;EAC1D,OAAO;IACLV,OAAO,EAAEK,IAAI,CAACL,OAAO,IAAI,IAAI,GAAIK,IAAI,CAACL,OAAO,GAAGU,UAAU,GAAI,IAAI;IAClET,GAAG,EAAEI,IAAI,CAACJ,GAAG,IAAI,IAAI,GAAII,IAAI,CAACJ,GAAG,GAAGS,UAAU,GAAI,IAAI;IACtDR,aAAa,EAAEG,IAAI,CAACH,aAAa,IAAI,IAAI,GAAIG,IAAI,CAACH,aAAa,GAAGQ,UAAU,GAAI,IAAI;IACpFP,QAAQ,EAAEE,IAAI,CAACF,QAAQ,IAAI,IAAI,GAAIE,IAAI,CAACF,QAAQ,GAAGO,UAAU,GAAI;GAClE;AACH;AAEM,SAAUF,IAAI,CAACd,KAAa,EAAEY,aAAa,GAAG,CAAC;EACnD,MAAMI,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,EAAE,EAAEN,aAAa,CAAC;EAE9C,OAAOK,IAAI,CAACH,IAAI,CAACd,KAAK,GAAGgB,UAAU,CAAC,GAAGA,UAAU;AACnD;AAEM,SAAUG,GAAG,CAACC,EAAU,EAAEC,EAAU;EACxC,OAAOD,EAAE,GAAGC,EAAE;AAChB;AAEO,MAAMC,uBAAuB,GAAgBC,OAAO,IAAG;EAC5D,IAAI,EAAEA,OAAO,YAAY5C,qDAAS,CAAC,EACjC;IACA,MAAM,IAAIO,KAAK,CAAC,iDAAiD,CAAC;;EAGpE,MAAMsC,cAAc,GAAGD,OAAO,CAACE,GAAG,CAAC,SAAS,CAAC;EAC7C,MAAMC,UAAU,GAAGH,OAAO,CAACE,GAAG,CAAC,KAAK,CAAC;EACrC,MAAME,oBAAoB,GAAGJ,OAAO,CAACE,GAAG,CAAC,eAAe,CAAC;EACzD,MAAMG,eAAe,GAAGL,OAAO,CAACE,GAAG,CAAC,UAAU,CAAC;EAE/C,IAAID,cAAc,IAAI,IAAI,IAAIE,UAAU,IAAI,IAAI,IAAIC,oBAAoB,IAAI,IAAI,IAAIC,eAAe,IAAI,IAAI,EAAE;IAC3G,MAAM,IAAI1C,KAAK,CAAC,2HAA2H,CAAC;;EAG9I,MAAMoB,OAAO,GAAGkB,cAAc,CAACxB,KAAK;EACpC,MAAMO,GAAG,GAAGmB,UAAU,CAAC1B,KAAK;EAC5B,MAAMQ,aAAa,GAAGmB,oBAAoB,CAAC3B,KAAK;EAChD,MAAMS,QAAQ,GAAGmB,eAAe,CAAC5B,KAAK;EAEtC,IAAGM,OAAO,IAAI,IAAI,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;IACjD,MAAMpB,KAAK,CAAC,uCAAuC,CAAC;;EAEtD,IAAGqB,GAAG,IAAI,IAAI,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;IACzC,MAAMrB,KAAK,CAAC,mCAAmC,CAAC;;EAElD,IAAGsB,aAAa,IAAI,IAAI,IAAI,OAAOA,aAAa,KAAK,QAAQ,EAAE;IAC7D,MAAMtB,KAAK,CAAC,6CAA6C,CAAC;;EAE5D,IAAGuB,QAAQ,IAAI,IAAI,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;IACnD,MAAMvB,KAAK,CAAC,wCAAwC,CAAC;;EAGvD,IAAIoB,OAAO,GAAGC,GAAG,GAAGC,aAAa,GAAGC,QAAQ,KAAK,CAAC,EAAE;IAClD,OAAO;MACLoB,UAAU,EAAE;KACb;;EAGH,OAAO,IAAI;AACb,CAAC;;;;;;;;;;;;;;;AC7GM,MAAMC,SAAS,GAAU;EAC9BxB,OAAO,EAAE,CAAC;EACVC,GAAG,EAAE,CAAC;EACNC,aAAa,EAAE,CAAC;EAChBC,QAAQ,EAAE;CACX;AAEK,MAAOsB,cAAc;EAKzBlG,YAAoCmE,KAAa;IAAb,UAAK,GAALA,KAAK;EACzC;EAEOgC,GAAG,CAACC,KAAqB;IAC9B,IAAI,IAAI,IAAIF,cAAc,CAACG,OAAO,IAAID,KAAK,IAAIF,cAAc,CAACG,OAAO,EAAE;MACrE,OAAOH,cAAc,CAACG,OAAO;KAC9B,MAAM,IAAI,IAAI,IAAIH,cAAc,CAACI,KAAK,IAAIF,KAAK,IAAIF,cAAc,CAACI,KAAK,EAAE;MACxE,OAAOJ,cAAc,CAACI,KAAK;KAC5B,MAAM;MACL,OAAOJ,cAAc,CAACK,IAAI;;EAE9B;EAEOC,EAAE,CAACJ,KAAqB;IAC7B,IAAI,IAAI,IAAIF,cAAc,CAACG,OAAO,IAAID,KAAK,IAAIF,cAAc,CAACG,OAAO,EAAE;MACrE,OAAOH,cAAc,CAACG,OAAO;KAC9B,MAAM,IAAI,IAAI,IAAIH,cAAc,CAACI,KAAK,IAAIF,KAAK,IAAIF,cAAc,CAACI,KAAK,EAAE;MACxE,OAAOJ,cAAc,CAACI,KAAK;KAC5B,MAAM;MACL,OAAOJ,cAAc,CAACK,IAAI;;EAE9B;EAEOE,GAAG;IACR,IAAI,IAAI,IAAIP,cAAc,CAACG,OAAO,EAAE;MAClC,OAAOH,cAAc,CAACG,OAAO;KAC9B,MAAM,IAAI,IAAI,IAAIH,cAAc,CAACK,IAAI,EAAE;MACtC,OAAOL,cAAc,CAACI,KAAK;KAC5B,MAAM;MACL,OAAOJ,cAAc,CAACK,IAAI;;EAE9B;EAEA,OAAOG,EAAE,CAACvC,KAAc;IACtB,OAAOA,KAAK,GAAG+B,cAAc,CAACK,IAAI,GAAGL,cAAc,CAACI,KAAK;EAC3D;;AAxCWJ,cAAc,CACTK,IAAI,GAAG,IAAIL,cAAc,CAAC,MAAM,CAAC;AADtCA,cAAc,CAETI,KAAK,GAAG,IAAIJ,cAAc,CAAC,OAAO,CAAC;AAFxCA,cAAc,CAGTG,OAAO,GAAG,IAAIH,cAAc,CAAC,SAAS,CAAC;;;;;;;;;;;;;;;;;ACrBlD,MAAMtH,SAAS,GAAG,WAAW;AAC7B,MAAMM,MAAM,GAAG,QAAQ;AACvB,MAAME,MAAM,GAAG,QAAQ;AACvB,MAAME,eAAe,GAAG,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;ACFJ;AACmB;AACX;AACgC;AAGb;AAClB;AAC5B;;;;;;;;;;;ICFtByB,4DAAAA,oBAAmE;IAAAA,oDAAAA,GAAQ;IAAAA,0DAAAA,EAAa;;;;IAApCA,wDAAAA,kBAAc;IAACA,uDAAAA,GAAQ;IAARA,+DAAAA,SAAQ;;;ADYzE,MAAOc,gBAAgB;EAO3B7B,YAAoBE,KAAY;IAAZ,UAAK,GAALA,KAAK;IANzB;IACU,uBAAkB,GAAe,CAAC,IAAI,EAAE,IAAI,CAAC;EAMvD;EAEA+G,iBAAiB,CAACC,SAA0B;IAC1C,IAAI,CAAChH,KAAK,CAACiH,QAAQ,CAAC,IAAIJ,+EAAoB,CAACG,SAAS,CAAC/C,KAAK,CAAC,CAAC;EAChE;EAEAiD,eAAe;IACb,IAAI,CAAClH,KAAK,CAACC,MAAM,CAACN,sEAAkB,CAAC,CAClCQ,IAAI,CAAC2G,0CAAI,CAAC,CAAC,CAAC,CAAC,CACbzG,SAAS,CAAC4D,KAAK,IAAG;MACjB,IAAI,CAACkD,YAAY,CAACC,UAAU,CAACnD,KAAK,CAAC;IACrC,CAAC,CAAC;EACN;;AApBWtC,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;QAAhBA,gBAAgB;EAAAlB;EAAA4G;IAAA;;;;;;;;;;;;;;;MClB7BxG,uDAAAA,aAA+B;MAC/BA,4DAAAA,wBAAkF;MAE9EA,uDAAAA,kBAAuC;MACzCA,0DAAAA,EAAY;MACZA,4DAAAA,uBAAwE;MAA5DA,wDAAAA;QAAA,OAAmByG,6BAAyB;MAAA,EAAC;MACvDzG,wDAAAA,kEAAwF;MAC1FA,0DAAAA,EAAa;;;MADkBA,uDAAAA,GAAqB;MAArBA,wDAAAA,mCAAqB;;;iBDO1C4F,yDAAY,EAAE,sDAAAC,4EAAkB,EAAE,4IAAAC,iEAAa,EAAE,6DAAAC,qEAAe;EAAAW;EAAAC;AAAA;;;;;;;;;;;;;;;;;;;;;;;AEZ1B;AAEC;AACN;AACG;AACe;;;AAKzD,MAAOpJ,oBAAoB;EAC/B0B,YAAoBE,KAAY;IAAZ,UAAK,GAALA,KAAK;EACzB;EAEAjB,WAAW,CAAC6I,KAA6B,EAAEC,KAA0B;IACnE,OAAO,IAAI,CAAC7H,KAAK,CAACC,MAAM,CAACN,6EAAyB,CAAC,CAChDQ,IAAI,CACHP,4CAAM,CAACkI,eAAe,IAAIA,eAAe,KAAK9B,iFAAsB,CAAC,EACrEyB,yCAAG,CAACxD,KAAK,IAAIA,KAAK,KAAK+B,8EAAmB,CAAC,EAC3C0B,yCAAG,CAACI,eAAe,IAAG;MACpB,IAAI,CAACA,eAAe,EAAE;QACpB,IAAI,CAAC9H,KAAK,CAACiH,QAAQ,CAAC,IAAIU,yDAAQ,CAAC,CAAC,IAAIrJ,mDAAiB,EAAE,CAAC,CAAC,CAAC;;IAEhE,CAAC,CAAC,CACH;EACL;;AAfWF,oBAAoB;mBAApBA,oBAAoB;AAAA;AAApBA,oBAAoB;SAApBA,oBAAoB;EAAA2J,SAApB3J,oBAAoB;EAAA4J,YAFnB;AAAM;;;;;;;;;;;;;;;;;;;;;;;ACR8B;AAEC;AACY;AAClB;AACG;;;AAK1C,MAAOzJ,uBAAuB;EAClCuB,YAAoBE,KAAY;IAAZ,UAAK,GAALA,KAAK;EACzB;EAEAjB,WAAW,CAAC6I,KAA6B,EAAEC,KAA0B;IACnE,OAAO,IAAI,CAAC7H,KAAK,CAACC,MAAM,CAACN,6EAAyB,CAAC,CAChDQ,IAAI,CACHP,4CAAM,CAACkI,eAAe,IAAIA,eAAe,KAAK9B,iFAAsB,CAAC,EACrEyB,yCAAG,CAACxD,KAAK,IAAIA,KAAK,KAAK+B,+EAAoB,CAAC,EAC5C0B,yCAAG,CAACO,kBAAkB,IAAG;MACvB,IAAI,CAACA,kBAAkB,EAAE;QACvB,IAAI,CAACjI,KAAK,CAACiH,QAAQ,CAAC,IAAIU,yDAAQ,CAAC,CAAC,IAAIrJ,sDAAoB,EAAE,CAAC,CAAC,CAAC;;IAEnE,CAAC,CAAC,CACH;EACL;;AAfWC,uBAAuB;mBAAvBA,uBAAuB;AAAA;AAAvBA,uBAAuB;SAAvBA,uBAAuB;EAAAwJ,SAAvBxJ,uBAAuB;EAAAyJ,YAFtB;AAAM;;;;;;;;;;;;;;;;ACLd,MAAOE,iBAAiB;EAG5BpI;IAFiB,YAAO,GAAG,KAAK;EAGhC;EAEAqI,YAAY;IACV,OAAOC,YAAY,CAACC,OAAO,CAAC,IAAI,CAACC,OAAO,CAAC;EAC3C;EAEAC,YAAY,CAACC,KAAa;IACxBJ,YAAY,CAACK,OAAO,CAAC,IAAI,CAACH,OAAO,EAAEE,KAAK,CAAC;EAC3C;EAEAE,YAAY;IACVN,YAAY,CAACO,UAAU,CAAC,IAAI,CAACL,OAAO,CAAC;EACvC;;AAhBWJ,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;SAAjBA,iBAAiB;EAAAH,SAAjBG,iBAAiB;EAAAF,YAFhB;AAAM;;;;;;;;;;;;;;;;;;;;;;;ACD8B;AAEC;AACN;AACG;AACe;;;AAKzD,MAAO3J,sBAAsB;EAEjCyB,YAAoBE,KAAY;IAAZ,UAAK,GAALA,KAAK;EACzB;EAEAjB,WAAW,CACT6I,KAA6B,EAC7BC,KAA0B;IAC1B,OAAO,IAAI,CAAC7H,KAAK,CAACC,MAAM,CAACN,+EAA2B,CAAC,CAClDQ,IAAI,CACHP,4CAAM,CAACqE,KAAK,IAAIA,KAAK,KAAK+B,iFAAsB,CAAC,EACjDyB,yCAAG,CAACxD,KAAK,IAAIA,KAAK,KAAK+B,8EAAmB,CAAC,EAC3C0B,yCAAG,CAACmB,mBAAmB,IAAG;MACxB,IAAI,CAACA,mBAAmB,EAAE;QACxB,IAAI,CAAC7I,KAAK,CAACiH,QAAQ,CAAC,IAAIU,yDAAQ,CAAC,CAAC,IAAIrJ,4DAA0B,EAAE,CAAC,CAAC,CAAC;;IAEzE,CAAC,CAAC,CACH;EAEL;;AAnBWD,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;SAAtBA,sBAAsB;EAAA0J,SAAtB1J,sBAAsB;EAAA2J,YAFrB;AAAM;;;;;;;;;;;;;;;;;;;;ACR4B;AAGjB;AAEU;;;AAKnC,MAAOe,cAAc;EAEzBjJ,YAAoBiC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAkEP,gBAAW,GAA2B,MAAK;MAC1D,OAAO;QACLiH,IAAI,EAAE;UACJzE,OAAO,EAAE,GAAG;UACZC,GAAG,EAAE,EAAE;UACPC,aAAa,EAAE,GAAG;UAClBC,QAAQ,EAAE;SACX;QACDuE,IAAI,EAAE;UACJ1E,OAAO,EAAE,IAAI;UACbC,GAAG,EAAE,IAAI;UACTC,aAAa,EAAE,IAAI;UACnBC,QAAQ,EAAE;SACX;QAEDwE,KAAK,EAAE,CACL;UACEC,EAAE,EAAE,CAAC;UACLC,IAAI,EAAE,YAAY;UAClBC,IAAI,EAAE,iBAAiB;UACvBC,UAAU,EAAE,IAAI;UAChBC,SAAS,EAAE,IAAI;UACfC,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,EAAE;YACXC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,CAAC;UACLC,IAAI,EAAE,YAAY;UAClBC,IAAI,EAAE,YAAY;UAClBC,UAAU,EAAE,IAAI;UAChBC,SAAS,EAAE,IAAI;UACfC,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,KAAK;YACdC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,CAAC;UACLC,IAAI,EAAE,YAAY;UAClBC,IAAI,EAAE,YAAY;UAClBC,UAAU,EAAE,IAAI;UAChBC,SAAS,EAAE,IAAI;UACfC,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,IAAI;YACbC,GAAG,EAAE,EAAE;YACPC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,CAAC;UACLC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,QAAQ;UACdC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,IAAI;YACbC,GAAG,EAAE,IAAI;YACTC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,CAAC;UACLC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,gBAAgB;UACtBC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,IAAI;YACbC,GAAG,EAAE,IAAI;YACTC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,CAAC;UACLC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,UAAU;UAChBC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,EAAE;YACXC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,CAAC;UACLC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,aAAa;UACnBC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,IAAI;YACbC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,CAAC;UACLC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,aAAa;UACnBC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,IAAI;YACbC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,CAAC;UACLC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,qBAAqB;UAC3BC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,EAAE;YACXC,GAAG,EAAE,IAAI;YACTC,aAAa,EAAE,EAAE;YACjBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,iBAAiB;UACvBC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,EAAE;YACXC,GAAG,EAAE,IAAI;YACTC,aAAa,EAAE,IAAI;YACnBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,oBAAoB;UAC1BC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,EAAE;YACXC,GAAG,EAAE,IAAI;YACTC,aAAa,EAAE,IAAI;YACnBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,QAAQ;UACdC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,IAAI;YACbC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,IAAI;YACnBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,cAAc;UACpBC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,CAAC;YACVC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,IAAI;YACnBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,QAAQ;UACdC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,IAAI;YACbC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,IAAI;YACnBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,OAAO;UACbC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,EAAE;YACXC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,IAAI;YACnBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,KAAK;UACXC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,IAAI;YACbC,GAAG,EAAE,CAAC;YACNC,aAAa,EAAE,IAAI;YACnBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,MAAM;UACZC,UAAU,EAAE,KAAK;UACjBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,GAAG;YACZC,GAAG,EAAE,CAAC;YACNC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,SAAS;UACfC,UAAU,EAAE,IAAI;UAChBE,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,GAAG;YACZC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,IAAI;YACnBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfD,UAAU,EAAE,KAAK;UACjBD,IAAI,EAAE,WAAW;UACjBG,MAAM,EAAE,IAAI;UACZC,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,EAAE;YACXC,GAAG,EAAE,CAAC;YACNC,aAAa,EAAE,IAAI;YACnBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,YAAY;UAClBG,SAAS,EAAE,IAAI;UACfF,IAAI,EAAE,SAAS;UACfG,MAAM,EAAE,IAAI;UACZF,UAAU,EAAE,KAAK;UACjBG,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,EAAE;YACXC,GAAG,EAAE,CAAC;YACNC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,EAAE;UACNC,IAAI,EAAE,QAAQ;UACdG,SAAS,EAAE,CACT;YACEJ,EAAE,EAAE,EAAE;YACNC,IAAI,EAAE,YAAY;YAClBG,SAAS,EAAE,IAAI;YACfF,IAAI,EAAE,cAAc;YACpBC,UAAU,EAAE,IAAI;YAChBE,MAAM,EAAE,IAAI;YACZC,WAAW,EAAE,IAAI;YACjBC,gBAAgB,EAAE,GAAG;YACrB9E,IAAI,EAAE;cACJL,OAAO,EAAE,EAAE;cACXC,GAAG,EAAE,GAAG;cACRC,aAAa,EAAE,KAAK;cACpBC,QAAQ,EAAE;;WAEb,EACD;YACEyE,EAAE,EAAE,EAAE;YACNC,IAAI,EAAE,YAAY;YAClBG,SAAS,EAAE,IAAI;YACfF,IAAI,EAAE,MAAM;YACZC,UAAU,EAAE,KAAK;YACjBE,MAAM,EAAE,IAAI;YACZC,WAAW,EAAE,IAAI;YACjBC,gBAAgB,EAAE,GAAG;YACrB9E,IAAI,EAAE;cACJL,OAAO,EAAE,GAAG;cACZC,GAAG,EAAE,CAAC;cACNC,aAAa,EAAE,CAAC;cAChBC,QAAQ,EAAE;;WAEb,EACD;YACEyE,EAAE,EAAE,CAAC;YACLC,IAAI,EAAE,YAAY;YAClBC,IAAI,EAAE,iBAAiB;YACvBC,UAAU,EAAE,IAAI;YAChBC,SAAS,EAAE,IAAI;YACfC,MAAM,EAAE,IAAI;YACZC,WAAW,EAAE,IAAI;YACjBC,gBAAgB,EAAE,EAAE;YACpB9E,IAAI,EAAE;cACJL,OAAO,EAAE,IAAI;cACbC,GAAG,EAAE,GAAG;cACRC,aAAa,EAAE,CAAC;cAChBC,QAAQ,EAAE;;WAEb,CACF;UACD2E,IAAI,EAAE,MAAM;UACZG,MAAM,EAAE,IAAI;UACZF,UAAU,EAAE,IAAI;UAChBG,WAAW,EAAE,IAAI;UACjB7E,IAAI,EAAE;YACJL,OAAO,EAAE,EAAE;YACXC,GAAG,EAAE,CAAC;YACNC,aAAa,EAAE,CAAC;YAChBC,QAAQ,EAAE;;SAEb,CACF;QACDiF,MAAM,EAAE,CACN;UACER,EAAE,EAAE,CAAC;UACLE,IAAI,EAAE,KAAK;UACXO,QAAQ,EAAEjH,+CAAY,EAAE,CAACW,GAAG,CAAC;YAACU,OAAO,EAAE;UAAC,CAAC,CAAC;UAC1C6F,MAAM,EAAE,EAAE;UACVC,YAAY,EAAE,GAAG;UACjBC,YAAY,EAAE,GAAG;UACjBC,WAAW,EAAE,CACX;YACEb,EAAE,EAAE,EAAE;YACNC,IAAI,EAAE,YAAY;YAClBG,SAAS,EAAE,IAAI;YACfF,IAAI,EAAE,cAAc;YACpBC,UAAU,EAAE,IAAI;YAChBE,MAAM,EAAE,IAAI;YACZC,WAAW,EAAE,IAAI;YACjB7E,IAAI,EAAE;cACJL,OAAO,EAAE,CAAC;cACVC,GAAG,EAAE,GAAG;cACRC,aAAa,EAAE,IAAI;cACnBC,QAAQ,EAAE;aACX;YACDgF,gBAAgB,EAAE;WACnB,CACF;UACD9E,IAAI,EAAE;YACJL,OAAO,EAAE,GAAG;YACZC,GAAG,EAAE,GAAG;YACRC,aAAa,EAAE,KAAK;YACpBC,QAAQ,EAAE;WACX;UACDuF,OAAO,EAAE;SACV,CACF;QACDC,KAAK,EAAE,CACL;UACEf,EAAE,EAAE,CAAC;UACLgB,MAAM,EAAE,IAAI;UACZC,MAAM,EAAE,CAAC;UACTP,MAAM,EAAE,EAAE;UACVQ,OAAO,EAAE1H,+CAAY,EAAE;UACvB2H,MAAM,EAAE,GAAG;UACX1F,IAAI,EAAE;YACJL,OAAO,EAAE,OAAO;YAChBC,GAAG,EAAE,OAAO;YACZC,aAAa,EAAE,QAAQ;YACvBC,QAAQ,EAAE;;SAEb,EACD;UACEyE,EAAE,EAAE,CAAC;UACLgB,MAAM,EAAE,KAAK;UACbN,MAAM,EAAE,EAAE;UACVO,MAAM,EAAE,IAAI;UACZC,OAAO,EAAE1H,+CAAY,EAAE;UACvB2H,MAAM,EAAE,EAAE;UACV1F,IAAI,EAAE;YACJL,OAAO,EAAE,EAAE;YACXG,QAAQ,EAAE,GAAG;YACbD,aAAa,EAAE,IAAI;YACnBD,GAAG,EAAE;;SAER,CACF;QAEDoE,iBAAiB,EAAE,IAAI;QAEvB2B,OAAO,EAAE;UACPC,KAAK,EAAE,cAAc;UACrBC,iBAAiB,EAAE;;OAEtB;IACH,CAAC;EAvgBD;EAEAzL,MAAM,CAACwL,KAAa,EAAEE,QAAgB;IACpC,IAAIF,KAAK,KAAK,OAAO,EAAE;MACrB,OAAO1B,gDAAU,CAAC,MAAM,IAAI3F,KAAK,CAAC,gBAAgB,CAAC,CAAC;;IAGtD,OAAOqD,wCAAE,CAAC;MACRgC,KAAK,EAAE,YAAY;MACnB,GAAG,IAAI,CAACmC,WAAW;KACpB,CAAC;EACJ;EAEAC,UAAU;IACR,OAAOpE,wCAAE,CAAC;MAAC,GAAG,IAAI,CAACmE,WAAW;IAAE,CAAC,CAAC;EACpC;EAEAzL,MAAM,CAACsL,KAAa,EAAEE,QAAgB;IACpC,IAAIF,KAAK,CAACK,QAAQ,CAAC,OAAO,CAAC,EAAE;MAC3B,OAAO/B,gDAAU,CAAC,MAAM,IAAI3F,KAAK,CAAC,gBAAgB,CAAC,CAAC;;IAGtD,OAAOqD,wCAAE,CAAC;MACRgC,KAAK,EAAE;KACR,CAAC;EACJ;EAEAsC,gBAAgB,CAAC9B,IAAW,EAAEC,IAAkB;IAC9C,OAAOzC,wCAAE,CAAC,IAAI,CAAC;EACjB;EAEAuE,UAAU,CAACC,MAAc;IACvB,OAAOxE,wCAAE,CAAC,IAAI,CAAC;EACjB;EAEAyE,OAAO,CAACC,IAAW;IACjB,OAAO1E,wCAAE,CAAC;MACR0E,IAAI,EAAE;QACJ,GAAGA,IAAI;QACP/B,EAAE,EAAE+B,IAAI,CAAC/B,EAAE,IAAI,IAAI,GAAG+B,IAAI,CAAC/B,EAAE,GAAIjE,IAAI,CAACH,IAAI,CAACG,IAAI,CAACiG,MAAM,EAAE,GAAG,KAAK;;KAEnE,CAAC;EACJ;EAEAC,OAAO,CAACC,IAAmB;IACzB,OAAO7E,wCAAE,CAAC;MACR6E,IAAI,EAAE;QACJlC,EAAE,EAAEjE,IAAI,CAACH,IAAI,CAACG,IAAI,CAACiG,MAAM,EAAE,GAAG,KAAK,CAAC;QACpCvB,QAAQ,EAAEyB,IAAI,CAACzB,QAAQ;QACvBhF,IAAI,EAAE;UACJL,OAAO,EAAE,EAAE,GAAGW,IAAI,CAACH,IAAI,CAACG,IAAI,CAACiG,MAAM,EAAE,GAAG,EAAE,CAAC;UAC3C1G,aAAa,EAAE,EAAE,GAAGS,IAAI,CAACH,IAAI,CAACG,IAAI,CAACiG,MAAM,EAAE,GAAG,EAAE,CAAC;UACjD3G,GAAG,EAAE,CAAC,GAAGU,IAAI,CAACH,IAAI,CAACG,IAAI,CAACiG,MAAM,EAAE,GAAG,EAAE,CAAC;UACtCzG,QAAQ,EAAE,GAAG,GAAGQ,IAAI,CAACH,IAAI,CAACG,IAAI,CAACiG,MAAM,EAAE,GAAG,GAAG;SAC9C;QACD9B,IAAI,EAAEgC,IAAI,CAAChC,IAAI;QACfQ,MAAM,EAAEwB,IAAI,CAACxB,MAAM;QACnBG,WAAW,EAAEqB,IAAI,CAACrB,WAAW;QAC7BF,YAAY,EAAEuB,IAAI,CAACrB,WAAW,EAAEvC,GAAG,CAAC6D,CAAC,IAAIA,CAAC,CAAC5B,gBAAgB,CAAC,CAACtF,MAAM,CAACgB,mDAAG,EAAE,CAAC,CAAC;QAC3E2E,YAAY,EAAEsB,IAAI,CAACtB,YAAY;QAC/BE,OAAO,EAAE;;KAEZ,CAAC;EACJ;EA0cAsB,UAAU,CAACnB,MAAc;IACvB,OAAO5D,wCAAE,CAAC,IAAI,CAAC;EACjB;EAEAgF,OAAO,CAACC,IAAuB;IAC7B,OAAOjF,wCAAE,CAAC;MACR,GAAGiF,IAAI;MACPtC,EAAE,EAAEjE,IAAI,CAACH,IAAI,CAACG,IAAI,CAACiG,MAAM,EAAE,GAAG,KAAK;KAC3B,CAAC;EACb;;AArhBWpC,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;SAAdA,cAAc;EAAAhB,SAAdgB,cAAc;EAAAf,YAFb;AAAM;;;;;;;;;;;;;;;;;;;;;ACCd,MAAO0D,gBAAgB;EAG3B5L,YAA4B0K,KAAa,EACbE,QAAgB;IADhB,UAAK,GAALF,KAAK;IACL,aAAQ,GAARE,QAAQ;EACpC;;AALWgB,gBAAgB,CACXtC,IAAI,GAAG,gBAAgB;AAOnC,MAAOuC,wBAAwB;EAGnC7L,YAA4B0I,KAAa,EACbK,mBAA4B,EAC5B0B,OAAiB;IAFjB,UAAK,GAAL/B,KAAK;IACL,wBAAmB,GAAnBK,mBAAmB;IACnB,YAAO,GAAP0B,OAAO;EACnC;;AANWoB,wBAAwB,CACnBvC,IAAI,GAAG,0BAA0B;AAQ7C,MAAOwC,qBAAqB;EAGhC9L,YAA4B+L,GAAW;IAAX,QAAG,GAAHA,GAAG;EAC/B;;AAJWD,qBAAqB,CAChBxC,IAAI,GAAG,uBAAuB;AAM1C,MAAO0C,gBAAgB;AAAhBA,gBAAgB,CACX1C,IAAI,GAAG,gBAAgB;AAGnC,MAAO2C,gBAAgB;EAG3BjM,YAA4B0K,KAAa,EACbE,QAAgB;IADhB,UAAK,GAALF,KAAK;IACL,aAAQ,GAARE,QAAQ;EACpC;;AALWqB,gBAAgB,CACX3C,IAAI,GAAG,gBAAgB;AAOnC,MAAO4C,wBAAwB;EAGnClM,YAA4B0I,KAAa;IAAb,UAAK,GAALA,KAAK;EACjC;;AAJWwD,wBAAwB,CACnB5C,IAAI,GAAG,0BAA0B;AAM7C,MAAO6C,qBAAqB;EAGhCnM,YAA4B+L,GAAW;IAAX,QAAG,GAAHA,GAAG;EAC/B;;AAJWI,qBAAqB,CAChB7C,IAAI,GAAG,uBAAuB;AAM1C,MAAOvC,oBAAoB;EAG/B/G,YAA4BM,IAAc;IAAd,SAAI,GAAJA,IAAI;EAChC;;AAJWyG,oBAAoB,CACfuC,IAAI,GAAG,yBAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7D4B;AAWjD;AAE2B;AACX;AACwD;AAClD;AAEe;;;;AAe3D,IAAMzJ,SAAS,2BAAf,MAAMA,SAAS;EACpBG,YAAoB2M,cAA8B,EAC9BC,iBAAoC;IADpC,mBAAc,GAAdD,cAAc;IACd,sBAAiB,GAAjBC,iBAAiB;EACrC;EAKO,eAAQ,CAAC7E,KAAiB;IAC/B,OAAOA,KAAK,CAAC3H,QAAQ;EACvB;EAGO,YAAK,CAAC2H,KAAiB;IAC5B,OAAOA,KAAK,CAACW,KAAK;EACpB;EAGO,wBAAiB,CAACX,KAAiB;IACxC,OAAOA,KAAK,CAAC8E,QAAQ,CAAC1G,GAAG,CAAC4B,KAAK,CAACe,iBAAiB,CAAC;EACpD;EAGO,sBAAe,CAACf,KAAiB;IACtC,OAAOA,KAAK,CAAC8E,QAAQ;EACvB;EAGO,cAAO,CAAC9E,KAAiB;IAC9B,OAAOA,KAAK,CAAC0C,OAAO;EACtB;EAEAqC,UAAU,CAACtF,GAA6B;IACtC,MAAMkB,KAAK,GAAG,IAAI,CAACkE,iBAAiB,CAACvE,YAAY,EAAE;IACnD,IAAIK,KAAK,IAAI,IAAI,EAAE;MACjBlB,GAAG,CAACuF,UAAU,CAAC;QACbF,QAAQ,EAAE3G,+EAAoBI;OAC/B,CAAC;MACF;;IAGF,IAAI,CAACqG,cAAc,CAAC7B,UAAU,EAAE,CAC7BzK,IAAI,CACHuH,yCAAG,CAACoF,OAAO,IAAG;MACZxF,GAAG,CAACuF,UAAU,CAAC;QACbF,QAAQ,EAAE3G,8EAAmB;QAC7BwC,KAAK,EAAEA,KAAK;QACZ+B,OAAO,EAAEuC,OAAO,CAACvC,OAAO;QACxB3B,iBAAiB,EAAE5C,4EAAiB,CAAC8G,OAAO,CAAClE,iBAAiB,CAAC;QAC/D1I,QAAQ,EAAE4M,OAAO,CAACvC,OAAO,CAACE;OAC3B,CAAC;MAEF,IAAIqC,OAAO,CAAClE,iBAAiB,EAAE;QAC7BtB,GAAG,CAACL,QAAQ,CAAC,IAAIU,yDAAQ,CAAC,CAACrJ,sDAAoB,CAAC,CAAC,CAAC;OACnD,MAAM;QACLgJ,GAAG,CAACL,QAAQ,CAAC,IAAIU,yDAAQ,CAAC,CAACrJ,4DAA0B,CAAC,CAAC,CAAC;;IAE5D,CAAC,CAAC,EACFmJ,yCAAG,CAACqF,OAAO,IAAI,IAAIN,2EAAkB,CAACM,OAAO,CAAC,CAAC,CAChD,CACAzM,SAAS,CAACiH,GAAG,CAACL,QAAQ,CAAC;EAC5B;EAGA8F,sBAAsB,CAACzF,GAA6B,EAAE0F,MAAwB;IAC5E1F,GAAG,CAACuF,UAAU,CAAC;MACbrE,KAAK,EAAE,IAAI;MACXmE,QAAQ,EAAE3G,+EAAoB;MAC9B4C,iBAAiB,EAAE5C,iFAAsB;MACzCuE,OAAO,EAAE;KACV,CAAC;EACJ;EAGAvL,MAAM,CAACsI,GAA6B,EAAE0F,MAAwB;IAC5D,OAAO,IAAI,CAACP,cAAc,CAACzN,MAAM,CAACgO,MAAM,CAACxC,KAAK,EAAEwC,MAAM,CAACtC,QAAQ,CAAC,CAC7DvK,IAAI,CACHmM,+CAAQ,CAACW,GAAG,IAAIzG,yCAAE,CAChB,IAAIgG,2EAAkB,CAACS,GAAG,CAAC,EAC3B,IAAItB,wEAAwB,CAACsB,GAAG,CAACzE,KAAK,EAAEyE,GAAG,CAACrE,iBAAiB,EAAEqE,GAAG,CAAC1C,OAAO,CAAC,CAC5E,CAAC,EACF8B,iDAAU,CAACa,GAAG,IAAI1G,yCAAE,CAAC,IAAIoF,qEAAqB,CAACsB,GAAG,CAACC,OAAO,IAAI,gBAAgB,CAAC,CAAC,CAAC,EACjF1F,yCAAG,CAACH,GAAG,CAACL,QAAQ,CAAC,CAClB;EACL;EAGAmG,eAAe,CAAC9F,GAA6B,EAAE0F,MAAgC;IAC7E1F,GAAG,CAACuF,UAAU,CAAC;MACbrE,KAAK,EAAEwE,MAAM,CAACxE,KAAK;MACnBmE,QAAQ,EAAE3G,8EAAmB;MAC7B4C,iBAAiB,EAAEoE,MAAM,CAACnE,mBAAmB,GAAG7C,8EAAmB,GAAGA,+EAAoB;MAC1FuE,OAAO,EAAEyC,MAAM,CAACzC,OAAO;MACvBrK,QAAQ,EAAE8M,MAAM,CAACzC,OAAO,CAACE;KAC1B,CAAC;IAEF,IAAI,CAACiC,iBAAiB,CAACnE,YAAY,CAACyE,MAAM,CAACxE,KAAK,CAAC;IAEjD,OAAOwE,MAAM,CAACnE,mBAAmB,GAAGvB,GAAG,CAACL,QAAQ,CAAC,IAAIU,yDAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAGL,GAAG,CAACL,QAAQ,CAAC,IAAIU,yDAAQ,CAAC,CAAC,IAAIrJ,4DAA0B,EAAE,CAAC,CAAC,CAAC;EACxI;EAGA+O,kBAAkB,CAAC/F,GAA6B,EAAE0F,MAA6B;IAC7EM,OAAO,CAACC,IAAI,CAACP,MAAM,CAACnB,GAAG,CAAC;IAExBvE,GAAG,CAACuF,UAAU,CAAC;MACbrE,KAAK,EAAE,IAAI;MACXmE,QAAQ,EAAE3G,+EAAoB;MAC9B4C,iBAAiB,EAAE5C,+EAAoBI;KACxC,CAAC;EACJ;EAGAlH,MAAM,CAACoI,GAA6B,EAAE0F,MAAwB;IAC5D,OAAO,IAAI,CAACP,cAAc,CAACvN,MAAM,CAAC8N,MAAM,CAACxC,KAAK,EAAEwC,MAAM,CAACtC,QAAQ,CAAC,CAC7DvK,IAAI,CACHsH,yCAAG,CAACwF,GAAG,IAAI,IAAIjB,wEAAwB,CAACiB,GAAG,CAACzE,KAAK,CAAC,CAAC,EACnD6D,iDAAU,CAACa,GAAG,IAAI1G,yCAAE,CAAC,IAAIyF,qEAAqB,CAACiB,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,EAC7D1F,yCAAG,CAACH,GAAG,CAACL,QAAQ,CAAC,CAClB;EACL;EAGAuG,mBAAmB,CAAClG,GAA6B,EAAE0F,MAAgC;IACjF1F,GAAG,CAACuF,UAAU,CAAC;MACbrE,KAAK,EAAEwE,MAAM,CAACxE,KAAK;MACnBmE,QAAQ,EAAE3G,8EAAmB;MAC7B4C,iBAAiB,EAAE5C,+EAAoBI;KACxC,CAAC;IAEF,IAAI,CAACsG,iBAAiB,CAACnE,YAAY,CAACyE,MAAM,CAACxE,KAAK,CAAC;IAEjD,OAAOlB,GAAG,CAACL,QAAQ,CAAC,IAAIU,yDAAQ,CAAC,CAAC,IAAIrJ,4DAA0B,EAAE,CAAC,CAAC,CAAC;EACvE;EAGAmP,kBAAkB,CAACnG,GAA6B,EAAE0F,MAA6B;IAC7EM,OAAO,CAACC,IAAI,CAACP,MAAM,CAACnB,GAAG,CAAC;IAExBvE,GAAG,CAACuF,UAAU,CAAC;MACbrE,KAAK,EAAE,IAAI;MACXmE,QAAQ,EAAE3G,+EAAoB;MAC9B4C,iBAAiB,EAAE5C,+EAAoBI;KACxC,CAAC;EACJ;EAGAsH,uBAAuB,CAACpG,GAA6B,EAAE0F,MAA0C;IAC/F,IAAI1F,GAAG,CAACqG,QAAQ,EAAE,CAAChB,QAAQ,EAAE;MAC3BrF,GAAG,CAACuF,UAAU,CAAC;QACbjE,iBAAiB,EAAE5C,8EAAmBK;OACvC,CAAC;MAEF,OAAOiB,GAAG,CAACL,QAAQ,CAAC,IAAIU,yDAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;;IAE1C,OAAO,IAAI;EACb;EAGAiG,wBAAwB,CAACtG,GAA6B,EAAE0F,MAA0B;IAChF1F,GAAG,CAACuF,UAAU,CAAC;MACbjE,iBAAiB,EAAEoE,MAAM,CAACF,OAAO,CAAClE,iBAAiB,GAAG5C,8EAAmB,GAAGA,+EAAoBI;KACjG,CAAC;EACJ;EAGAyH,0BAA0B,CAACvG,GAA6B,EAAE0F,MAA4B;IACpF,MAAMzC,OAAO,GAAGjD,GAAG,CAACqG,QAAQ,EAAE,CAACpD,OAAO;IACtCjD,GAAG,CAACuF,UAAU,CAAC;MACb3M,QAAQ,EAAE8M,MAAM,CAAC5M;KAClB,CAAC;IACF,IAAImK,OAAO,IAAI,IAAI,EAAE;MACnBjD,GAAG,CAACuF,UAAU,CAAC;QACbtC,OAAO,EAAE;UACP,GAAGA,OAAO;UACVE,iBAAiB,EAAEuC,MAAM,CAAC5M;;OAE7B,CAAC;;EAEN;GA9KuB,uBAAgB,GAAa,IAAI;mBAL7CT,MAAS;AAAA;SAATA,MAAS;EAAAoI,SAATpI,MAAS;AAAA;AAgEpBmO,kDAAAA,EADC5B,mDAAM,CAACJ,gEAAgB,CAAC,uDAQxB;AAGDgC,kDAAAA,EADC5B,mDAAM,CAACR,gEAAgB,CAAC,uCAWxB;AAGDoC,kDAAAA,EADC5B,mDAAM,CAACP,wEAAwB,CAAC,gDAahC;AAGDmC,kDAAAA,EADC5B,mDAAM,CAACN,qEAAqB,CAAC,mDAS7B;AAGDkC,kDAAAA,EADC5B,mDAAM,CAACH,gEAAgB,CAAC,uCAQxB;AAGD+B,kDAAAA,EADC5B,mDAAM,CAACF,wEAAwB,CAAC,oDAWhC;AAGD8B,kDAAAA,EADC5B,mDAAM,CAACD,qEAAqB,CAAC,mDAS7B;AAGD6B,kDAAAA,EADC5B,mDAAM,CAACK,2FAAkC,CAAC,wDAU1C;AAGDuB,kDAAAA,EADC5B,mDAAM,CAACM,2EAAkB,CAAC,yDAK1B;AAGDsB,kDAAAA,EADC5B,mDAAM,CAACrF,oEAAoB,CAAC,2DAc5B;AA3KMiH,kDAAAA,EADN3B,qDAAQ,EAAE,+BAGV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,4BAGV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,wCAGV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,sCAGV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,8BAGV;AA9BUxM,SAAS,qEAXrByM,kDAAK,CAAa;EACjB/C,IAAI,EAAE,MAAM;EACZ0E,QAAQ,EAAE;IACRnF,iBAAiB,EAAE5C,iFAAsB;IACzC2G,QAAQ,EAAE3G,iFAAsB;IAChCwC,KAAK,EAAE,IAAI;IACX+B,OAAO,EAAE,IAAI;IACbrK,QAAQ,EAAE8N,WAAS,CAACxN;;CAEvB,CAAC,GAEWb,SAAS,CAqLrB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtLK,MAAO6M,kBAAkB;EAG7B1M,YAA4BgN,OAAyB;IAAzB,YAAO,GAAPA,OAAO;EACnC;;AAJWN,kBAAkB,CACbpD,IAAI,GAAG,yBAAyB;AAM5C,MAAO6E,sBAAsB;EAGjCnO,YAA4BkJ,IAAW,EAAkBC,IAAY;IAAzC,SAAI,GAAJD,IAAI;IAAyB,SAAI,GAAJC,IAAI;EAC7D;;AAJWgF,sBAAsB,CACjB7E,IAAI,GAAG,4BAA4B;AAM/C,MAAOmD,kCAAkC;EAG7CzM,YAA4BkJ,IAAW,EAAkBC,IAAkB;IAA/C,SAAI,GAAJD,IAAI;IAAyB,SAAI,GAAJC,IAAI;EAC7D;;AAJWsD,kCAAkC,CAC7BnD,IAAI,GAAG,wCAAwC;AAM3D,MAAO8E,+BAA+B;EAG1CpO,YAA4B+L,GAAW;IAAX,QAAG,GAAHA,GAAG;EAC/B;;AAJWqC,+BAA+B,CAC1B9E,IAAI,GAAG,uCAAuC;AAM1D,MAAO+E,gBAAgB;EAG3BrO,YAA4BkL,MAAc;IAAd,WAAM,GAANA,MAAM;EAClC;;AAJWmD,gBAAgB,CACX/E,IAAI,GAAG,sBAAsB;AAMzC,MAAOgF,4BAA4B;EAGvCtO,YAA4BkL,MAAc;IAAd,WAAM,GAANA,MAAM;EAClC;;AAJWoD,4BAA4B,CACvBhF,IAAI,GAAG,uBAAuB;AAM1C,MAAOiF,uBAAuB;EAGlCvO,YAA4BkL,MAAc,EACda,GAAW;IADX,WAAM,GAANb,MAAM;IACN,QAAG,GAAHa,GAAG;EAC/B;;AALWwC,uBAAuB,CAClBjF,IAAI,GAAG,+BAA+B;AAOlD,MAAOkF,gBAAgB;EAG3BxO,YAA4BsK,MAAc;IAAd,WAAM,GAANA,MAAM;EAClC;;AAJWkE,gBAAgB,CACXlF,IAAI,GAAG,sBAAsB;AAMzC,MAAOmF,gBAAgB;EAG3BzO,YAA4BsK,MAAc;IAAd,WAAM,GAANA,MAAM;EAClC;;AAJWmE,gBAAgB,CACXnF,IAAI,GAAG,uBAAuB;AAM1C,MAAOoF,uBAAuB;EAGlC1O,YAA4BsK,MAAc,EACdyB,GAAW;IADX,WAAM,GAANzB,MAAM;IACN,QAAG,GAAHyB,GAAG;EAC/B;;AALW2C,uBAAuB,CAClBpF,IAAI,GAAG,+BAA+B;AAOlD,MAAOqF,aAAa;EAGxB3O,YAA4BoL,IAAW;IAAX,SAAI,GAAJA,IAAI;EAChC;;AAJWuD,aAAa,CACRrF,IAAI,GAAG,mBAAmB;AAMtC,MAAOsF,0BAA0B;EAGrC5O,YAA4BoL,IAAW;IAAX,SAAI,GAAJA,IAAI;EAChC;;AAJWwD,0BAA0B,CACrBtF,IAAI,GAAG,qBAAqB;AAMxC,MAAOuF,qBAAqB;EAGhC7O,YAA4BoL,IAAW,EACXW,GAAW;IADX,SAAI,GAAJX,IAAI;IACJ,QAAG,GAAHW,GAAG;EAC/B;;AALW8C,qBAAqB,CAChBvF,IAAI,GAAG,6BAA6B;AAOhD,MAAOwF,qBAAqB;EAGhC9O,YAA4B+O,QAAgB;IAAhB,aAAQ,GAARA,QAAQ;EACpC;;AAJWD,qBAAqB,CAChBxF,IAAI,GAAG,oCAAoC;AAMvD,MAAO0F,sBAAsB;EAGjChP,YAA4BiP,UAA2E;IAA3E,eAAU,GAAVA,UAAU;EACtC;;AAJWD,sBAAsB,CACjB1F,IAAI,GAAG,uCAAuC;AAM1D,MAAO4F,yBAAyB;EAGpClP,YAA4BmP,GAAW;IAAX,QAAG,GAAHA,GAAG;EAC/B;;AAJWD,yBAAyB,CACpB5F,IAAI,GAAG,0CAA0C;AAM7D,MAAO8F,gBAAgB;EAG3BpP,YAA4BuL,IAAmB;IAAnB,SAAI,GAAJA,IAAI;EAChC;;AAJW6D,gBAAgB,CACX9F,IAAI,GAAG,sBAAsB;AAMzC,MAAO+F,gBAAgB;EAG3BrP,YAA4BuL,IAAW;IAAX,SAAI,GAAJA,IAAI;EAChC;;AAJW8D,gBAAgB,CACX/F,IAAI,GAAG,oCAAoC;AAMvD,MAAOgG,uBAAuB;EAGlCtP,YAA4B+L,GAAW;IAAX,QAAG,GAAHA,GAAG;EAC/B;;AAJWuD,uBAAuB,CAClBhG,IAAI,GAAG,+BAA+B;AAMlD,MAAOiG,gBAAgB;EAG3BvP,YAA4B2L,IAAuB;IAAvB,SAAI,GAAJA,IAAI;EAChC;;AAJW4D,gBAAgB,CACXjG,IAAI,GAAG,sBAAsB;AAMzC,MAAOkG,gBAAgB;EAG3BxP,YAA4B2L,IAAW;IAAX,SAAI,GAAJA,IAAI;EAChC;;AAJW6D,gBAAgB,CACXlG,IAAI,GAAG,uBAAuB;AAM1C,MAAOmG,qBAAqB;EAGhCzP,YAA4B+L,GAAW;IAAX,QAAG,GAAHA,GAAG;EAC/B;;AAJW0D,qBAAqB,CAChBnG,IAAI,GAAG,+BAA+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxLU;AA0BnC;AAGU;AAE2B;AACO;AAC5C;AAC8B;;;AAGtD,MAAMsG,iBAAiB,GAAG,QAAQ;AAwBlC,IAAMrO,WAAW,aAAjB,MAAMA,WAAW;EAEtBvB,YAAoB6P,OAAuB;IAAvB,YAAO,GAAPA,OAAO;EAC3B;EAGO,cAAO,CAAC9H,KAAmB;IAChC,OAAOA,KAAK,CAACiF,OAAO;EACtB;EAGO,aAAM,CAACjF,KAAmB;IAC/B,OAAOA,KAAK,CAAC8B,MAAM;EACrB;EAGO,YAAK,CAAC9B,KAAmB;IAC9B,OAAOA,KAAK,CAACqB,KAAK;EACpB;EAGO,YAAK,CAACrB,KAAmB;IAC9B,OAAOA,KAAK,CAACqC,KAAK;EACpB;EAGO,eAAQ,CAACrC,KAAmB;IACjC,MAAM+H,MAAM,GAAG,IAAIC,GAAG,EAAiB;IACvChI,KAAK,CAACqB,KAAK,CAAC4G,OAAO,CAACC,CAAC,IAAIH,MAAM,CAACtM,GAAG,CAACyM,CAAC,CAAC5G,EAAE,EAAE4G,CAAC,CAAC,CAAC;IAC7C,OAAOH,MAAM;EACf;EAGO,gBAAS,CAAC/H,KAAmB;IAClC,MAAM+H,MAAM,GAAG,IAAIC,GAAG,EAAiB;IACvChI,KAAK,CAAC8B,MAAM,CAACmG,OAAO,CAACE,CAAC,IAAIJ,MAAM,CAACtM,GAAG,CAAC0M,CAAC,CAAC7G,EAAE,EAAE6G,CAAC,CAAC,CAAC;IAC9C,OAAOJ,MAAM;EACf;EAGO,qBAAc,CAAC/H,KAAmB;IACvC,MAAMoI,KAAK,GAAGpI,KAAK,CAACqC,KAAK,CACtBtK,MAAM,CAACsQ,CAAC,IAAI9M,2DAAO,CAAC8M,CAAC,CAAC7F,OAAO,CAAC,CAAC,CAC/B5C,GAAG,CAACyI,CAAC,IAAIA,CAAC,CAACtL,IAAI,CAAC;IAEnB,IAAIiD,KAAK,CAACiF,OAAO,EAAE7D,IAAI,IAAI,IAAI,EAAE;MAC/BgH,KAAK,CAACE,IAAI,CAACtI,KAAK,CAACiF,OAAO,EAAE7D,IAAI,CAAC;;IAGjC,OAAO/E,4DAAQ,CAAC,GAAG+L,KAAK,CAAC;EAC3B;EAGO,oBAAa,CAACpI,KAAmB;IACtC,OAAOA,KAAK,CAACuI,KAAK,CAACC,SAAS;EAC9B;EAGO,+BAAwB,CAACxI,KAAmB;IACjD,OAAO,CAACA,KAAK,CAACuI,KAAK,CAACC,SAAS,CAACC,KAAK,EAAEtG,WAAW,IAAI,EAAE,EACnDvC,GAAG,CAAC6D,CAAC,IAAIA,CAAC,CAACyD,UAAU,CAAC,CACtBnP,MAAM,CAAC0L,CAAC,IAAIA,CAAC,IAAI,IAAI,CAAC;EAC3B;EAGO,sBAAe,CAACzD,KAAmB;IACxC,MAAMoI,KAAK,GAAGpI,KAAK,CAACqC,KAAK,CACtBtK,MAAM,CAACsQ,CAAC,IAAIxM,mEAAe,CAACwM,CAAC,CAAC7F,OAAO,CAAC,CAAC,CACvC5C,GAAG,CAACyI,CAAC,IAAIA,CAAC,CAACtL,IAAI,CAAC;IAEnB,IAAIiD,KAAK,CAACiF,OAAO,EAAE7D,IAAI,IAAI,IAAI,EAAE;MAC/B,KAAK,IAAIqC,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI3I,+CAAY,EAAE,CAACqB,OAAO,EAAEsH,CAAC,EAAE,EAAE;QAChD2E,KAAK,CAACE,IAAI,CAACtI,KAAK,CAACiF,OAAO,EAAE7D,IAAI,CAAC;;;IAInC,OAAO/E,4DAAQ,CAAC,GAAG+L,KAAK,CAAC;EAC3B;EAGO,iBAAU,CAACpI,KAAmB;IACnC,OAAOA,KAAK,CAACqC,KAAK,CACftK,MAAM,CAACsQ,CAAC,IAAI9M,2DAAO,CAAC8M,CAAC,CAAC7F,OAAO,CAAC,CAAC;EACpC;EAGAkG,sBAAsB,CAACjJ,GAA+B,EAAE0F,MAA0B;IAChF1F,GAAG,CAACuF,UAAU,CAAC;MACbC,OAAO,EAAE;QACP,GAAGE,MAAM,CAACF;OACX;MACD5C,KAAK,EAAE8C,MAAM,CAACF,OAAO,CAAC5C,KAAK;MAC3BP,MAAM,EAAEqD,MAAM,CAACF,OAAO,CAACnD,MAAM;MAC7BT,KAAK,EAAE8D,MAAM,CAACF,OAAO,CAAC5D;KACvB,CAAC;EACJ;EAGAsH,sBAAsB,CAAClJ,GAA+B,EAAE0F,MAAwB;IAC9E,OAAO,IAAI,CAAC2C,OAAO,CAACpE,UAAU,CAACyB,MAAM,CAAC5C,MAAM,CAAC,CAC1CjK,IAAI,CACHsH,yCAAG,CAACgJ,CAAC,IAAI,IAAIlC,kEAAgB,CAACvB,MAAM,CAAC5C,MAAM,CAAC,CAAC,EAC7CiC,gDAAU,CAACa,GAAG,IAAI1G,wCAAE,CAAC,IAAIgI,yEAAuB,CAACxB,MAAM,CAAC5C,MAAM,EAAE8C,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,EAC9E1F,yCAAG,CAACH,GAAG,CAACL,QAAQ,CAAC,CAClB;EACL;EAGAyJ,sBAAsB,CAACpJ,GAA+B,EAAE0F,MAAwB;IAC9E1F,GAAG,CAACuF,UAAU,CAAC;MACblD,MAAM,EAAErC,GAAG,CAACqG,QAAQ,EAAE,CAAChE,MAAM,CAAClC,GAAG,CAACuI,CAAC,IAAG;QACpC,IAAIA,CAAC,CAAC7G,EAAE,KAAK6D,MAAM,CAAC5C,MAAM,EAAE;UAC1B,OAAO4F,CAAC;SACT,MAAM;UACL,OAAO;YACL,GAAGA,CAAC;YACJ/F,OAAO,EAAE;WACV;;MAEL,CAAC;KACF,CAAC;EACJ;EAGA0G,6BAA6B,CAACrJ,GAA+B,EAAE0F,MAA+B;IAC5FM,OAAO,CAACC,IAAI,CAAC,yBAAyBP,MAAM,CAAC5C,MAAM,KAAK4C,MAAM,CAACnB,GAAG,EAAE,CAAC;EACvE;EAGAf,gBAAgB,CAACxD,GAA+B,EAAE0F,MAA8B;IAC9E,OAAO,IAAI,CAAC2C,OAAO,CAAC7E,gBAAgB,CAACkC,MAAM,CAAChE,IAAI,EAAEgE,MAAM,CAAC/D,IAAI,IAAI,IAAI,CAAC,CACnE9I,IAAI,CACHsH,yCAAG,CAACgJ,CAAC,IAAI,IAAIlE,oFAAkC,CAACS,MAAM,CAAChE,IAAI,EAAEgE,MAAM,CAAC/D,IAAI,IAAI,IAAI,CAAC,CAAC,EAClFoD,gDAAU,CAACa,GAAG,IAAI1G,wCAAE,CAAC,IAAI0H,iFAA+B,CAAChB,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,EACvE1F,yCAAG,CAACH,GAAG,CAACL,QAAQ,CAAC,CAClB;EACL;EAGA2J,wCAAwC,CAACtJ,GAA+B,EAAE0F,MAA0C;IAClH,MAAMF,OAAO,GAAGxF,GAAG,CAACqG,QAAQ,EAAE,CAACb,OAAmB;IAClDxF,GAAG,CAACuF,UAAU,CAAC;MACbC,OAAO,EAAE;QACP,GAAGA,OAAO;QACVlE,iBAAiB,EAAE,IAAI;QACvBI,IAAI,EAAEgE,MAAM,CAAChE,IAAI;QACjBC,IAAI,EAAE+D,MAAM,CAAC/D;;KAEhB,CAAC;EACJ;EAGA4H,8BAA8B,CAACvJ,GAA+B,EAAE0F,MAAuC;IACrG1F,GAAG,CAACuF,UAAU,CAAC;MACbC,OAAO,EAAE;QACP,GAAGxF,GAAG,CAACqG,QAAQ,EAAE,CAACb,OAAmB;QACrClE,iBAAiB,EAAE,KAAK;QACxBI,IAAI,EAAEjD,oEAAS;QACfkD,IAAI,EAAE;;KAET,CAAC;EACJ;EAGA6H,sBAAsB,CAACxJ,GAA+B,EAAE0F,MAAwB;IAC9E,OAAO,IAAI,CAAC2C,OAAO,CAAC5E,UAAU,CAACiC,MAAM,CAAChC,MAAM,CAAC,CAAC7K,IAAI,CAChDsH,yCAAG,CAACgJ,CAAC,IAAI,IAAIrC,8EAA4B,CAACpB,MAAM,CAAChC,MAAM,CAAC,CAAC,EACzDqB,gDAAU,CAACa,GAAG,IAAI1G,wCAAE,CAAC,IAAI6H,yEAAuB,CAACrB,MAAM,CAAChC,MAAM,EAAEkC,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,EAC9E1F,yCAAG,CAACH,GAAG,CAACL,QAAQ,CAAC,CAClB;EACH;EAGA8J,sBAAsB,CAACzJ,GAA+B,EAAE0F,MAAoC;IAC1F1F,GAAG,CAACuF,UAAU,CAAC;MACb3C,KAAK,EAAE5C,GAAG,CAACqG,QAAQ,EAAE,CAACzD,KAAK,CAACtK,MAAM,CAACsQ,CAAC,IAAIA,CAAC,CAAC/G,EAAE,KAAK6D,MAAM,CAAChC,MAAM;KAC/D,CAAC;EACJ;EAGAgG,wBAAwB,CAAC1J,GAA+B,EAAE0F,MAA+B;IACvFM,OAAO,CAAC2D,KAAK,CAAC,kCAAkCjE,MAAM,CAACnB,GAAG,EAAE,CAAC;EAC/D;EAGAqF,sBAAsB,CAAC5J,GAA+B,EAAE0F,MAAwB;IAC9E,OAAO,IAAI,CAAC2C,OAAO,CAACvE,OAAO,CAAC4B,MAAM,CAAC3B,IAAI,CAAC,CAAClL,IAAI,CAC3CsH,yCAAG,CAACwF,GAAG,IAAI,IAAIkC,kEAAgB,CAAClC,GAAG,CAAC5B,IAAI,CAAC,CAAC,EAC1CgB,gDAAU,CAACa,GAAG,IAAI1G,wCAAE,CAAC,IAAI4I,yEAAuB,CAAClC,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,EAC/D1F,yCAAG,CAACH,GAAG,CAACL,QAAQ,CAAC,CAClB;EACH;EAGAkK,6BAA6B,CAAC7J,GAA+B,EAAE0F,MAA+B;IAC5FM,OAAO,CAAC8D,GAAG,CAAC,4BAA4BpE,MAAM,CAACnB,GAAG,EAAE,CAAC;EACvD;EAGAwF,sBAAsB,CAAC/J,GAA+B,EAAE0F,MAAwB;IAC9E1F,GAAG,CAACuF,UAAU,CAAC;MACblD,MAAM,EAAE,CACN,GAAGrC,GAAG,CAACqG,QAAQ,EAAE,CAAChE,MAAM,EACxBqD,MAAM,CAAC3B,IAAI;KAEd,CAAC;EACJ;EAGAiG,mBAAmB,CAAChK,GAA+B,EAAE0F,MAAqB;IACxE,OAAO,IAAI,CAAC2C,OAAO,CAAC1E,OAAO,CAAC+B,MAAM,CAAC9B,IAAI,CAAC,CAAC/K,IAAI,CAC3CsH,yCAAG,CAACwF,GAAG,IAAI,IAAIyB,4EAA0B,CAACzB,GAAG,CAAC/B,IAAI,CAAC,CAAC,EACpDmB,gDAAU,CAACa,GAAG,IAAI1G,wCAAE,CAAC,IAAImI,uEAAqB,CAAC3B,MAAM,CAAC9B,IAAI,EAAEgC,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,EAC1E1F,yCAAG,CAACH,GAAG,CAACL,QAAQ,CAAC,CAClB;EACH;EAGAsK,gCAAgC,CAACjK,GAA+B,EAAE0F,MAAkC;IAClG1F,GAAG,CAACuF,UAAU,CAAC;MACb3C,KAAK,EAAE,CACL,GAAG5C,GAAG,CAACqG,QAAQ,EAAE,CAACzD,KAAK,EACvB8C,MAAM,CAAC9B,IAAI;KAEd,CAAC;EACJ;EAGAsG,2BAA2B,CAAClK,GAA+B,EAAE0F,MAA6B;IACxFM,OAAO,CAAC2D,KAAK,CAACjE,MAAM,CAACnB,GAAG,CAAC;EAC3B;EAGA4F,2BAA2B,CAACnK,GAA+B,EAAE0F,MAA6B;IACxF,MAAM9D,KAAK,GAAG5B,GAAG,CAACqG,QAAQ,EAAE,CAACzE,KAAK;IAElC,MAAMwI,MAAM,GAAGxI,KAAK,CAACyI,IAAI,CAAC5B,CAAC,IAAIA,CAAC,CAAC3G,IAAI,KAAK,QAAQ,IAAI2G,CAAC,CAAC5G,EAAE,KAAK6D,MAAM,CAAC6B,QAAQ,CAAC;IAE/E,IAAI6C,MAAM,IAAI,IAAI,EAAE;MAClBpE,OAAO,CAACC,IAAI,CAAC,yCAAyCP,MAAM,CAAC6B,QAAQ,EAAE,CAAC;MACxE;;IAGF,MAAM+C,eAAe,GAAG,CAACF,MAAM,CAACnI,SAAS,IAAI,EAAE,EAAE9B,GAAG,CAAC,CAAC6D,CAAC,EAAEuG,KAAK,KAAI;MAChE,OAAO;QACL9C,UAAU,EAAE7F,KAAK,CAACyI,IAAI,CAAC5B,CAAC,IAAIA,CAAC,CAAC5G,EAAE,KAAKmC,CAAC,CAACnC,EAAE,CAAC;QAC1CO,gBAAgB,EAAE4B,CAAC,CAAC5B,gBAAgB;QACpCmI;OACD;IACH,CAAC,CAAC;IAEFvK,GAAG,CAACL,QAAQ,CAAC,IAAIuI,wDAAS,CAAC;MACzB/Q,IAAI,EAAE,GAAGiR,iBAAiB,kBAAkB;MAC5CzL,KAAK,EAAE;QACLoF,IAAI,EAAE,GAAGqI,MAAM,CAACrI,IAAI,IAAI1G,+CAAY,EAAE,CAACmP,QAAQ,CAAC,OAAO,CAAC,EAAE;QAC1D9H,WAAW,EAAE4H,eAAe;QAC5B7H,YAAY,EAAE2H,MAAM,CAACnI,SAAS,EAC1B9B,GAAG,CAAC6D,CAAC,IAAIA,CAAC,CAAC5B,gBAAgB,CAAC,CAC7BtF,MAAM,CAAC,CAAC2N,EAAE,EAAEC,EAAE,KAAKD,EAAE,GAAGC,EAAE,EAAE,CAAC,CAAC,IAAI;;KAExC,CAAC,CAAC;EACL;EAGAC,4BAA4B,CAAC3K,GAA+B,EAAE0F,MAA8B;IAC1F1F,GAAG,CAACL,QAAQ,CAAC,IAAIwI,8DAAe,CAAC;MAC/BhR,IAAI,EAAE,GAAGiR,iBAAiB,kBAAkB;MAC5CwC,YAAY,EAAE,eAAe5K,GAAG,CAACqG,QAAQ,EAAE,CAACyC,KAAK,CAACC,SAAS,EAAEC,KAAK,EAAEtG,WAAW,EAAEmI,MAAM,IAAI,CAAC,EAAE;MAC9FlO,KAAK,EAAE+I,MAAM,CAAC+B;KACf,CAAC,CAAC;EACL;EAGAqD,+BAA+B,CAAC9K,GAA+B,EAAE0F,MAAiC;IAChG,MAAMhD,WAAW,GAAG1C,GAAG,CAACqG,QAAQ,EAAE,CAACyC,KAAK,CAACC,SAAS,EAAEC,KAAK,EAAEtG,WAAW;IACtE,MAAMiF,GAAG,GAAGjC,MAAM,CAACiC,GAAG;IACtB,IAAIjF,WAAW,IAAI,IAAI,IAAIA,WAAW,CAACmI,MAAM,IAAI,CAAC,IAAIlD,GAAG,IAAIjF,WAAW,CAACmI,MAAM,EAAE;MAC/E;;IAIF7K,GAAG,CAACL,QAAQ,CAAC,IAAIwI,8DAAe,CAAC;MAC/BhR,IAAI,EAAE,GAAGiR,iBAAiB,kBAAkB;MAC5CwC,YAAY,EAAE,aAAa;MAC3BjO,KAAK,EAAE,CACL,GAAG+F,WAAW,EAAEqI,KAAK,CAAC,CAAC,EAAEpD,GAAG,CAAC,EAC7B,GAAGjF,WAAW,EAAEqI,KAAK,CAACpD,GAAG,GAAG,CAAC,EAAEjF,WAAW,EAAEmI,MAAM,CAAC;KAEtD,CAAC,CAAC;EACL;EAGAG,sBAAsB,CAAChL,GAA+B,EAAE0F,MAAwB;IAC9E,OAAO,IAAI,CAAC2C,OAAO,CAACnE,OAAO,CAACwB,MAAM,CAACvB,IAAI,CAAC,CAACtL,IAAI,CAC3CsH,yCAAG,CAACgE,IAAI,IAAI,IAAI6D,kEAAgB,CAAC7D,IAAI,CAAC,CAAC,EACvCY,gDAAU,CAACa,GAAG,IAAI1G,wCAAE,CAAC,IAAI+I,uEAAqB,CAACrC,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,EAC7D1F,yCAAG,CAACH,GAAG,CAACL,QAAQ,CAAC,CAClB;EACH;EAGAsL,sBAAsB,CAACjL,GAA+B,EAAE0F,MAAwB;IAC9E1F,GAAG,CAACuF,UAAU,CAAC;MACb3D,KAAK,EAAE,CACL,GAAG5B,GAAG,CAACqG,QAAQ,EAAE,CAACzE,KAAK,EACvB8D,MAAM,CAACvB,IAAI;KAEd,CAAC;EACJ;EAGA+G,2BAA2B,CAAClL,GAA+B,EAAE0F,MAA6B;IACxFM,OAAO,CAACC,IAAI,CAACP,MAAM,CAACnB,GAAG,CAAC;EAC1B;;mBAzTWxK,MAAW;AAAA;SAAXA,MAAW;EAAA0G,SAAX1G,MAAW;AAAA;AAsFtByM,kDAAAA,EADC5B,mDAAM,CAACM,oEAAkB,CAAC,yDAU1B;AAGDsB,kDAAAA,EADC5B,mDAAM,CAACoC,kEAAgB,CAAC,yDAQxB;AAGDR,kDAAAA,EADC5B,mDAAM,CAACqC,kEAAgB,CAAC,yDAcxB;AAGDT,kDAAAA,EADC5B,mDAAM,CAACsC,yEAAuB,CAAC,gEAG/B;AAGDV,kDAAAA,EADC5B,mDAAM,CAAC+B,wEAAsB,CAAC,mDAQ9B;AAGDH,kDAAAA,EADC5B,mDAAM,CAACK,oFAAkC,CAAC,2EAW1C;AAGDuB,kDAAAA,EADC5B,mDAAM,CAACgC,iFAA+B,CAAC,iEAUvC;AAGDJ,kDAAAA,EADC5B,mDAAM,CAACiC,kEAAgB,CAAC,yDAOxB;AAGDL,kDAAAA,EADC5B,mDAAM,CAACkC,8EAA4B,CAAC,yDAKpC;AAGDN,kDAAAA,EADC5B,mDAAM,CAACmC,yEAAuB,CAAC,2DAG/B;AAGDP,kDAAAA,EADC5B,mDAAM,CAACgD,kEAAgB,CAAC,yDAOxB;AAGDpB,kDAAAA,EADC5B,mDAAM,CAACkD,yEAAuB,CAAC,gEAG/B;AAGDtB,kDAAAA,EADC5B,mDAAM,CAACiD,kEAAgB,CAAC,yDAQxB;AAGDrB,kDAAAA,EADC5B,mDAAM,CAACuC,+DAAa,CAAC,sDAOrB;AAGDX,kDAAAA,EADC5B,mDAAM,CAACwC,4EAA0B,CAAC,mEAQlC;AAGDZ,kDAAAA,EADC5B,mDAAM,CAACyC,uEAAqB,CAAC,8DAG7B;AAGDb,kDAAAA,EADC5B,mDAAM,CAAC0C,uEAAqB,CAAC,8DA6B7B;AAGDd,kDAAAA,EADC5B,mDAAM,CAAC4C,wEAAsB,CAAC,+DAO9B;AAGDhB,kDAAAA,EADC5B,mDAAM,CAAC8C,2EAAyB,CAAC,kEAiBjC;AAGDlB,kDAAAA,EADC5B,mDAAM,CAACmD,kEAAgB,CAAC,yDAOxB;AAGDvB,kDAAAA,EADC5B,mDAAM,CAACoD,kEAAgB,CAAC,yDAQxB;AAGDxB,kDAAAA,EADC5B,mDAAM,CAACqD,uEAAqB,CAAC,8DAG7B;AAnTMzB,kDAAAA,EADN3B,qDAAQ,EAAE,gCAGV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,+BAGV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,8BAGV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,8BAGV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,iCAKV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,kCAKV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,uCAWV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,sCAGV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,iDAKV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,wCAaV;AAGM2B,kDAAAA,EADN3B,qDAAQ,EAAE,mCAIV;AAnFU9K,WAAW,uDAtBvB+K,kDAAK,CAAe;EACnB/C,IAAI,EAAEqG,iBAAiB;EACvB3B,QAAQ,EAAE;IACRjB,OAAO,EAAE,IAAI;IACbnD,MAAM,EAAE,EAAE;IACVT,KAAK,EAAE,EAAE;IACTgB,KAAK,EAAE,EAAE;IACTkG,KAAK,EAAE;MACLC,SAAS,EAAE;QACTC,KAAK,EAAE;UACLjH,IAAI,EAAE,IAAI;UACVU,YAAY,EAAE,CAAC;UACfC,WAAW,EAAE;SACd;QACDyI,KAAK,EAAE,KAAK;QACZC,MAAM,EAAE,SAAS;QACjBC,MAAM,EAAE;;;;CAIf,CAAC,GAEWtR,WAAW,CA0TvB;;;;;;;;;;;;;;;;;;;AClWK,MAAOuR,sBAAsB;AAAtBA,sBAAsB,CACjBxJ,IAAI,GAAG,uBAAuB;AAG1C,MAAOyJ,4BAA4B;EAGvC/S,YAA4BgT,IAAuB;IAAvB,SAAI,GAAJA,IAAI;EAChC;;AAJWD,4BAA4B,CACvBzJ,IAAI,GAAG,+BAA+B;AAMlD,MAAO2J,6BAA6B;EAGxCjT,YAA4B4S,MAAyB,EACzBC,SAAkC,IAAI;IADtC,WAAM,GAAND,MAAM;IACN,WAAM,GAANC,MAAM;EAClC;;AALWI,6BAA6B,CACxB3J,IAAI,GAAG,gCAAgC;AAOnD,MAAO4J,4BAA4B;EAGvClT,YAA4B8E,IAAW;IAAX,SAAI,GAAJA,IAAI;EAChC;;AAJWoO,4BAA4B,CACvB5J,IAAI,GAAG,uCAAuC;AAM1D,MAAO6J,gCAAgC;EAG3CnT,eACA;;AAJWmT,gCAAgC,CAC3B7J,IAAI,GAAG,4CAA4C;;;;;;;;;;;;;;;;;;;;;AChDH;AAS5B;;AAG/B,MAAM8J,wBAAwB,GAAG,aAAa;AAErD,MAAMC,QAAQ,GAAsB;EAClC7C,KAAK,EAAE;IACL1L,IAAI,EAAE;MACJL,OAAO,EAAE,CAAC;MACVC,GAAG,EAAE,CAAC;MACNC,aAAa,EAAE,CAAC;MAChBC,QAAQ,EAAE;KACX;IACD2E,IAAI,EAAE,IAAI;IACV+J,WAAW,EAAE,IAAI;IACjBpJ,WAAW,EAAE;GACd;EACDyI,KAAK,EAAE,KAAK;EACZC,MAAM,EAAE,SAAS;EACjBC,MAAM,EAAE;CACT;AAOM,IAAM9Q,gBAAgB,aAAtB,MAAMA,gBAAgB;EAGpB,YAAK,CAACgG,KAAwB;IACnC,OAAOA,KAAK,CAACyI,KAAK;EACpB;EAGO,kBAAW,CAACzI,KAAwB;IACzC,OAAOA,KAAK,CAACyI,KAAK,CAACtG,WAAW;EAChC;EAGAqJ,kCAAkC,CAAC/L,GAAoC,EAAE0F,MAAoC;IAC3G1F,GAAG,CAACuF,UAAU,CAAC;MACbyD,KAAK,EAAEtD,MAAM,CAAC8F;KACf,CAAC;EACJ;EAGAQ,mCAAmC,CAAChM,GAAoC,EAAE0F,MAAqC;IAC7G1F,GAAG,CAACuF,UAAU,CAAC;MACb6F,MAAM,EAAE1F,MAAM,CAAC0F,MAAM;MACrBC,MAAM,EAAE3F,MAAM,CAAC2F;KAChB,CAAC;EACJ;EAGAY,4BAA4B,CAACjM,GAAoC,EAAE0F,MAA8B;IAC/F1F,GAAG,CAACkM,QAAQ,CAACL,QAAQ,CAAC;EACxB;EAGAM,kCAAkC,CAACnM,GAAoC,EAAE0F,MAAoC;IAC3G1F,GAAG,CAACuF,UAAU,CAAC;MACbyD,KAAK,EAAE;QACL,GAAGhJ,GAAG,CAACqG,QAAQ,EAAE,CAAC2C,KAAK;QACvB1L,IAAI,EAAEoI,MAAM,CAACpI;;KAEhB,CAAC;EACJ;EAGA8O,oCAAoC,CAACpM,GAAoC,EAAE0F,MAAwC;IACjH1F,GAAG,CAACuF,UAAU,CAAC;MACbyD,KAAK,EAAE;QACL,GAAGhJ,GAAG,CAACqG,QAAQ,EAAE,CAAC2C,KAAK;QACvBtG,WAAW,EAAE;;KAEhB,CAAC;EACJ;;mBAlDWnI,MAAgB;AAAA;SAAhBA,MAAgB;EAAAkG,SAAhBlG,MAAgB;AAAA;AAa3BiM,iDAAAA,EADC5B,mDAAM,CAAC2G,qFAA4B,CAAC,0EAKpC;AAGD/E,iDAAAA,EADC5B,mDAAM,CAAC6G,sFAA6B,CAAC,2EAMrC;AAGDjF,iDAAAA,EADC5B,mDAAM,CAAC0G,+EAAsB,CAAC,oEAG9B;AAGD9E,iDAAAA,EADC5B,mDAAM,CAAC8G,qFAA4B,CAAC,0EAQpC;AAGDlF,iDAAAA,EADC5B,mDAAM,CAAC+G,yFAAgC,CAAC,4EAQxC;AA/CMnF,iDAAAA,EADN3B,qDAAQ,EAAE,mCAGV;AAGM2B,iDAAAA,EADN3B,qDAAQ,EAAE,yCAGV;AAVUtK,gBAAgB,sDAL5BuK,kDAAK,CAAoB;EACxB/C,IAAI,EAAE6J,wBAAwB;EAC9BnF,QAAQ,EAAEoF;CACX,CAAC,GAEWtR,gBAAgB,CAmD5B;;;;;;;;;;;;;;;ACvFD;AACA;AACA;AAEO,MAAMZ,WAAW,GAAG;EACzBkB,UAAU,EAAE;CACb;AAED;;;;;;;AAOA;;;;;;;;;;;;;;;;ACf6C;AAGF;AACY;AAEvD,IAAIlB,6EAAsB,EAAE;EAC1B0S,6DAAc,EAAE;;AAGlBC,sEAAAA,EAAwB,CAACC,eAAe,CAAC7R,sDAAS,CAAC,CAChD8R,KAAK,CAAC5G,GAAG,IAAII,OAAO,CAAC2D,KAAK,CAAC/D,GAAG,CAAC,CAAC","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/commons/functions.ts","./src/app/commons/models/common.models.ts","./src/app/commons/routes.ts","./src/app/components/heading/heading.component.ts","./src/app/components/heading/heading.component.html","./src/app/service/is-authenticated.guard.ts","./src/app/service/is-not-authenticated.guard.ts","./src/app/service/local-store.service.ts","./src/app/service/profile-configured.guard.ts","./src/app/service/profile.service.ts","./src/app/state/auth/auth.state-models.ts","./src/app/state/auth/auth.state.ts","./src/app/state/domain/domain.state-models.ts","./src/app/state/domain/domain.state.ts","./src/app/state/form/add-food-form.state-models.ts","./src/app/state/form/add-food-form.state.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {IsAuthenticatedGuard} from './service/is-authenticated.guard';\nimport {ProfileConfiguredGuard} from './service/profile-configured.guard';\nimport * as fromRoutes from './commons/routes';\nimport {IsNotAuthenticatedGuard} from './service/is-not-authenticated.guard';\n\nconst routes: Routes = [\n  {\n    path: fromRoutes.dashboard,\n    loadComponent: () => import('./pages/dashboard-page/dashboard-page.component').then(mod => mod.DashboardPageComponent),\n    canActivate: [IsAuthenticatedGuard, ProfileConfiguredGuard],\n  },\n  {\n    path: fromRoutes.signIn,\n    loadComponent: () => import('./pages/sign-in-page/sign-in-page.component').then(mod => mod.SignInPageComponent),\n    canActivate: [IsNotAuthenticatedGuard],\n  },\n  {\n    path: fromRoutes.signUp,\n    loadComponent: () => import('./pages/sign-up-page/sign-up-page.component').then(mod => mod.SignUpPageComponent),\n    canActivate: [IsNotAuthenticatedGuard],\n  },\n  {\n    path: fromRoutes.completeProfile,\n    loadComponent: () => import('./pages/configure-profile/configure-profile.component').then(mod => mod.ConfigureProfileComponent),\n    canActivate: [IsAuthenticatedGuard],\n  },\n  {\n    path: '**',\n    redirectTo: `/${fromRoutes.dashboard}`,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {\n}\n","import {Component} from '@angular/core';\nimport {TranslateService} from '@ngx-translate/core';\nimport {Store} from '@ngxs/store';\nimport {AuthState} from './state/auth/auth.state';\nimport {filter} from 'rxjs';\n\n@Component({\n  selector: 'pfc-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent {\n  constructor(private translateService: TranslateService, private store: Store) {\n    store.select(AuthState.language)\n      .pipe(\n        filter(lang => lang != null)\n      )\n      .subscribe(lang => translateService.use(lang));\n\n    translateService.setDefaultLang(AuthState.DEFAULT_LANGUAGE);\n  }\n}\n","<pfc-heading></pfc-heading>\n<router-outlet></router-outlet>\n","import {NgModule} from '@angular/core';\nimport {BrowserModule} from '@angular/platform-browser';\n\nimport {AppRoutingModule} from './app-routing.module';\nimport {AppComponent} from './app.component';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {NgxsReduxDevtoolsPluginModule} from '@ngxs/devtools-plugin';\nimport {environment} from '../environments/environment';\nimport {NgxsRouterPluginModule} from '@ngxs/router-plugin';\nimport {NgxsLoggerPluginModule} from '@ngxs/logger-plugin';\nimport {NgxsModule} from '@ngxs/store';\nimport {AuthState} from './state/auth/auth.state';\nimport {DomainState} from './state/domain/domain.state';\nimport {HttpClient, HttpClientModule} from '@angular/common/http';\nimport {TranslateLoader, TranslateModule} from '@ngx-translate/core';\nimport {TranslateHttpLoader} from '@ngx-translate/http-loader';\nimport {HeadingComponent} from \"./components/heading/heading.component\";\nimport {NgxsFormPluginModule} from \"@ngxs/form-plugin\";\nimport {AddFoodFormState} from \"./state/form/add-food-form.state\";\n\nexport function HttpLoaderFactory(http: HttpClient) {\n  return new TranslateHttpLoader(http, './assets/i18n/');\n}\n\n@NgModule({\n  declarations: [\n    AppComponent,\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    BrowserAnimationsModule,\n    NgxsModule.forRoot([AuthState, DomainState, AddFoodFormState],\n      {developmentMode: !environment.production}),\n    NgxsRouterPluginModule.forRoot(),\n    NgxsLoggerPluginModule.forRoot({\n      disabled: environment.production,\n    }),\n    NgxsFormPluginModule.forRoot(),\n    TranslateModule.forRoot({\n      defaultLanguage: 'ua',\n      loader: {\n        provide: TranslateLoader,\n        useFactory: HttpLoaderFactory,\n        deps: [HttpClient],\n      },\n    }),\n\n    NgxsReduxDevtoolsPluginModule.forRoot({\n      disabled: environment.production,\n    }),\n    HeadingComponent,\n  ],\n  providers: [],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {\n}\n","import {DateObjectUnits, DateTime} from 'luxon';\nimport {IPfcc} from './models/common.models';\nimport {FormGroup, ValidatorFn} from \"@angular/forms\";\n\nexport function sumUndefined(n1: number | null | undefined,\n                             n2: number | null | undefined): number | undefined {\n  if (isValueAbsent(n1) && isValueAbsent(n2)) {\n    return undefined;\n  } else if (isValueAbsent(n1) && isDefined(n2)) {\n    return n2;\n  } else if (isValueAbsent(n2) && isDefined(n1)) {\n    return n1;\n  } else if (isDefined(n1) && isDefined(n2)) {\n    return n1 + n2;\n  }\n\n  throw new Error('Illegal state');\n}\n\nexport function isToday(date: DateTime): boolean {\n  return date.set(atStartOfDay)\n    .equals(DateTime.now().set(atStartOfDay));\n}\n\nexport function isOnCurrentWeek(date: DateTime): boolean {\n  return date.set(atStartOfWeek)\n    .equals((DateTime.now().set(atStartOfWeek)));\n}\n\nconst atStartOfDay: DateObjectUnits = {hour: 0, minute: 0, second: 0, millisecond: 0};\nconst atStartOfWeek: DateObjectUnits = {hour: 0, minute: 0, second: 0, millisecond: 0, weekday: 1};\n\nfunction isDefined<T>(value: T | null | undefined): value is T {\n  return value != null;\n}\n\nfunction isValueAbsent<T>(value: T | null | undefined): value is null | undefined {\n  return !isDefined(value);\n}\n\nexport function sumPfccs(...pfccs: IPfcc[]) {\n  return pfccs\n    .reduce((m1, m2) => {\n      return {\n        protein: (m1.protein || 0) + (m2.protein || 0),\n        fat: (m1.fat || 0) + (m2.fat || 0),\n        carbohydrates: (m1.carbohydrates || 0) + (m2.carbohydrates || 0),\n        calories: (m1.calories || 0) + (m2.calories || 0),\n      };\n    }, {} as IPfcc);\n}\n\nexport function ceilPfcc(pfcc: IPfcc, afterDotSigns = 2, caloriesAfterDotSign = 0): IPfcc {\n  return {\n    protein: pfcc.protein != null ? ceil(pfcc.protein, afterDotSigns) : null,\n    fat: pfcc.fat != null ? ceil(pfcc.fat, afterDotSigns) : null,\n    carbohydrates: pfcc.carbohydrates != null ? ceil(pfcc.carbohydrates, afterDotSigns) : null,\n    calories: pfcc.calories != null ? ceil(pfcc.calories, caloriesAfterDotSign) : null,\n  };\n}\n\nexport function multiplyPfcc(pfcc: IPfcc, multiplier: number): IPfcc {\n  return {\n    protein: pfcc.protein != null ? (pfcc.protein * multiplier) : null,\n    fat: pfcc.fat != null ? (pfcc.fat * multiplier) : null,\n    carbohydrates: pfcc.carbohydrates != null ? (pfcc.carbohydrates * multiplier) : null,\n    calories: pfcc.calories != null ? (pfcc.calories * multiplier) : null,\n  };\n}\n\nexport function ceil(value: number, afterDotSigns = 2): number {\n  const multiplier = Math.pow(10, afterDotSigns);\n\n  return Math.ceil(value * multiplier) / multiplier;\n}\n\nexport function sum(v1: number, v2: number): number {\n  return v1 + v2;\n}\n\nexport const pfccFormGroupIsNotEmpty: ValidatorFn = control => {\n  if (!(control instanceof FormGroup)\n  ) {\n    throw new Error('This validator can be applied only to FormGroup');\n  }\n\n  const proteinControl = control.get('protein');\n  const fatControl = control.get('fat');\n  const carbohydratesControl = control.get('carbohydrates');\n  const caloriesControl = control.get('calories');\n\n  if (proteinControl == null || fatControl == null || carbohydratesControl == null || caloriesControl == null) {\n    throw new Error('This validator can be applied only to FormGroup containing \"protein\", \"fat\", \"carbohydrates\" and \"calories\" FormControl-s');\n  }\n\n  const protein = proteinControl.value;\n  const fat = fatControl.value;\n  const carbohydrates = carbohydratesControl.value;\n  const calories = caloriesControl.value;\n\n  if(protein != null && typeof protein !== 'number') {\n    throw Error('Protein control value is not a number');\n  }\n  if(fat != null && typeof fat !== 'number') {\n    throw Error('Fat control value is not a number');\n  }\n  if(carbohydrates != null && typeof carbohydrates !== 'number') {\n    throw Error('Carbohydrates control value is not a number');\n  }\n  if(calories != null && typeof calories !== 'number') {\n    throw Error('Calories control value is not a number');\n  }\n\n  if (protein + fat + carbohydrates + calories === 0) {\n    return {\n      pfccIsZero: 'PFCC all zeroes'\n    };\n  }\n\n  return null;\n};\n","export interface IApiError {\n  message: string;\n}\n\nexport interface IPfcc {\n  protein: number | null;\n  fat: number | null;\n  carbohydrates: number | null;\n  calories: number | null;\n}\n\nexport const emptyPfcc: IPfcc = {\n  protein: 0,\n  fat: 0,\n  carbohydrates: 0,\n  calories: 0,\n};\n\nexport class UnknownBoolean {\n  static readonly TRUE = new UnknownBoolean('TRUE');\n  static readonly FALSE = new UnknownBoolean('FALSE');\n  static readonly UNKNOWN = new UnknownBoolean('UNKNOWN');\n\n  private constructor(public readonly value: string) {\n  }\n\n  public and(other: UnknownBoolean): UnknownBoolean {\n    if (this == UnknownBoolean.UNKNOWN || other == UnknownBoolean.UNKNOWN) {\n      return UnknownBoolean.UNKNOWN;\n    } else if (this == UnknownBoolean.FALSE || other == UnknownBoolean.FALSE) {\n      return UnknownBoolean.FALSE;\n    } else {\n      return UnknownBoolean.TRUE;\n    }\n  }\n\n  public or(other: UnknownBoolean): UnknownBoolean {\n    if (this == UnknownBoolean.UNKNOWN || other == UnknownBoolean.UNKNOWN) {\n      return UnknownBoolean.UNKNOWN;\n    } else if (this == UnknownBoolean.FALSE && other == UnknownBoolean.FALSE) {\n      return UnknownBoolean.FALSE;\n    } else {\n      return UnknownBoolean.TRUE;\n    }\n  }\n\n  public not(): UnknownBoolean {\n    if (this == UnknownBoolean.UNKNOWN) {\n      return UnknownBoolean.UNKNOWN;\n    } else if (this == UnknownBoolean.TRUE) {\n      return UnknownBoolean.FALSE;\n    } else {\n      return UnknownBoolean.TRUE;\n    }\n  }\n\n  static of(value: boolean) {\n    return value ? UnknownBoolean.TRUE : UnknownBoolean.FALSE;\n  }\n}\n","export const dashboard = 'dashboard';\nexport const signIn = 'signin';\nexport const signUp = 'signup';\nexport const completeProfile = 'complete-profile';\n","import {AfterViewInit, ChangeDetectionStrategy, Component, ViewChild} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {MatFormFieldModule} from \"@angular/material/form-field\";\nimport {MatIconModule} from \"@angular/material/icon\";\nimport {MatSelect, MatSelectChange, MatSelectModule} from \"@angular/material/select\";\nimport {Store} from \"@ngxs/store\";\nimport {Language} from \"../../commons/models/auth.models\";\nimport {LanguageChangedEvent} from \"../../state/auth/auth.state-models\";\nimport {AuthState} from \"../../state/auth/auth.state\";\nimport {take} from \"rxjs\";\n\n@Component({\n  selector: 'pfc-heading',\n  standalone: true,\n  imports: [CommonModule, MatFormFieldModule, MatIconModule, MatSelectModule],\n  templateUrl: './heading.component.html',\n  styleUrls: ['./heading.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class HeadingComponent implements AfterViewInit {\n  //TODO: Auto-infer\n  protected availableLanguages: Language[] = ['ua', 'en'];\n\n  @ViewChild(\"langSelector\")\n  private langSelector!: MatSelect;\n\n  constructor(private store: Store) {\n  }\n\n  handleLangChanged(selection: MatSelectChange) {\n    this.store.dispatch(new LanguageChangedEvent(selection.value));\n  }\n\n  ngAfterViewInit(): void {\n    this.store.select(AuthState.language)\n      .pipe(take(1))\n      .subscribe(value => {\n        this.langSelector.writeValue(value);\n      });\n  }\n}\n","\n<div class=\"flex-spacer\"></div>\n<mat-form-field appearance=\"outline\" class=\"lang-select mat-form-field-no-bottom\">\n  <mat-label>\n    <mat-icon fontIcon=\"public\"></mat-icon>\n  </mat-label>\n  <mat-select (selectionChange)=\"handleLangChanged($event)\" #langSelector>\n    <mat-option *ngFor=\"let lang of availableLanguages\" [value]=\"lang\">{{lang}}</mat-option>\n  </mat-select>\n</mat-form-field>\n","import {Injectable} from '@angular/core';\nimport {ActivatedRouteSnapshot, CanActivate, RouterStateSnapshot} from '@angular/router';\nimport {filter, map, Observable, tap} from 'rxjs';\nimport {Store} from '@ngxs/store';\nimport {AuthState} from '../state/auth/auth.state';\nimport {Navigate} from '@ngxs/router-plugin';\nimport * as fromRoutes from '../commons/routes';\nimport {UnknownBoolean} from '../commons/models/common.models';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class IsAuthenticatedGuard implements CanActivate {\n  constructor(private store: Store) {\n  }\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\n    return this.store.select(AuthState.isAuthenticated)\n      .pipe(\n        filter(isAuthenticated => isAuthenticated !== UnknownBoolean.UNKNOWN),\n        map(value => value === UnknownBoolean.TRUE),\n        tap(isAuthenticated => {\n          if (!isAuthenticated) {\n            this.store.dispatch(new Navigate([`/${fromRoutes.signIn}`]));\n          }\n        }),\n      );\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {ActivatedRouteSnapshot, CanActivate, RouterStateSnapshot} from '@angular/router';\nimport {filter, map, Observable, tap} from 'rxjs';\nimport {Store} from '@ngxs/store';\nimport {AuthState} from '../state/auth/auth.state';\nimport {UnknownBoolean} from '../commons/models/common.models';\nimport {Navigate} from '@ngxs/router-plugin';\nimport * as fromRoutes from '../commons/routes';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class IsNotAuthenticatedGuard implements CanActivate {\n  constructor(private store: Store) {\n  }\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\n    return this.store.select(AuthState.isAuthenticated)\n      .pipe(\n        filter(isAuthenticated => isAuthenticated !== UnknownBoolean.UNKNOWN),\n        map(value => value === UnknownBoolean.FALSE),\n        tap(isNotAuthenticated => {\n          if (!isNotAuthenticated) {\n            this.store.dispatch(new Navigate([`/${fromRoutes.dashboard}`]));\n          }\n        }),\n      );\n  }\n\n}\n","import {Injectable} from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LocalStoreService {\n  private readonly JWT_KEY = 'jwt';\n\n  constructor() {\n  }\n\n  loadJwtToken(): string | null {\n    return localStorage.getItem(this.JWT_KEY);\n  }\n\n  saveJwtToken(token: string) {\n    localStorage.setItem(this.JWT_KEY, token);\n  }\n\n  dropJwtToken() {\n    localStorage.removeItem(this.JWT_KEY);\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {ActivatedRouteSnapshot, CanActivate, RouterStateSnapshot} from '@angular/router';\nimport {filter, map, Observable, tap} from 'rxjs';\nimport {Store} from '@ngxs/store';\nimport {AuthState} from '../state/auth/auth.state';\nimport {Navigate} from '@ngxs/router-plugin';\nimport * as fromRoutes from '../commons/routes';\nimport {UnknownBoolean} from '../commons/models/common.models';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProfileConfiguredGuard implements CanActivate {\n\n  constructor(private store: Store) {\n  }\n\n  canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Observable<boolean> {\n    return this.store.select(AuthState.profileConfigured)\n      .pipe(\n        filter(value => value !== UnknownBoolean.UNKNOWN),\n        map(value => value === UnknownBoolean.TRUE),\n        tap(isProfileConfigured => {\n          if (!isProfileConfigured) {\n            this.store.dispatch(new Navigate([`/${fromRoutes.completeProfile}`]));\n          }\n        }),\n      );\n\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable, of, throwError} from 'rxjs';\nimport {ISignInResponse, ISignUpResponse} from '../commons/models/auth.models';\nimport {ICreateDishResponse, IDishToCreate, IFood, IMeal, IProfileResponse} from '../commons/models/domain.models';\nimport {DateTime} from 'luxon';\nimport {IPfcc} from '../commons/models/common.models';\nimport {sum} from \"../commons/functions\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProfileService {\n\n  constructor(private http: HttpClient) {\n  }\n\n  signIn(email: string, password: string): Observable<ISignInResponse> {\n    if (email === 'error') {\n      return throwError(() => new Error('Sign in failed'));\n    }\n\n    return of({\n      token: 'test-token',\n      ...this.mockProfile(),\n    });\n  }\n\n  getProfile(): Observable<IProfileResponse> {\n    return of({...this.mockProfile()});\n  }\n\n  signUp(email: string, password: string): Observable<ISignUpResponse> {\n    if (email.includes('error')) {\n      return throwError(() => new Error('Sign up failed'));\n    }\n\n    return of({\n      token: 'test-token',\n    });\n  }\n\n  configureProfile(aims: IPfcc, base: IPfcc | null): Observable<null> {\n    return of(null);\n  }\n\n  removeMeal(mealId: number): Observable<null> {\n    return of(null);\n  }\n\n  addMeal(meal: IMeal): Observable<{ meal: IMeal }> {\n    return of({\n      meal: {\n        ...meal,\n        id: meal.id != null ? meal.id : (Math.ceil(Math.random() * 10000))\n      }\n    });\n  }\n\n  addDish(dish: IDishToCreate): Observable<ICreateDishResponse> {\n    return of({\n      dish: {\n        id: Math.ceil(Math.random() * 10000),\n        cookedOn: dish.cookedOn,\n        pfcc: {\n          protein: 20 + Math.ceil(Math.random() * 40),\n          carbohydrates: 40 + Math.ceil(Math.random() * 50),\n          fat: 5 + Math.ceil(Math.random() * 15),\n          calories: 100 + Math.ceil(Math.random() * 900),\n        },\n        name: dish.name,\n        foodId: dish.foodId,\n        ingredients: dish.ingredients,\n        recipeWeight: dish.ingredients?.map(i => i.ingredientWeight).reduce(sum, 0),\n        cookedWeight: dish.cookedWeight,\n        deleted: false\n      }\n    });\n  }\n\n  private readonly mockProfile: () => IProfileResponse = () => {\n    return {\n      aims: {\n        protein: 120,\n        fat: 50,\n        carbohydrates: 180,\n        calories: null,\n      },\n      base: {\n        protein: null,\n        fat: null,\n        carbohydrates: 12.6,\n        calories: 49,\n      },\n\n      foods: [\n        {\n          id: 1,\n          type: 'ingredient',\n          name: 'СВ Задняя часть',\n          isCookable: true,\n          consistOf: null,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 21,\n            fat: 9.6,\n            carbohydrates: 0,\n            calories: 176,\n          },\n        },\n        {\n          id: 2,\n          type: 'ingredient',\n          name: 'СВ Корейка',\n          isCookable: true,\n          consistOf: null,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 20.50,\n            fat: 5.4,\n            carbohydrates: 0,\n            calories: 136,\n          },\n        },\n        {\n          id: 3,\n          type: 'ingredient',\n          name: 'СВ Лопатка',\n          isCookable: true,\n          consistOf: null,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 16.7,\n            fat: 20,\n            carbohydrates: 0,\n            calories: 253,\n          },\n        },\n        {\n          id: 4,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'СВ Шея',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 16.1,\n            fat: 22.8,\n            carbohydrates: 0,\n            calories: 267,\n          },\n        },\n        {\n          id: 5,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'КУР Бедро б.к.',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 25.7,\n            fat: 10.7,\n            carbohydrates: 0,\n            calories: 207,\n          },\n        },\n        {\n          id: 6,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'КУР Филе',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 23,\n            fat: 1.2,\n            carbohydrates: 0,\n            calories: 110,\n          },\n        },\n        {\n          id: 7,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'ГОВ Лопатка',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 20.5,\n            fat: 6.2,\n            carbohydrates: 0,\n            calories: 144,\n          },\n        },\n        {\n          id: 8,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'ГОВ Вырезка',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 20.7,\n            fat: 8.8,\n            carbohydrates: 0,\n            calories: 169,\n          },\n        },\n        {\n          id: 9,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Пельмени ГБ свинные',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 14,\n            fat: 11.5,\n            carbohydrates: 29,\n            calories: 272,\n          },\n        },\n        {\n          id: 10,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Пельмени ГБ с/г',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 13,\n            fat: 11.2,\n            carbohydrates: 28.3,\n            calories: 262,\n          },\n        },\n        {\n          id: 11,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Пельмени ГБ 3 мяса',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 13,\n            fat: 11.2,\n            carbohydrates: 28.3,\n            calories: 262,\n          },\n        },\n        {\n          id: 12,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Гречка',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 13.2,\n            fat: 3.4,\n            carbohydrates: 71.5,\n            calories: 343,\n          },\n        },\n        {\n          id: 13,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Рис/Макароны',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 7,\n            fat: 0.6,\n            carbohydrates: 77.3,\n            calories: 323,\n          },\n        },\n        {\n          id: 14,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Булгур',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 12.3,\n            fat: 1.3,\n            carbohydrates: 75.8,\n            calories: 342,\n          },\n        },\n        {\n          id: 15,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Горох',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 23,\n            fat: 1.2,\n            carbohydrates: 53.3,\n            calories: 303,\n          },\n        },\n        {\n          id: 16,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Нут',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 19.3,\n            fat: 6,\n            carbohydrates: 60.6,\n            calories: 364,\n          },\n        },\n        {\n          id: 17,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Яйцо',\n          isCookable: false,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 6.3,\n            fat: 5,\n            carbohydrates: 0,\n            calories: 74,\n          },\n        },\n        {\n          id: 18,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Полента',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 7.2,\n            fat: 1.5,\n            carbohydrates: 72.1,\n            calories: 331,\n          },\n        },\n        {\n          id: 19,\n          type: 'ingredient',\n          consistOf: null,\n          isCookable: false,\n          name: 'Моцарелла',\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 19,\n            fat: 1,\n            carbohydrates: 18.5,\n            calories: 246,\n          },\n        },\n        {\n          id: 20,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Протеин',\n          hidden: true,\n          isCookable: false,\n          ownedByUser: true,\n          pfcc: {\n            protein: 80,\n            fat: 0,\n            carbohydrates: 0,\n            calories: 433,\n          },\n        },\n        {\n          id: 21,\n          type: 'recipe',\n          consistOf: [\n            {\n              id: 13,\n              type: 'ingredient',\n              consistOf: null,\n              name: 'Рис/Макароны',\n              isCookable: true,\n              hidden: true,\n              ownedByUser: true,\n              ingredientWeight: 200,\n              pfcc: {\n                protein: 14,\n                fat: 1.2,\n                carbohydrates: 154.6,\n                calories: 646,\n              },\n            },\n            {\n              id: 17,\n              type: 'ingredient',\n              consistOf: null,\n              name: 'Яйцо',\n              isCookable: false,\n              hidden: true,\n              ownedByUser: true,\n              ingredientWeight: 200,\n              pfcc: {\n                protein: 6.3,\n                fat: 5,\n                carbohydrates: 0,\n                calories: 74,\n              },\n            },\n            {\n              id: 1,\n              type: 'ingredient',\n              name: 'СВ Задняя часть',\n              isCookable: true,\n              consistOf: null,\n              hidden: true,\n              ownedByUser: true,\n              ingredientWeight: 50,\n              pfcc: {\n                protein: 10.5,\n                fat: 4.8,\n                carbohydrates: 0,\n                calories: 88,\n              },\n            }\n          ],\n          name: 'Плов',\n          hidden: true,\n          isCookable: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 80,\n            fat: 0,\n            carbohydrates: 0,\n            calories: 433,\n          },\n        },\n      ],\n      dishes: [\n        {\n          id: 1,\n          name: 'Рис',\n          cookedOn: DateTime.now().set({weekday: 1}),\n          foodId: 13,\n          recipeWeight: 230,\n          cookedWeight: 560,\n          ingredients: [\n            {\n              id: 13,\n              type: 'ingredient',\n              consistOf: null,\n              name: 'Рис/Макароны',\n              isCookable: true,\n              hidden: true,\n              ownedByUser: true,\n              pfcc: {\n                protein: 7,\n                fat: 0.6,\n                carbohydrates: 77.3,\n                calories: 323,\n              },\n              ingredientWeight: 230\n            }\n          ],\n          pfcc: {\n            protein: 3.5,\n            fat: 0.3,\n            carbohydrates: 38.65,\n            calories: 161.5\n          },\n          deleted: false\n        },\n      ],\n      meals: [\n        {\n          id: 1,\n          cooked: true,\n          dishId: 1,\n          foodId: 13,\n          eatenOn: DateTime.now(),\n          weight: 200,\n          pfcc: {\n            protein: 6.07547,\n            fat: 0.52075,\n            carbohydrates: 67.09056,\n            calories: 280.33962,\n          },\n        },\n        {\n          id: 2,\n          cooked: false,\n          foodId: 20,\n          dishId: null,\n          eatenOn: DateTime.now(),\n          weight: 30,\n          pfcc: {\n            protein: 24,\n            calories: 130,\n            carbohydrates: null,\n            fat: null,\n          },\n        },\n      ],\n\n      profileConfigured: true,\n\n      account: {\n        email: 'yva@test.com',\n        preferredLanguage: 'en',\n      },\n    };\n  };\n\n  deleteDish(dishId: number): Observable<null> {\n    return of(null);\n  }\n\n  addFood(food: Omit<IFood, \"id\">): Observable<IFood> {\n    return of({\n      ...food,\n      id: Math.ceil(Math.random() * 10000),\n    } as IFood);\n  }\n}\n","import {UnknownBoolean} from '../../commons/models/common.models';\nimport {IAccount, Language} from '../../commons/models/auth.models';\n\nexport interface IAuthState {\n  loggedIn: UnknownBoolean,\n  profileConfigured: UnknownBoolean,\n  token: string | null,\n  account: IAccount | null,\n  language: Language\n}\n\nexport class AuthSignInAction {\n  static readonly type = '[AUTH] Sign in';\n\n  constructor(public readonly email: string,\n              public readonly password: string) {\n  }\n}\n\nexport class AuthSignInSucceededEvent {\n  static readonly type = '[AUTH] Sign in succeeded';\n\n  constructor(public readonly token: string,\n              public readonly isProfileConfigured: boolean,\n              public readonly account: IAccount) {\n  }\n}\n\nexport class AuthSignInFailedEvent {\n  static readonly type = '[AUTH] Sign in failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n\nexport class AuthLogOutAction {\n  static readonly type = '[AUTH] Log out';\n}\n\nexport class AuthSignUpAction {\n  static readonly type = '[AUTH] Sign up';\n\n  constructor(public readonly email: string,\n              public readonly password: string) {\n  }\n}\n\nexport class AuthSignUpSucceededEvent {\n  static readonly type = '[AUTH] Sign up succeeded';\n\n  constructor(public readonly token: string) {\n  }\n}\n\nexport class AuthSignUpFailedEvent {\n  static readonly type = '[AUTH] Sign up failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n\nexport class LanguageChangedEvent {\n  static readonly type = '[AUTH] Language changed';\n\n  constructor(public readonly lang: Language) {\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {Action, NgxsOnInit, Selector, State, StateContext} from '@ngxs/store';\nimport {\n  AuthLogOutAction,\n  AuthSignInAction,\n  AuthSignInFailedEvent,\n  AuthSignInSucceededEvent,\n  AuthSignUpAction,\n  AuthSignUpFailedEvent,\n  AuthSignUpSucceededEvent,\n  IAuthState,\n  LanguageChangedEvent,\n} from './auth.state-models';\nimport {ProfileService} from '../../service/profile.service';\nimport {catchError, map, mergeMap, of, tap} from 'rxjs';\nimport {Navigate} from '@ngxs/router-plugin';\nimport {ProfileConfiguredSuccessfullyEvent, ProfileLoadedEvent} from '../domain/domain.state-models';\nimport * as fromRoutes from '../../commons/routes';\nimport {LocalStoreService} from '../../service/local-store.service';\nimport {UnknownBoolean} from '../../commons/models/common.models';\nimport {IAccount, Language} from '../../commons/models/auth.models';\n\n\n@State<IAuthState>({\n  name: 'auth',\n  defaults: {\n    profileConfigured: UnknownBoolean.UNKNOWN,\n    loggedIn: UnknownBoolean.UNKNOWN,\n    token: null,\n    account: null,\n    language: AuthState.DEFAULT_LANGUAGE\n  },\n})\n@Injectable()\nexport class AuthState implements NgxsOnInit {\n  constructor(private profileService: ProfileService,\n              private localStoreService: LocalStoreService) {\n  }\n\n  public static readonly DEFAULT_LANGUAGE: Language = 'ua';\n\n  @Selector()\n  static language(state: IAuthState): Language {\n    return state.language;\n  }\n\n  @Selector()\n  static token(state: IAuthState): string | null {\n    return state.token;\n  }\n\n  @Selector()\n  static profileConfigured(state: IAuthState): UnknownBoolean {\n    return state.loggedIn.and(state.profileConfigured);\n  }\n\n  @Selector()\n  static isAuthenticated(state: IAuthState): UnknownBoolean {\n    return state.loggedIn;\n  }\n\n  @Selector()\n  static account(state: IAuthState): IAccount | null {\n    return state.account;\n  }\n\n  ngxsOnInit(ctx: StateContext<IAuthState>): void {\n    const token = this.localStoreService.loadJwtToken();\n    if (token == null) {\n      ctx.patchState({\n        loggedIn: UnknownBoolean.FALSE,\n      });\n      return;\n    }\n\n    this.profileService.getProfile()\n      .pipe(\n        tap(profile => {\n          ctx.patchState({\n            loggedIn: UnknownBoolean.TRUE,\n            token: token,\n            account: profile.account,\n            profileConfigured: UnknownBoolean.of(profile.profileConfigured),\n            language: profile.account.preferredLanguage\n          });\n\n          if (profile.profileConfigured) {\n            ctx.dispatch(new Navigate([fromRoutes.dashboard]));\n          } else {\n            ctx.dispatch(new Navigate([fromRoutes.completeProfile]));\n          }\n        }),\n        map(profile => new ProfileLoadedEvent(profile))\n      )\n      .subscribe(ctx.dispatch);\n  }\n\n  @Action(AuthLogOutAction)\n  handleAuthLogOutAction(ctx: StateContext<IAuthState>, action: AuthLogOutAction) {\n    ctx.patchState({\n      token: null,\n      loggedIn: UnknownBoolean.FALSE,\n      profileConfigured: UnknownBoolean.UNKNOWN,\n      account: null,\n    });\n  }\n\n  @Action(AuthSignInAction)\n  signIn(ctx: StateContext<IAuthState>, action: AuthSignInAction) {\n    return this.profileService.signIn(action.email, action.password)\n      .pipe(\n        mergeMap(rsp => of(\n          new ProfileLoadedEvent(rsp),\n          new AuthSignInSucceededEvent(rsp.token, rsp.profileConfigured, rsp.account),\n        )),\n        catchError(err => of(new AuthSignInFailedEvent(err.message ?? 'Sign in failed'))),\n        map(ctx.dispatch),\n      );\n  }\n\n  @Action(AuthSignInSucceededEvent)\n  signInSucceeded(ctx: StateContext<IAuthState>, action: AuthSignInSucceededEvent) {\n    ctx.patchState({\n      token: action.token,\n      loggedIn: UnknownBoolean.TRUE,\n      profileConfigured: action.isProfileConfigured ? UnknownBoolean.TRUE : UnknownBoolean.FALSE,\n      account: action.account,\n      language: action.account.preferredLanguage\n    });\n\n    this.localStoreService.saveJwtToken(action.token);\n\n    return action.isProfileConfigured ? ctx.dispatch(new Navigate(['/'])) : ctx.dispatch(new Navigate([`/${fromRoutes.completeProfile}`]));\n  }\n\n  @Action(AuthSignInFailedEvent)\n  handleSignInFailed(ctx: StateContext<IAuthState>, action: AuthSignInFailedEvent) {\n    console.warn(action.msg);\n\n    ctx.patchState({\n      token: null,\n      loggedIn: UnknownBoolean.FALSE,\n      profileConfigured: UnknownBoolean.FALSE,\n    });\n  }\n\n  @Action(AuthSignUpAction)\n  signUp(ctx: StateContext<IAuthState>, action: AuthSignUpAction) {\n    return this.profileService.signUp(action.email, action.password)\n      .pipe(\n        map(rsp => new AuthSignUpSucceededEvent(rsp.token)),\n        catchError(err => of(new AuthSignUpFailedEvent(err.message))),\n        map(ctx.dispatch),\n      );\n  }\n\n  @Action(AuthSignUpSucceededEvent)\n  handleSignUpSuccess(ctx: StateContext<IAuthState>, action: AuthSignUpSucceededEvent) {\n    ctx.patchState({\n      token: action.token,\n      loggedIn: UnknownBoolean.TRUE,\n      profileConfigured: UnknownBoolean.FALSE,\n    });\n\n    this.localStoreService.saveJwtToken(action.token);\n\n    return ctx.dispatch(new Navigate([`/${fromRoutes.completeProfile}`]));\n  }\n\n  @Action(AuthSignUpFailedEvent)\n  handleSignUpFailed(ctx: StateContext<IAuthState>, action: AuthSignUpFailedEvent) {\n    console.warn(action.msg);\n\n    ctx.patchState({\n      token: null,\n      loggedIn: UnknownBoolean.FALSE,\n      profileConfigured: UnknownBoolean.FALSE,\n    });\n  }\n\n  @Action(ProfileConfiguredSuccessfullyEvent)\n  handleProfileConfigured(ctx: StateContext<IAuthState>, action: ProfileConfiguredSuccessfullyEvent) {\n    if (ctx.getState().loggedIn) {\n      ctx.patchState({\n        profileConfigured: UnknownBoolean.TRUE,\n      });\n\n      return ctx.dispatch(new Navigate(['/']));\n    }\n    return null;\n  }\n\n  @Action(ProfileLoadedEvent)\n  handleProfileLoadedEvent(ctx: StateContext<IAuthState>, action: ProfileLoadedEvent) {\n    ctx.patchState({\n      profileConfigured: action.profile.profileConfigured ? UnknownBoolean.TRUE : UnknownBoolean.FALSE,\n    });\n  }\n\n  @Action(LanguageChangedEvent)\n  handleLanguageChangedEvent(ctx: StateContext<IAuthState>, action: LanguageChangedEvent) {\n    const account = ctx.getState().account;\n    ctx.patchState({\n      language: action.lang\n    })\n    if (account != null) {\n      ctx.patchState({\n        account: {\n          ...account,\n          preferredLanguage: action.lang\n        }\n      });\n    }\n  }\n\n}\n","import {\n  IDish,\n  IDishToCreate,\n  IFood,\n  IMeal,\n  IProfile,\n  IProfileResponse,\n  IProfileStatistics\n} from '../../commons/models/domain.models';\nimport {IPfcc} from '../../commons/models/common.models';\nimport {IFormState} from \"../form/form.commons\";\n\nexport interface ICookADishFormModel {\n  name: string | null;\n  ingredients: {\n    ingredient: IFood,\n    ingredientWeight: number,\n    index: number\n  }[];\n  cookedWeight: number\n}\n\nexport interface IDomainState {\n  profile: IProfile | null;\n  foods: IFood[];\n  meals: IMeal[];\n  dishes: IDish[];\n  stats?: IProfileStatistics;\n  forms: {\n    cookADish: IFormState<ICookADishFormModel>\n  }\n}\n\nexport class ProfileLoadedEvent {\n  static readonly type = '[DOMAIN] Profile loaded';\n\n  constructor(public readonly profile: IProfileResponse) {\n  }\n}\n\nexport class ConfigureProfileAction {\n  static readonly type = '[DOMAIN] Configure profile';\n\n  constructor(public readonly aims: IPfcc, public readonly base?: IPfcc) {\n  }\n}\n\nexport class ProfileConfiguredSuccessfullyEvent {\n  static readonly type = '[DOMAIN] Profile configuration updated';\n\n  constructor(public readonly aims: IPfcc, public readonly base: IPfcc | null) {\n  }\n}\n\nexport class ProfileConfigurationFailedEvent {\n  static readonly type = '[DOMAIN] Profile configuration failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n\nexport class RemoveMealAction {\n  static readonly type = '[DOMAIN] Remove meal';\n\n  constructor(public readonly mealId: number) {\n  }\n}\n\nexport class MealRemovedSuccessfullyEvent {\n  static readonly type = '[DOMAIN] Meal removed';\n\n  constructor(public readonly mealId: number) {\n  }\n}\n\nexport class MealRemovingFailedEvent {\n  static readonly type = '[DOMAIN] Meal removing failed';\n\n  constructor(public readonly mealId: number,\n              public readonly msg: string) {\n  }\n}\n\nexport class DeleteDishAction {\n  static readonly type = '[DOMAIN] Delete dish';\n\n  constructor(public readonly dishId: number) {\n  }\n}\n\nexport class DishDeletedEvent {\n  static readonly type = '[DOMAIN] Dish deleted';\n\n  constructor(public readonly dishId: number) {\n  }\n}\n\nexport class DishDeletionFailedEvent {\n  static readonly type = '[DOMAIN] Dish deletion failed';\n\n  constructor(public readonly dishId: number,\n              public readonly msg: string) {\n  }\n}\n\nexport class AddMealAction {\n  static readonly type = '[DOMAIN] Add meal';\n\n  constructor(public readonly meal: IMeal) {\n  }\n}\n\nexport class MealAddedSuccessfullyEvent {\n  static readonly type = '[DOMAIN] Meal added';\n\n  constructor(public readonly meal: IMeal) {\n  }\n}\n\nexport class MealAddingFailedEvent {\n  static readonly type = '[DOMAIN] Meal adding failed';\n\n  constructor(public readonly meal: IMeal,\n              public readonly msg: string) {\n  }\n}\n\nexport class InitiateCookADishForm {\n  static readonly type = '[DOMAIN] Initiate Cook a Dish form';\n\n  constructor(public readonly recipeId: number) {\n  }\n}\n\nexport class CookADishAddIngredient {\n  static readonly type = '[DOMAIN] Cook a Dish - add ingredient';\n\n  constructor(public readonly ingredient: { ingredient?: IFood, ingredientWeight: number, index: number }) {\n  }\n}\n\nexport class CookADishRemoveIngredient {\n  static readonly type = '[DOMAIN] Cook a Dish - remove ingredient';\n\n  constructor(public readonly idx: number) {\n  }\n}\n\nexport class CreateDishAction {\n  static readonly type = '[DOMAIN] Create dish';\n\n  constructor(public readonly dish: IDishToCreate) {\n  }\n}\n\nexport class DishCreatedEvent {\n  static readonly type = '[DOMAIN] Dish created successfully';\n\n  constructor(public readonly dish: IDish) {\n  }\n}\n\nexport class DishCreationFailedEvent {\n  static readonly type = '[DOMAIN] Dish creation failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n\nexport class CreateFoodAction {\n  static readonly type = '[DOMAIN] Create food';\n\n  constructor(public readonly food: Omit<IFood, 'id'>) {\n  }\n}\n\nexport class FoodCreatedEvent {\n  static readonly type = '[DOMAIN] Food created';\n\n  constructor(public readonly food: IFood) {\n  }\n}\n\nexport class CreateFoodFailedEvent {\n  static readonly type = '[DOMAIN] Food creation failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n","import {Action, Selector, State, StateContext} from '@ngxs/store';\nimport {\n  AddMealAction,\n  ConfigureProfileAction,\n  CookADishAddIngredient,\n  CookADishRemoveIngredient,\n  CreateDishAction,\n  CreateFoodAction,\n  CreateFoodFailedEvent,\n  DeleteDishAction,\n  DishCreatedEvent,\n  DishCreationFailedEvent,\n  DishDeletedEvent,\n  DishDeletionFailedEvent,\n  FoodCreatedEvent,\n  ICookADishFormModel,\n  IDomainState,\n  InitiateCookADishForm,\n  MealAddedSuccessfullyEvent,\n  MealAddingFailedEvent,\n  MealRemovedSuccessfullyEvent,\n  MealRemovingFailedEvent,\n  ProfileConfigurationFailedEvent,\n  ProfileConfiguredSuccessfullyEvent,\n  ProfileLoadedEvent,\n  RemoveMealAction,\n} from './domain.state-models';\nimport {Injectable} from '@angular/core';\nimport {ProfileService} from '../../service/profile.service';\nimport {catchError, map, of} from 'rxjs';\nimport {IDish, IFood, IMeal, IProfile} from '../../commons/models/domain.models';\nimport {emptyPfcc, IPfcc} from '../../commons/models/common.models';\nimport {isOnCurrentWeek, isToday, sumPfccs} from '../../commons/functions';\nimport {DateTime} from 'luxon';\nimport {ResetForm, UpdateFormValue} from \"@ngxs/form-plugin\";\nimport {IFormState} from \"../form/form.commons\";\n\nexport const DOMAIN_STATE_NAME = 'domain';\n\n@State<IDomainState>({\n  name: DOMAIN_STATE_NAME,\n  defaults: {\n    profile: null,\n    dishes: [],\n    foods: [],\n    meals: [],\n    forms: {\n      cookADish: {\n        model: {\n          name: null,\n          cookedWeight: 0,\n          ingredients: []\n        },\n        dirty: false,\n        status: 'PENDING',\n        errors: {}\n      }\n    }\n  },\n})\n@Injectable()\nexport class DomainState {\n\n  constructor(private service: ProfileService) {\n  }\n\n  @Selector()\n  static profile(state: IDomainState) {\n    return state.profile;\n  }\n\n  @Selector()\n  static dishes(state: IDomainState) {\n    return state.dishes;\n  }\n\n  @Selector()\n  static foods(state: IDomainState) {\n    return state.foods;\n  }\n\n  @Selector()\n  static meals(state: IDomainState) {\n    return state.meals;\n  }\n\n  @Selector()\n  static foodsMap(state: IDomainState): Map<number, IFood> {\n    const result = new Map<number, IFood>();\n    state.foods.forEach(f => result.set(f.id, f));\n    return result;\n  }\n\n  @Selector()\n  static dishesMap(state: IDomainState): Map<number, IDish> {\n    const result = new Map<number, IDish>();\n    state.dishes.forEach(d => result.set(d.id, d));\n    return result;\n  }\n\n  @Selector()\n  static todayNutrients(state: IDomainState): IPfcc {\n    const eaten = state.meals\n      .filter(m => isToday(m.eatenOn))\n      .map(m => m.pfcc);\n\n    if (state.profile?.base != null) {\n      eaten.push(state.profile?.base);\n    }\n\n    return sumPfccs(...eaten);\n  }\n\n  @Selector()\n  static cookADishForm(state: IDomainState): IFormState<ICookADishFormModel> {\n    return state.forms.cookADish;\n  }\n\n  @Selector()\n  static cookADishUsedIngredients(state: IDomainState): IFood[] {\n    return (state.forms.cookADish.model?.ingredients || [])\n      .map(i => i.ingredient)\n      .filter(i => i != null);\n  }\n\n  @Selector()\n  static weeklyNutrients(state: IDomainState): IPfcc {\n    const eaten = state.meals\n      .filter(m => isOnCurrentWeek(m.eatenOn))\n      .map(m => m.pfcc);\n\n    if (state.profile?.base != null) {\n      for (let i = 0; i <= DateTime.now().weekday; i++) {\n        eaten.push(state.profile?.base);\n      }\n    }\n\n    return sumPfccs(...eaten);\n  }\n\n  @Selector()\n  static todayMeals(state: IDomainState): IMeal[] {\n    return state.meals\n      .filter(m => isToday(m.eatenOn));\n  }\n\n  @Action(ProfileLoadedEvent)\n  handleSuccessfulSignIn(ctx: StateContext<IDomainState>, action: ProfileLoadedEvent) {\n    ctx.patchState({\n      profile: {\n        ...action.profile,\n      },\n      meals: action.profile.meals,\n      dishes: action.profile.dishes,\n      foods: action.profile.foods,\n    });\n  }\n\n  @Action(DeleteDishAction)\n  handleDeleteDishAction(ctx: StateContext<IDomainState>, action: DeleteDishAction) {\n    return this.service.deleteDish(action.dishId)\n      .pipe(\n        map(_ => new DishDeletedEvent(action.dishId)),\n        catchError(err => of(new DishDeletionFailedEvent(action.dishId, err.message))),\n        map(ctx.dispatch)\n      );\n  }\n\n  @Action(DishDeletedEvent)\n  handleDishDeletedEvent(ctx: StateContext<IDomainState>, action: DishDeletedEvent) {\n    ctx.patchState({\n      dishes: ctx.getState().dishes.map(d => {\n        if (d.id !== action.dishId) {\n          return d;\n        } else {\n          return {\n            ...d,\n            deleted: true\n          }\n        }\n      })\n    });\n  }\n\n  @Action(DishDeletionFailedEvent)\n  handleDishDeletionFailedEvent(ctx: StateContext<IDomainState>, action: DishDeletionFailedEvent) {\n    console.warn(`Failed to delete dish#${action.dishId}: ${action.msg}`);\n  }\n\n  @Action(ConfigureProfileAction)\n  configureProfile(ctx: StateContext<IDomainState>, action: ConfigureProfileAction) {\n    return this.service.configureProfile(action.aims, action.base || null)\n      .pipe(\n        map(_ => new ProfileConfiguredSuccessfullyEvent(action.aims, action.base || null)),\n        catchError(err => of(new ProfileConfigurationFailedEvent(err.message))),\n        map(ctx.dispatch),\n      );\n  }\n\n  @Action(ProfileConfiguredSuccessfullyEvent)\n  handleProfileConfiguredSuccessfullyEvent(ctx: StateContext<IDomainState>, action: ProfileConfiguredSuccessfullyEvent) {\n    const profile = ctx.getState().profile as IProfile;\n    ctx.patchState({\n      profile: {\n        ...profile,\n        profileConfigured: true,\n        aims: action.aims,\n        base: action.base,\n      },\n    });\n  }\n\n  @Action(ProfileConfigurationFailedEvent)\n  handleProfileConfiguringFailed(ctx: StateContext<IDomainState>, action: ProfileConfigurationFailedEvent) {\n    ctx.patchState({\n      profile: {\n        ...ctx.getState().profile as IProfile,\n        profileConfigured: false,\n        aims: emptyPfcc,\n        base: null,\n      },\n    });\n  }\n\n  @Action(RemoveMealAction)\n  handleRemoveMealAction(ctx: StateContext<IDomainState>, action: RemoveMealAction) {\n    return this.service.removeMeal(action.mealId).pipe(\n      map(_ => new MealRemovedSuccessfullyEvent(action.mealId)),\n      catchError(err => of(new MealRemovingFailedEvent(action.mealId, err.message))),\n      map(ctx.dispatch),\n    );\n  }\n\n  @Action(MealRemovedSuccessfullyEvent)\n  handleMealRemovedEvent(ctx: StateContext<IDomainState>, action: MealRemovedSuccessfullyEvent) {\n    ctx.patchState({\n      meals: ctx.getState().meals.filter(m => m.id !== action.mealId),\n    });\n  }\n\n  @Action(MealRemovingFailedEvent)\n  handleMealRemovingFailed(ctx: StateContext<IDomainState>, action: MealRemovingFailedEvent) {\n    console.error(`Failed to remove meal, reason: ${action.msg}`);\n  }\n\n  @Action(CreateDishAction)\n  handleCreateDishAction(ctx: StateContext<IDomainState>, action: CreateDishAction) {\n    return this.service.addDish(action.dish).pipe(\n      map(rsp => new DishCreatedEvent(rsp.dish)),\n      catchError(err => of(new DishCreationFailedEvent(err.message))),\n      map(ctx.dispatch)\n    )\n  }\n\n  @Action(DishCreationFailedEvent)\n  handleDishCreationFailedEvent(ctx: StateContext<IDomainState>, action: DishCreationFailedEvent) {\n    console.log(`Failed to create a dish: ${action.msg}`);\n  }\n\n  @Action(DishCreatedEvent)\n  handleDishCreatedEvent(ctx: StateContext<IDomainState>, action: DishCreatedEvent) {\n    ctx.patchState({\n      dishes: [\n        ...ctx.getState().dishes,\n        action.dish\n      ]\n    })\n  }\n\n  @Action(AddMealAction)\n  handleAddMealAction(ctx: StateContext<IDomainState>, action: AddMealAction) {\n    return this.service.addMeal(action.meal).pipe(\n      map(rsp => new MealAddedSuccessfullyEvent(rsp.meal)),\n      catchError(err => of(new MealAddingFailedEvent(action.meal, err.message))),\n      map(ctx.dispatch)\n    );\n  }\n\n  @Action(MealAddedSuccessfullyEvent)\n  handleMealAddedSuccessfullyEvent(ctx: StateContext<IDomainState>, action: MealAddedSuccessfullyEvent) {\n    ctx.patchState({\n      meals: [\n        ...ctx.getState().meals,\n        action.meal\n      ]\n    });\n  }\n\n  @Action(MealAddingFailedEvent)\n  handleMealAddingFailedEvent(ctx: StateContext<IDomainState>, action: MealAddingFailedEvent) {\n    console.error(action.msg);\n  }\n\n  @Action(InitiateCookADishForm)\n  handleInitiateCookADishForm(ctx: StateContext<IDomainState>, action: InitiateCookADishForm) {\n    const foods = ctx.getState().foods;\n\n    const recipe = foods.find(f => f.type === 'recipe' && f.id === action.recipeId);\n\n    if (recipe == null) {\n      console.warn(`Can't find recipe with provided id == ${action.recipeId}`);\n      return;\n    }\n\n    const formIngredients = (recipe.consistOf || []).map((i, index) => {\n      return {\n        ingredient: foods.find(f => f.id === i.id),\n        ingredientWeight: i.ingredientWeight,\n        index\n      };\n    });\n\n    ctx.dispatch(new ResetForm({\n      path: `${DOMAIN_STATE_NAME}.forms.cookADish`,\n      value: {\n        name: `${recipe.name} ${DateTime.now().toFormat(\"dd.MM\")}`,\n        ingredients: formIngredients,\n        cookedWeight: recipe.consistOf\n          ?.map(i => i.ingredientWeight)\n          .reduce((w1, w2) => w1 + w2, 0) || 0\n      }\n    }));\n  }\n\n  @Action(CookADishAddIngredient)\n  handleCookADishAddIngredient(ctx: StateContext<IDomainState>, action: CookADishAddIngredient) {\n    ctx.dispatch(new UpdateFormValue({\n      path: `${DOMAIN_STATE_NAME}.forms.cookADish`,\n      propertyPath: `ingredients.${ctx.getState().forms.cookADish?.model?.ingredients?.length || 0}`,\n      value: action.ingredient\n    }));\n  }\n\n  @Action(CookADishRemoveIngredient)\n  handleCookADishRemoveIngredient(ctx: StateContext<IDomainState>, action: CookADishRemoveIngredient) {\n    const ingredients = ctx.getState().forms.cookADish?.model?.ingredients;\n    const idx = action.idx;\n    if (ingredients == null || ingredients.length <= 0 || idx >= ingredients.length) {\n      return;\n    }\n\n\n    ctx.dispatch(new UpdateFormValue({\n      path: `${DOMAIN_STATE_NAME}.forms.cookADish`,\n      propertyPath: 'ingredients',\n      value: [\n        ...ingredients?.slice(0, idx),\n        ...ingredients?.slice(idx + 1, ingredients?.length)\n      ]\n    }));\n  }\n\n  @Action(CreateFoodAction)\n  handleCreateFoodAction(ctx: StateContext<IDomainState>, action: CreateFoodAction) {\n    return this.service.addFood(action.food).pipe(\n      map(food => new FoodCreatedEvent(food)),\n      catchError(err => of(new CreateFoodFailedEvent(err.message))),\n      map(ctx.dispatch)\n    )\n  }\n\n  @Action(FoodCreatedEvent)\n  handleFoodCreatedEvent(ctx: StateContext<IDomainState>, action: FoodCreatedEvent) {\n    ctx.patchState({\n      foods: [\n        ...ctx.getState().foods,\n        action.food\n      ]\n    })\n  }\n\n  @Action(CreateFoodFailedEvent)\n  handleCreateFoodFailedEvent(ctx: StateContext<IDomainState>, action: CreateFoodFailedEvent) {\n    console.warn(action.msg);\n  }\n}\n","import {IPfcc} from \"../../commons/models/common.models\";\nimport {IFood} from \"../../commons/models/domain.models\";\nimport {IFormState} from \"./form.commons\";\nimport {FormControlStatus, ValidationErrors} from \"@angular/forms\";\n\nexport interface IAddFoodFormState extends IFormState<IAddFoodFormModel> {\n}\n\nexport interface FoodFormIngredient {\n  ingredient: IFood;\n  weight: number;\n  index: number;\n}\n\nexport interface IAddFoodFormModel {\n  name: string | null;\n  description: string | null;\n  pfcc: IPfcc;\n  ingredients: FoodFormIngredient[];\n}\n\nexport class AddFoodFormResetAction {\n  static readonly type = '[ADD FOOD] Reset form';\n}\n\nexport class AddFoodFormValueChangedEvent {\n  static readonly type = '[ADD FOOD] Form value changed';\n\n  constructor(public readonly data: IAddFoodFormModel) {\n  }\n}\n\nexport class AddFoodFormStatusChangedEvent {\n  static readonly type = '[ADD FOOD] Form status changed';\n\n  constructor(public readonly status: FormControlStatus,\n              public readonly errors: ValidationErrors | null = null) {\n  }\n}\n\nexport class AddFoodPfccRecalculatedEvent {\n  static readonly type = '[DOMAIN] Add food - pfcc recalculated';\n\n  constructor(public readonly pfcc: IPfcc) {\n  }\n}\n\nexport class AddFoodIngredientsCleanedUpEvent {\n  static readonly type = '[DOMAIN] Add food - ingredients cleaned up';\n\n  constructor() {\n  }\n}\n","import {Action, Selector, State, StateContext} from \"@ngxs/store\";\nimport {\n  AddFoodFormResetAction,\n  AddFoodFormStatusChangedEvent,\n  AddFoodFormValueChangedEvent,\n  AddFoodIngredientsCleanedUpEvent,\n  AddFoodPfccRecalculatedEvent, FoodFormIngredient,\n  IAddFoodFormModel,\n  IAddFoodFormState\n} from \"./add-food-form.state-models\";\nimport {Injectable} from \"@angular/core\";\n\nexport const ADD_FOOD_FORM_STATE_NAME = 'addFoodForm';\n\nconst DEFAULTS: IAddFoodFormState = {\n  model: {\n    pfcc: {\n      protein: 0,\n      fat: 0,\n      carbohydrates: 0,\n      calories: 0\n    },\n    name: null,\n    description: null,\n    ingredients: []\n  },\n  dirty: false,\n  status: 'PENDING',\n  errors: null\n};\n\n@State<IAddFoodFormState>({\n  name: ADD_FOOD_FORM_STATE_NAME,\n  defaults: DEFAULTS\n})\n@Injectable()\nexport class AddFoodFormState {\n\n  @Selector()\n  static model(state: IAddFoodFormState): IAddFoodFormModel | undefined {\n    return state.model;\n  }\n\n  @Selector()\n  static ingredients(state: IAddFoodFormState): FoodFormIngredient[] {\n    return state.model.ingredients;\n  }\n\n  @Action(AddFoodFormValueChangedEvent)\n  handleAddFoodFormValueChangedEvent(ctx: StateContext<IAddFoodFormState>, action: AddFoodFormValueChangedEvent) {\n    ctx.patchState({\n      model: action.data\n    });\n  }\n\n  @Action(AddFoodFormStatusChangedEvent)\n  handleAddFoodFormStatusChangedEvent(ctx: StateContext<IAddFoodFormState>, action: AddFoodFormStatusChangedEvent) {\n    ctx.patchState({\n      status: action.status,\n      errors: action.errors\n    });\n  }\n\n  @Action(AddFoodFormResetAction)\n  handleAddFoodFormResetAction(ctx: StateContext<IAddFoodFormState>, action: AddFoodFormResetAction) {\n    ctx.setState(DEFAULTS);\n  }\n\n  @Action(AddFoodPfccRecalculatedEvent)\n  handleAddFoodPfccRecalculatedEvent(ctx: StateContext<IAddFoodFormState>, action: AddFoodPfccRecalculatedEvent): void {\n    ctx.patchState({\n      model: {\n        ...ctx.getState().model,\n        pfcc: action.pfcc\n      }\n    });\n  }\n\n  @Action(AddFoodIngredientsCleanedUpEvent)\n  handleAddFoodIngredientsChangedEvent(ctx: StateContext<IAddFoodFormState>, action: AddFoodIngredientsCleanedUpEvent): void {\n    ctx.patchState({\n      model: {\n        ...ctx.getState().model,\n        ingredients: []\n      }\n    })\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import {enableProdMode} from '@angular/core';\nimport {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n\nimport {AppModule} from './app/app.module';\nimport {environment} from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":["RouterModule","IsAuthenticatedGuard","ProfileConfiguredGuard","fromRoutes","IsNotAuthenticatedGuard","routes","path","dashboard","loadComponent","then","mod","DashboardPageComponent","canActivate","signIn","SignInPageComponent","signUp","SignUpPageComponent","completeProfile","ConfigureProfileComponent","redirectTo","AppRoutingModule","forRoot","imports","exports","AuthState","filter","AppComponent","constructor","translateService","store","select","language","pipe","lang","subscribe","use","setDefaultLang","DEFAULT_LANGUAGE","selectors","decls","vars","template","i0","BrowserModule","BrowserAnimationsModule","NgxsReduxDevtoolsPluginModule","environment","NgxsRouterPluginModule","NgxsLoggerPluginModule","NgxsModule","DomainState","HttpClient","HttpClientModule","TranslateLoader","TranslateModule","TranslateHttpLoader","HeadingComponent","NgxsFormPluginModule","AddFoodFormState","HttpLoaderFactory","http","AppModule","bootstrap","developmentMode","production","disabled","defaultLanguage","loader","provide","useFactory","deps","declarations","DateTime","FormGroup","sumUndefined","n1","n2","isValueAbsent","undefined","isDefined","Error","isToday","date","set","atStartOfDay","equals","now","isOnCurrentWeek","atStartOfWeek","hour","minute","second","millisecond","weekday","value","sumPfccs","pfccs","reduce","m1","m2","protein","fat","carbohydrates","calories","ceilPfcc","pfcc","afterDotSigns","caloriesAfterDotSign","ceil","multiplyPfcc","multiplier","Math","pow","sum","v1","v2","pfccFormGroupIsNotEmpty","control","proteinControl","get","fatControl","carbohydratesControl","caloriesControl","pfccIsZero","emptyPfcc","UnknownBoolean","and","other","UNKNOWN","FALSE","TRUE","or","not","of","CommonModule","MatFormFieldModule","MatIconModule","MatSelectModule","LanguageChangedEvent","take","handleLangChanged","selection","dispatch","ngAfterViewInit","langSelector","writeValue","viewQuery","ctx","styles","changeDetection","map","tap","Navigate","route","state","isAuthenticated","factory","providedIn","isNotAuthenticated","LocalStoreService","loadJwtToken","localStorage","getItem","JWT_KEY","saveJwtToken","token","setItem","dropJwtToken","removeItem","profileConfigured","isProfileConfigured","throwError","ProfileService","aims","base","foods","id","type","name","isCookable","consistOf","hidden","ownedByUser","ingredientWeight","dishes","cookedOn","foodId","recipeWeight","cookedWeight","ingredients","deleted","meals","cooked","dishId","eatenOn","weight","account","email","preferredLanguage","password","mockProfile","getProfile","includes","configureProfile","removeMeal","mealId","addMeal","meal","random","addDish","dish","i","deleteDish","addFood","food","AuthSignInAction","AuthSignInSucceededEvent","AuthSignInFailedEvent","msg","AuthLogOutAction","AuthSignUpAction","AuthSignUpSucceededEvent","AuthSignUpFailedEvent","Action","Selector","State","catchError","mergeMap","ProfileConfiguredSuccessfullyEvent","ProfileLoadedEvent","profileService","localStoreService","loggedIn","ngxsOnInit","patchState","profile","handleAuthLogOutAction","action","rsp","err","message","signInSucceeded","handleSignInFailed","console","warn","handleSignUpSuccess","handleSignUpFailed","handleProfileConfigured","getState","handleProfileLoadedEvent","handleLanguageChangedEvent","__decorate","defaults","AuthState_1","ConfigureProfileAction","ProfileConfigurationFailedEvent","RemoveMealAction","MealRemovedSuccessfullyEvent","MealRemovingFailedEvent","DeleteDishAction","DishDeletedEvent","DishDeletionFailedEvent","AddMealAction","MealAddedSuccessfullyEvent","MealAddingFailedEvent","InitiateCookADishForm","recipeId","CookADishAddIngredient","ingredient","CookADishRemoveIngredient","idx","CreateDishAction","DishCreatedEvent","DishCreationFailedEvent","CreateFoodAction","FoodCreatedEvent","CreateFoodFailedEvent","ResetForm","UpdateFormValue","DOMAIN_STATE_NAME","service","result","Map","forEach","f","d","eaten","m","push","forms","cookADish","model","handleSuccessfulSignIn","handleDeleteDishAction","_","handleDishDeletedEvent","handleDishDeletionFailedEvent","handleProfileConfiguredSuccessfullyEvent","handleProfileConfiguringFailed","handleRemoveMealAction","handleMealRemovedEvent","handleMealRemovingFailed","error","handleCreateDishAction","handleDishCreationFailedEvent","log","handleDishCreatedEvent","handleAddMealAction","handleMealAddedSuccessfullyEvent","handleMealAddingFailedEvent","handleInitiateCookADishForm","recipe","find","formIngredients","index","toFormat","w1","w2","handleCookADishAddIngredient","propertyPath","length","handleCookADishRemoveIngredient","slice","handleCreateFoodAction","handleFoodCreatedEvent","handleCreateFoodFailedEvent","dirty","status","errors","AddFoodFormResetAction","AddFoodFormValueChangedEvent","data","AddFoodFormStatusChangedEvent","AddFoodPfccRecalculatedEvent","AddFoodIngredientsCleanedUpEvent","ADD_FOOD_FORM_STATE_NAME","DEFAULTS","description","handleAddFoodFormValueChangedEvent","handleAddFoodFormStatusChangedEvent","handleAddFoodFormResetAction","setState","handleAddFoodPfccRecalculatedEvent","handleAddFoodIngredientsChangedEvent","enableProdMode","__NgCli_bootstrap_1","bootstrapModule","catch"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}