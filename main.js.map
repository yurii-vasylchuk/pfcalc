{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/commons/functions.ts","./src/app/commons/models/common.models.ts","./src/app/commons/routes.ts","./src/app/components/heading/heading.component.ts","./src/app/components/heading/heading.component.html","./src/app/components/menu/menu.component.ts","./src/app/components/menu/menu.component.html","./src/app/service/guards.ts","./src/app/service/local-store.service.ts","./src/app/service/profile.service.ts","./src/app/state/auth/auth.state-models.ts","./src/app/state/auth/auth.state.ts","./src/app/state/domain/domain.state-models.ts","./src/app/state/domain/domain.state.ts","./src/app/state/form/add-food-form.state-models.ts","./src/app/state/form/add-food-form.state.ts","./src/app/state/ui/ui.state-model.ts","./src/app/state/ui/ui.state.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport * as fromRoutes from './commons/routes';\nimport {\n  isAuthenticatedGuardFn,\n  isNotAuthenticatedGuardFn,\n  profileConfiguredGuardFn\n} from \"./service/guards\";\n\nconst routes: Routes = [\n  {\n    path: fromRoutes.dashboard,\n    loadComponent: () => import('./pages/dashboard-page/dashboard-page.component').then(mod => mod.DashboardPageComponent),\n    canActivate: [isAuthenticatedGuardFn, profileConfiguredGuardFn],\n  },\n  {\n    path: fromRoutes.signIn,\n    loadComponent: () => import('./pages/sign-in-page/sign-in-page.component').then(mod => mod.SignInPageComponent),\n    canActivate: [isNotAuthenticatedGuardFn],\n  },\n  {\n    path: fromRoutes.signUp,\n    loadComponent: () => import('./pages/sign-up-page/sign-up-page.component').then(mod => mod.SignUpPageComponent),\n    canActivate: [isNotAuthenticatedGuardFn],\n  },\n  {\n    path: fromRoutes.completeProfile,\n    loadComponent: () => import('./pages/configure-profile/configure-profile.component').then(mod => mod.ConfigureProfileComponent),\n    canActivate: [isAuthenticatedGuardFn],\n  },\n  {\n    path: fromRoutes.foodsManagement,\n    loadComponent: () => import('./pages/foods-management-page/foods-management-page.component').then(mod => mod.FoodsManagementPageComponent),\n    canActivate: [isAuthenticatedGuardFn, profileConfiguredGuardFn]\n  },\n  {\n    path: '**',\n    redirectTo: `/${fromRoutes.dashboard}`,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {\n}\n","import {Component} from '@angular/core';\nimport {TranslateService} from '@ngx-translate/core';\nimport {Store} from '@ngxs/store';\nimport {AuthState} from './state/auth/auth.state';\nimport {filter} from 'rxjs';\nimport {UiState} from \"./state/ui/ui.state\";\nimport {ToggleMenuAction} from \"./state/ui/ui.state-model\";\n\n@Component({\n  selector: 'pfc-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent {\n  protected menuOpened = this.store.select(UiState.sideMenuOpened);\n\n  constructor(private translateService: TranslateService, private store: Store) {\n    store.select(AuthState.language)\n      .pipe(\n        filter(lang => lang != null)\n      )\n      .subscribe(lang => translateService.use(lang));\n\n    translateService.setDefaultLang(AuthState.DEFAULT_LANGUAGE);\n  }\n\n  handleMenuClosed() {\n    this.store.dispatch(new ToggleMenuAction(false));\n  }\n}\n","<mat-drawer-container autosize\n                      hasBackdrop=\"true\"\n                      class=\"container\">\n  <mat-drawer [opened]=\"(menuOpened | async) || false\"\n              (closedStart)=\"handleMenuClosed()\"\n              mode=\"over\"\n              class=\"menu-container\">\n    <pfc-menu></pfc-menu>\n  </mat-drawer>\n  <mat-drawer-content class=\"content\">\n    <pfc-heading></pfc-heading>\n    <router-outlet></router-outlet>\n  </mat-drawer-content>\n</mat-drawer-container>\n","import {NgModule} from '@angular/core';\nimport {BrowserModule} from '@angular/platform-browser';\n\nimport {AppRoutingModule} from './app-routing.module';\nimport {AppComponent} from './app.component';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {NgxsReduxDevtoolsPluginModule} from '@ngxs/devtools-plugin';\nimport {environment} from '../environments/environment';\nimport {NgxsRouterPluginModule} from '@ngxs/router-plugin';\nimport {NgxsLoggerPluginModule} from '@ngxs/logger-plugin';\nimport {NgxsModule} from '@ngxs/store';\nimport {AuthState} from './state/auth/auth.state';\nimport {DomainState} from './state/domain/domain.state';\nimport {HttpClient, HttpClientModule} from '@angular/common/http';\nimport {TranslateLoader, TranslateModule} from '@ngx-translate/core';\nimport {TranslateHttpLoader} from '@ngx-translate/http-loader';\nimport {HeadingComponent} from \"./components/heading/heading.component\";\nimport {NgxsFormPluginModule} from \"@ngxs/form-plugin\";\nimport {AddFoodFormState} from \"./state/form/add-food-form.state\";\nimport {UiState} from \"./state/ui/ui.state\";\nimport {MatSidenavModule} from \"@angular/material/sidenav\";\nimport {MenuComponent} from \"./components/menu/menu.component\";\n\nexport function HttpLoaderFactory(http: HttpClient) {\n  return new TranslateHttpLoader(http, './assets/i18n/');\n}\n\n@NgModule({\n  declarations: [\n    AppComponent,\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    BrowserAnimationsModule,\n    NgxsModule.forRoot([AuthState, DomainState, AddFoodFormState, UiState],\n      {developmentMode: !environment.production}),\n    NgxsRouterPluginModule.forRoot(),\n    NgxsLoggerPluginModule.forRoot({\n      disabled: environment.production,\n    }),\n    NgxsFormPluginModule.forRoot(),\n    TranslateModule.forRoot({\n      defaultLanguage: 'ua',\n      loader: {\n        provide: TranslateLoader,\n        useFactory: HttpLoaderFactory,\n        deps: [HttpClient],\n      },\n    }),\n\n    NgxsReduxDevtoolsPluginModule.forRoot({\n      disabled: environment.production,\n    }),\n    HeadingComponent,\n    MatSidenavModule,\n    MenuComponent,\n  ],\n  providers: [],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {\n}\n","import {DateObjectUnits, DateTime} from 'luxon';\nimport {IPfcc} from './models/common.models';\nimport {FormGroup, ValidatorFn} from \"@angular/forms\";\n\nexport function sumUndefined(n1: number | null | undefined,\n                             n2: number | null | undefined): number | undefined {\n  if (isValueAbsent(n1) && isValueAbsent(n2)) {\n    return undefined;\n  } else if (isValueAbsent(n1) && isDefined(n2)) {\n    return n2;\n  } else if (isValueAbsent(n2) && isDefined(n1)) {\n    return n1;\n  } else if (isDefined(n1) && isDefined(n2)) {\n    return n1 + n2;\n  }\n\n  throw new Error('Illegal state');\n}\n\nexport function isToday(date: DateTime): boolean {\n  return date.set(atStartOfDay)\n    .equals(DateTime.now().set(atStartOfDay));\n}\n\nexport function isOnCurrentWeek(date: DateTime): boolean {\n  return date.set(atStartOfWeek)\n    .equals((DateTime.now().set(atStartOfWeek)));\n}\n\nconst atStartOfDay: DateObjectUnits = {hour: 0, minute: 0, second: 0, millisecond: 0};\nconst atStartOfWeek: DateObjectUnits = {hour: 0, minute: 0, second: 0, millisecond: 0, weekday: 1};\n\nfunction isDefined<T>(value: T | null | undefined): value is T {\n  return value != null;\n}\n\nfunction isValueAbsent<T>(value: T | null | undefined): value is null | undefined {\n  return !isDefined(value);\n}\n\nexport function sumPfccs(...pfccs: IPfcc[]) {\n  return pfccs\n    .reduce((m1, m2) => {\n      return {\n        protein: (m1.protein || 0) + (m2.protein || 0),\n        fat: (m1.fat || 0) + (m2.fat || 0),\n        carbohydrates: (m1.carbohydrates || 0) + (m2.carbohydrates || 0),\n        calories: (m1.calories || 0) + (m2.calories || 0),\n      };\n    }, {} as IPfcc);\n}\n\nexport function ceilPfcc(pfcc: IPfcc, afterDotSigns = 2, caloriesAfterDotSign = 0): IPfcc {\n  return {\n    protein: pfcc.protein != null ? ceil(pfcc.protein, afterDotSigns) : null,\n    fat: pfcc.fat != null ? ceil(pfcc.fat, afterDotSigns) : null,\n    carbohydrates: pfcc.carbohydrates != null ? ceil(pfcc.carbohydrates, afterDotSigns) : null,\n    calories: pfcc.calories != null ? ceil(pfcc.calories, caloriesAfterDotSign) : null,\n  };\n}\n\nexport function multiplyPfcc(pfcc: IPfcc, multiplier: number): IPfcc {\n  return {\n    protein: pfcc.protein != null ? (pfcc.protein * multiplier) : null,\n    fat: pfcc.fat != null ? (pfcc.fat * multiplier) : null,\n    carbohydrates: pfcc.carbohydrates != null ? (pfcc.carbohydrates * multiplier) : null,\n    calories: pfcc.calories != null ? (pfcc.calories * multiplier) : null,\n  };\n}\n\nexport function ceil(value: number, afterDotSigns = 2): number {\n  const multiplier = Math.pow(10, afterDotSigns);\n\n  return Math.ceil(value * multiplier) / multiplier;\n}\n\nexport function sum(v1: number, v2: number): number {\n  return v1 + v2;\n}\n\nexport const pfccFormGroupIsNotEmpty: ValidatorFn = control => {\n  if (!(control instanceof FormGroup)\n  ) {\n    throw new Error('This validator can be applied only to FormGroup');\n  }\n\n  const proteinControl = control.get('protein');\n  const fatControl = control.get('fat');\n  const carbohydratesControl = control.get('carbohydrates');\n  const caloriesControl = control.get('calories');\n\n  if (proteinControl == null || fatControl == null || carbohydratesControl == null || caloriesControl == null) {\n    throw new Error('This validator can be applied only to FormGroup containing \"protein\", \"fat\", \"carbohydrates\" and \"calories\" FormControl-s');\n  }\n\n  const protein = proteinControl.value;\n  const fat = fatControl.value;\n  const carbohydrates = carbohydratesControl.value;\n  const calories = caloriesControl.value;\n\n  if(protein != null && typeof protein !== 'number') {\n    throw Error('Protein control value is not a number');\n  }\n  if(fat != null && typeof fat !== 'number') {\n    throw Error('Fat control value is not a number');\n  }\n  if(carbohydrates != null && typeof carbohydrates !== 'number') {\n    throw Error('Carbohydrates control value is not a number');\n  }\n  if(calories != null && typeof calories !== 'number') {\n    throw Error('Calories control value is not a number');\n  }\n\n  if (protein + fat + carbohydrates + calories === 0) {\n    return {\n      pfccIsZero: 'PFCC all zeroes'\n    };\n  }\n\n  return null;\n};\n","export interface IApiError {\n  message: string;\n}\n\nexport interface IPfcc {\n  protein: number | null;\n  fat: number | null;\n  carbohydrates: number | null;\n  calories: number | null;\n}\n\nexport const emptyPfcc: IPfcc = {\n  protein: 0,\n  fat: 0,\n  carbohydrates: 0,\n  calories: 0,\n};\n\nexport class UnknownBoolean {\n  static readonly TRUE = new UnknownBoolean('TRUE');\n  static readonly FALSE = new UnknownBoolean('FALSE');\n  static readonly UNKNOWN = new UnknownBoolean('UNKNOWN');\n\n  private constructor(public readonly value: string) {\n  }\n\n  public and(other: UnknownBoolean): UnknownBoolean {\n    if (this == UnknownBoolean.UNKNOWN || other == UnknownBoolean.UNKNOWN) {\n      return UnknownBoolean.UNKNOWN;\n    } else if (this == UnknownBoolean.FALSE || other == UnknownBoolean.FALSE) {\n      return UnknownBoolean.FALSE;\n    } else {\n      return UnknownBoolean.TRUE;\n    }\n  }\n\n  public or(other: UnknownBoolean): UnknownBoolean {\n    if (this == UnknownBoolean.UNKNOWN || other == UnknownBoolean.UNKNOWN) {\n      return UnknownBoolean.UNKNOWN;\n    } else if (this == UnknownBoolean.FALSE && other == UnknownBoolean.FALSE) {\n      return UnknownBoolean.FALSE;\n    } else {\n      return UnknownBoolean.TRUE;\n    }\n  }\n\n  public not(): UnknownBoolean {\n    if (this == UnknownBoolean.UNKNOWN) {\n      return UnknownBoolean.UNKNOWN;\n    } else if (this == UnknownBoolean.TRUE) {\n      return UnknownBoolean.FALSE;\n    } else {\n      return UnknownBoolean.TRUE;\n    }\n  }\n\n  public get isTrue(): boolean {\n    return this === UnknownBoolean.TRUE;\n  }\n\n  public get isFalse(): boolean {\n    return this === UnknownBoolean.FALSE;\n  }\n\n  static of(value: boolean) {\n    return value ? UnknownBoolean.TRUE : UnknownBoolean.FALSE;\n  }\n}\n","export const dashboard = 'dashboard';\nexport const signIn = 'signin';\nexport const signUp = 'signup';\nexport const completeProfile = 'complete-profile';\nexport const foodsManagement = 'foods';\n","import {AfterViewInit, ChangeDetectionStrategy, Component, ViewChild} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {MatFormFieldModule} from \"@angular/material/form-field\";\nimport {MatIconModule} from \"@angular/material/icon\";\nimport {MatSelect, MatSelectChange, MatSelectModule} from \"@angular/material/select\";\nimport {Store} from \"@ngxs/store\";\nimport {Language} from \"../../commons/models/auth.models\";\nimport {LanguageChangedEvent} from \"../../state/auth/auth.state-models\";\nimport {AuthState} from \"../../state/auth/auth.state\";\nimport {take} from \"rxjs\";\nimport {MatButtonModule} from \"@angular/material/button\";\nimport {ToggleMenuAction} from \"../../state/ui/ui.state-model\";\n\n@Component({\n  selector: 'pfc-heading',\n  standalone: true,\n  imports: [CommonModule, MatFormFieldModule, MatIconModule, MatSelectModule, MatButtonModule],\n  templateUrl: './heading.component.html',\n  styleUrls: ['./heading.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class HeadingComponent implements AfterViewInit {\n  //TODO: Auto-infer\n  protected availableLanguages: Language[] = ['ua', 'en'];\n  protected isAuthenticated = this.store.select(AuthState.isAuthenticated);\n\n  @ViewChild(\"langSelector\")\n  private langSelector!: MatSelect;\n\n  constructor(private store: Store) {\n  }\n\n  handleLangChanged(selection: MatSelectChange) {\n    this.store.dispatch(new LanguageChangedEvent(selection.value));\n  }\n\n  ngAfterViewInit(): void {\n    this.store.select(AuthState.language)\n      .pipe(take(1))\n      .subscribe(value => {\n        this.langSelector.writeValue(value);\n      });\n  }\n\n  handleMenuClicked() {\n    this.store.dispatch(new ToggleMenuAction())\n  }\n}\n","<button *ngIf=\"(isAuthenticated | async)?.isTrue\"\n        (click)=\"handleMenuClicked()\"\n        mat-icon-button color=\"primary\">\n  <mat-icon>menu</mat-icon>\n</button>\n<div class=\"flex-spacer\"></div>\n<mat-form-field appearance=\"outline\" class=\"lang-select mat-form-field-no-bottom\">\n  <mat-label>\n    <mat-icon fontIcon=\"public\"></mat-icon>\n  </mat-label>\n  <mat-select (selectionChange)=\"handleLangChanged($event)\" #langSelector>\n    <mat-option *ngFor=\"let lang of availableLanguages\" [value]=\"lang\">{{lang}}</mat-option>\n  </mat-select>\n</mat-form-field>\n","import {ChangeDetectionStrategy, Component} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {MatListModule} from \"@angular/material/list\";\nimport {MatIconModule} from \"@angular/material/icon\";\nimport {TranslateModule} from \"@ngx-translate/core\";\nimport {MatButtonModule} from \"@angular/material/button\";\nimport {Navigate} from \"@ngxs/router-plugin\";\nimport {Store} from \"@ngxs/store\";\nimport {ToggleMenuAction} from \"../../state/ui/ui.state-model\";\n\n@Component({\n  selector: 'pfc-menu',\n  standalone: true,\n  imports: [CommonModule, MatListModule, MatIconModule, TranslateModule, MatButtonModule],\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MenuComponent {\n\n  constructor(private store: Store) {\n  }\n\n  handleRouteClick(url: string) {\n    this.store.dispatch([new Navigate([url]), new ToggleMenuAction(false)]);\n  }\n}\n","<h1 class=\"menu-title\">{{'side-menu.title' | translate}}</h1>\n\n<mat-action-list class=\"pages\">\n  <mat-list-item (click)=\"handleRouteClick('/dashboard')\">\n    <span matListItemTitle>{{'side-menu.dashboard' | translate}}</span>\n  </mat-list-item>\n\n  <mat-list-item (click)=\"handleRouteClick('/foods')\">\n    <span matListItemTitle>{{'side-menu.foods-management' | translate}}</span>\n  </mat-list-item>\n\n</mat-action-list>\n","import {inject} from '@angular/core';\nimport {CanActivateFn} from '@angular/router';\nimport {filter, map, Observable, tap} from 'rxjs';\nimport {Store} from '@ngxs/store';\nimport {AuthState} from '../state/auth/auth.state';\nimport {Navigate} from '@ngxs/router-plugin';\nimport * as fromRoutes from '../commons/routes';\nimport {UnknownBoolean} from '../commons/models/common.models';\n\nexport const isAuthenticatedGuardFn: CanActivateFn = (): Observable<boolean> => {\n  const store = inject(Store);\n  return store.select(AuthState.isAuthenticated)\n    .pipe(\n      filter(isAuthenticated => isAuthenticated !== UnknownBoolean.UNKNOWN),\n      map(value => value === UnknownBoolean.TRUE),\n      tap(isAuthenticated => {\n        if (!isAuthenticated) {\n          store.dispatch(new Navigate([`/${fromRoutes.signIn}`]));\n        }\n      }),\n    );\n}\nexport const isNotAuthenticatedGuardFn: CanActivateFn = (): Observable<boolean> => {\n  const store = inject(Store);\n  return store.select(AuthState.isAuthenticated)\n    .pipe(\n      filter(isAuthenticated => isAuthenticated !== UnknownBoolean.UNKNOWN),\n      map(value => value === UnknownBoolean.FALSE),\n      tap(isNotAuthenticated => {\n        if (!isNotAuthenticated) {\n          store.dispatch(new Navigate([`/${fromRoutes.dashboard}`]));\n        }\n      }),\n    );\n}\nexport const profileConfiguredGuardFn: CanActivateFn = (): Observable<boolean> => {\n  const store = inject(Store);\n  return store.select(AuthState.profileConfigured)\n    .pipe(\n      filter(value => value !== UnknownBoolean.UNKNOWN),\n      map(value => value === UnknownBoolean.TRUE),\n      tap(isProfileConfigured => {\n        if (!isProfileConfigured) {\n          store.dispatch(new Navigate([`/${fromRoutes.completeProfile}`]));\n        }\n      }),\n    );\n\n}\n","import {Injectable} from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LocalStoreService {\n  private readonly JWT_KEY = 'jwt';\n\n  constructor() {\n  }\n\n  loadJwtToken(): string | null {\n    return localStorage.getItem(this.JWT_KEY);\n  }\n\n  saveJwtToken(token: string) {\n    localStorage.setItem(this.JWT_KEY, token);\n  }\n\n  dropJwtToken() {\n    localStorage.removeItem(this.JWT_KEY);\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable, of, throwError} from 'rxjs';\nimport {ISignInResponse, ISignUpResponse} from '../commons/models/auth.models';\nimport {ICreateDishResponse, IDishToCreate, IFood, IMeal, IProfileResponse} from '../commons/models/domain.models';\nimport {DateTime} from 'luxon';\nimport {IPfcc} from '../commons/models/common.models';\nimport {sum} from \"../commons/functions\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProfileService {\n\n  constructor(private http: HttpClient) {\n  }\n\n  signIn(email: string, password: string): Observable<ISignInResponse> {\n    if (email === 'error') {\n      return throwError(() => new Error('Sign in failed'));\n    }\n\n    return of({\n      token: 'test-token',\n      ...this.mockProfile(),\n    });\n  }\n\n  getProfile(): Observable<IProfileResponse> {\n    return of({...this.mockProfile()});\n  }\n\n  signUp(email: string, password: string): Observable<ISignUpResponse> {\n    if (email.includes('error')) {\n      return throwError(() => new Error('Sign up failed'));\n    }\n\n    return of({\n      token: 'test-token',\n    });\n  }\n\n  configureProfile(aims: IPfcc): Observable<null> {\n    return of(null);\n  }\n\n  removeMeal(mealId: number): Observable<null> {\n    return of(null);\n  }\n\n  addMeal(meal: IMeal): Observable<{ meal: IMeal }> {\n    return of({\n      meal: {\n        ...meal,\n        id: meal.id != null ? meal.id : (Math.ceil(Math.random() * 10000))\n      }\n    });\n  }\n\n  addDish(dish: IDishToCreate): Observable<ICreateDishResponse> {\n    return of({\n      dish: {\n        id: Math.ceil(Math.random() * 10000),\n        cookedOn: dish.cookedOn,\n        pfcc: {\n          protein: 20 + Math.ceil(Math.random() * 40),\n          carbohydrates: 40 + Math.ceil(Math.random() * 50),\n          fat: 5 + Math.ceil(Math.random() * 15),\n          calories: 100 + Math.ceil(Math.random() * 900),\n        },\n        name: dish.name,\n        foodId: dish.foodId,\n        ingredients: dish.ingredients,\n        recipeWeight: dish.ingredients?.map(i => i.ingredientWeight).reduce(sum, 0),\n        cookedWeight: dish.cookedWeight,\n        deleted: false\n      }\n    });\n  }\n\n  private readonly mockProfile: () => IProfileResponse = () => {\n    return {\n      aims: {\n        protein: 120,\n        fat: 50,\n        carbohydrates: 180,\n        calories: null,\n      },\n\n      foods: [\n        {\n          id: 1,\n          type: 'ingredient',\n          name: 'СВ Задняя часть',\n          isCookable: true,\n          consistOf: null,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 21,\n            fat: 9.6,\n            carbohydrates: 0,\n            calories: 176,\n          },\n        },\n        {\n          id: 2,\n          type: 'ingredient',\n          name: 'СВ Корейка',\n          isCookable: true,\n          consistOf: null,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 20.50,\n            fat: 5.4,\n            carbohydrates: 0,\n            calories: 136,\n          },\n        },\n        {\n          id: 3,\n          type: 'ingredient',\n          name: 'СВ Лопатка',\n          isCookable: true,\n          consistOf: null,\n          hidden: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 16.7,\n            fat: 20,\n            carbohydrates: 0,\n            calories: 253,\n          },\n        },\n        {\n          id: 4,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'СВ Шея',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 16.1,\n            fat: 22.8,\n            carbohydrates: 0,\n            calories: 267,\n          },\n        },\n        {\n          id: 5,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'КУР Бедро б.к.',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 25.7,\n            fat: 10.7,\n            carbohydrates: 0,\n            calories: 207,\n          },\n        },\n        {\n          id: 6,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'КУР Филе',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 23,\n            fat: 1.2,\n            carbohydrates: 0,\n            calories: 110,\n          },\n        },\n        {\n          id: 7,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'ГОВ Лопатка',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 20.5,\n            fat: 6.2,\n            carbohydrates: 0,\n            calories: 144,\n          },\n        },\n        {\n          id: 8,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'ГОВ Вырезка',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 20.7,\n            fat: 8.8,\n            carbohydrates: 0,\n            calories: 169,\n          },\n        },\n        {\n          id: 9,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Пельмени ГБ свинные',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 14,\n            fat: 11.5,\n            carbohydrates: 29,\n            calories: 272,\n          },\n        },\n        {\n          id: 10,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Пельмени ГБ с/г',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 13,\n            fat: 11.2,\n            carbohydrates: 28.3,\n            calories: 262,\n          },\n        },\n        {\n          id: 11,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Пельмени ГБ 3 мяса',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 13,\n            fat: 11.2,\n            carbohydrates: 28.3,\n            calories: 262,\n          },\n        },\n        {\n          id: 12,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Гречка',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 13.2,\n            fat: 3.4,\n            carbohydrates: 71.5,\n            calories: 343,\n          },\n        },\n        {\n          id: 13,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Рис/Макароны',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 7,\n            fat: 0.6,\n            carbohydrates: 77.3,\n            calories: 323,\n          },\n        },\n        {\n          id: 14,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Булгур',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 12.3,\n            fat: 1.3,\n            carbohydrates: 75.8,\n            calories: 342,\n          },\n        },\n        {\n          id: 15,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Горох',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 23,\n            fat: 1.2,\n            carbohydrates: 53.3,\n            calories: 303,\n          },\n        },\n        {\n          id: 16,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Нут',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 19.3,\n            fat: 6,\n            carbohydrates: 60.6,\n            calories: 364,\n          },\n        },\n        {\n          id: 17,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Яйцо',\n          isCookable: false,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 6.3,\n            fat: 5,\n            carbohydrates: 0,\n            calories: 74,\n          },\n        },\n        {\n          id: 18,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Полента',\n          isCookable: true,\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 7.2,\n            fat: 1.5,\n            carbohydrates: 72.1,\n            calories: 331,\n          },\n        },\n        {\n          id: 19,\n          type: 'ingredient',\n          consistOf: null,\n          isCookable: false,\n          name: 'Моцарелла',\n          hidden: true,\n          ownedByUser: false,\n          pfcc: {\n            protein: 19,\n            fat: 1,\n            carbohydrates: 18.5,\n            calories: 246,\n          },\n        },\n        {\n          id: 20,\n          type: 'ingredient',\n          consistOf: null,\n          name: 'Протеин',\n          hidden: true,\n          isCookable: false,\n          ownedByUser: false,\n          pfcc: {\n            protein: 80,\n            fat: 0,\n            carbohydrates: 0,\n            calories: 433,\n          },\n        },\n        {\n          id: 21,\n          type: 'recipe',\n          consistOf: [\n            {\n              id: 13,\n              type: 'ingredient',\n              consistOf: null,\n              name: 'Рис/Макароны',\n              isCookable: true,\n              hidden: true,\n              ownedByUser: false,\n              ingredientWeight: 200,\n              pfcc: {\n                protein: 14,\n                fat: 1.2,\n                carbohydrates: 154.6,\n                calories: 646,\n              },\n            },\n            {\n              id: 17,\n              type: 'ingredient',\n              consistOf: null,\n              name: 'Яйцо',\n              isCookable: false,\n              hidden: true,\n              ownedByUser: false,\n              ingredientWeight: 200,\n              pfcc: {\n                protein: 6.3,\n                fat: 5,\n                carbohydrates: 0,\n                calories: 74,\n              },\n            },\n            {\n              id: 1,\n              type: 'ingredient',\n              name: 'СВ Задняя часть',\n              isCookable: true,\n              consistOf: null,\n              hidden: true,\n              ownedByUser: false,\n              ingredientWeight: 50,\n              pfcc: {\n                protein: 10.5,\n                fat: 4.8,\n                carbohydrates: 0,\n                calories: 88,\n              },\n            }\n          ],\n          name: 'Плов',\n          hidden: true,\n          isCookable: true,\n          ownedByUser: true,\n          pfcc: {\n            protein: 80,\n            fat: 0,\n            carbohydrates: 0,\n            calories: 433,\n          },\n        },\n      ],\n      dishes: [\n        {\n          id: 1,\n          name: 'Рис',\n          cookedOn: DateTime.now().set({weekday: 1}),\n          foodId: 13,\n          recipeWeight: 230,\n          cookedWeight: 560,\n          ingredients: [\n            {\n              id: 13,\n              type: 'ingredient',\n              consistOf: null,\n              name: 'Рис/Макароны',\n              isCookable: true,\n              hidden: true,\n              ownedByUser: false,\n              pfcc: {\n                protein: 7,\n                fat: 0.6,\n                carbohydrates: 77.3,\n                calories: 323,\n              },\n              ingredientWeight: 230\n            }\n          ],\n          pfcc: {\n            protein: 3.5,\n            fat: 0.3,\n            carbohydrates: 38.65,\n            calories: 161.5\n          },\n          deleted: false\n        },\n      ],\n      meals: [\n        {\n          id: 1,\n          cooked: true,\n          dishId: 1,\n          foodId: 13,\n          eatenOn: DateTime.now(),\n          weight: 200,\n          pfcc: {\n            protein: 6.07547,\n            fat: 0.52075,\n            carbohydrates: 67.09056,\n            calories: 280.33962,\n          },\n        },\n        {\n          id: 2,\n          cooked: false,\n          foodId: 20,\n          dishId: null,\n          eatenOn: DateTime.now(),\n          weight: 30,\n          pfcc: {\n            protein: 24,\n            calories: 130,\n            carbohydrates: null,\n            fat: null,\n          },\n        },\n      ],\n\n      profileConfigured: true,\n\n      account: {\n        email: 'yva@test.com',\n        preferredLanguage: 'en',\n      },\n    };\n  };\n\n  deleteDish(dishId: number): Observable<null> {\n    return of(null);\n  }\n\n  addFood(food: Omit<IFood, \"id\">): Observable<IFood> {\n    return of({\n      ...food,\n      ownedByUser: false,\n      id: Math.ceil(Math.random() * 10000),\n    } as IFood);\n  }\n\n  /**\n   * Updating the food. A food might be literally updated if it's owned by the user, otherwise a new food will be created\n   * @param food a food to update\n   */\n  updateFood(food: Omit<IFood, 'ownedByUser'>): Observable<IFood> {\n    let {id: _, ...rest} = food;\n    return of({\n      ...rest,\n      id: Math.ceil(Math.random() * 10000),\n      ownedByUser: false\n    } as IFood);\n  }\n\n  deleteFood(id: number): Observable<number> {\n    return of(id);\n  }\n}\n","import {UnknownBoolean} from '../../commons/models/common.models';\nimport {IAccount, Language} from '../../commons/models/auth.models';\n\nexport interface IAuthState {\n  loggedIn: UnknownBoolean,\n  profileConfigured: UnknownBoolean,\n  token: string | null,\n  account: IAccount | null,\n  language: Language\n}\n\nexport class AuthSignInAction {\n  static readonly type = '[AUTH] Sign in';\n\n  constructor(public readonly email: string,\n              public readonly password: string) {\n  }\n}\n\nexport class AuthSignInSucceededEvent {\n  static readonly type = '[AUTH] Sign in succeeded';\n\n  constructor(public readonly token: string,\n              public readonly isProfileConfigured: boolean,\n              public readonly account: IAccount) {\n  }\n}\n\nexport class AuthSignInFailedEvent {\n  static readonly type = '[AUTH] Sign in failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n\nexport class AuthLogOutAction {\n  static readonly type = '[AUTH] Log out';\n}\n\nexport class AuthSignUpAction {\n  static readonly type = '[AUTH] Sign up';\n\n  constructor(public readonly email: string,\n              public readonly password: string) {\n  }\n}\n\nexport class AuthSignUpSucceededEvent {\n  static readonly type = '[AUTH] Sign up succeeded';\n\n  constructor(public readonly token: string) {\n  }\n}\n\nexport class AuthSignUpFailedEvent {\n  static readonly type = '[AUTH] Sign up failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n\nexport class LanguageChangedEvent {\n  static readonly type = '[AUTH] Language changed';\n\n  constructor(public readonly lang: Language) {\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {Action, NgxsOnInit, Selector, State, StateContext} from '@ngxs/store';\nimport {\n  AuthLogOutAction,\n  AuthSignInAction,\n  AuthSignInFailedEvent,\n  AuthSignInSucceededEvent,\n  AuthSignUpAction,\n  AuthSignUpFailedEvent,\n  AuthSignUpSucceededEvent,\n  IAuthState,\n  LanguageChangedEvent,\n} from './auth.state-models';\nimport {ProfileService} from '../../service/profile.service';\nimport {catchError, map, mergeMap, of, tap} from 'rxjs';\nimport {Navigate} from '@ngxs/router-plugin';\nimport {ProfileConfiguredSuccessfullyEvent, ProfileLoadedEvent} from '../domain/domain.state-models';\nimport * as fromRoutes from '../../commons/routes';\nimport {LocalStoreService} from '../../service/local-store.service';\nimport {UnknownBoolean} from '../../commons/models/common.models';\nimport {IAccount, Language} from '../../commons/models/auth.models';\n\n\n@State<IAuthState>({\n  name: 'auth',\n  defaults: {\n    profileConfigured: UnknownBoolean.UNKNOWN,\n    loggedIn: UnknownBoolean.UNKNOWN,\n    token: null,\n    account: null,\n    language: AuthState.DEFAULT_LANGUAGE\n  },\n})\n@Injectable()\nexport class AuthState implements NgxsOnInit {\n  constructor(private profileService: ProfileService,\n              private localStoreService: LocalStoreService) {\n  }\n\n  public static readonly DEFAULT_LANGUAGE: Language = 'ua';\n\n  @Selector()\n  static language(state: IAuthState): Language {\n    return state.language;\n  }\n\n  @Selector()\n  static token(state: IAuthState): string | null {\n    return state.token;\n  }\n\n  @Selector()\n  static profileConfigured(state: IAuthState): UnknownBoolean {\n    return state.loggedIn.and(state.profileConfigured);\n  }\n\n  @Selector()\n  static isAuthenticated(state: IAuthState): UnknownBoolean {\n    return state.loggedIn;\n  }\n\n  @Selector()\n  static account(state: IAuthState): IAccount | null {\n    return state.account;\n  }\n\n  ngxsOnInit(ctx: StateContext<IAuthState>): void {\n    const token = this.localStoreService.loadJwtToken();\n    if (token == null) {\n      ctx.patchState({\n        loggedIn: UnknownBoolean.FALSE,\n      });\n      return;\n    }\n\n    this.profileService.getProfile()\n      .pipe(\n        tap(profile => {\n          ctx.patchState({\n            loggedIn: UnknownBoolean.TRUE,\n            token: token,\n            account: profile.account,\n            profileConfigured: UnknownBoolean.of(profile.profileConfigured),\n            language: profile.account.preferredLanguage\n          });\n\n          if (profile.profileConfigured) {\n            ctx.dispatch(new Navigate([fromRoutes.dashboard]));\n          } else {\n            ctx.dispatch(new Navigate([fromRoutes.completeProfile]));\n          }\n        }),\n        map(profile => new ProfileLoadedEvent(profile))\n      )\n      .subscribe(ctx.dispatch);\n  }\n\n  @Action(AuthLogOutAction)\n  handleAuthLogOutAction(ctx: StateContext<IAuthState>, action: AuthLogOutAction) {\n    ctx.patchState({\n      token: null,\n      loggedIn: UnknownBoolean.FALSE,\n      profileConfigured: UnknownBoolean.UNKNOWN,\n      account: null,\n    });\n  }\n\n  @Action(AuthSignInAction)\n  signIn(ctx: StateContext<IAuthState>, action: AuthSignInAction) {\n    return this.profileService.signIn(action.email, action.password)\n      .pipe(\n        mergeMap(rsp => of(\n          new ProfileLoadedEvent(rsp),\n          new AuthSignInSucceededEvent(rsp.token, rsp.profileConfigured, rsp.account),\n        )),\n        catchError(err => of(new AuthSignInFailedEvent(err.message ?? 'Sign in failed'))),\n        map(ctx.dispatch),\n      );\n  }\n\n  @Action(AuthSignInSucceededEvent)\n  signInSucceeded(ctx: StateContext<IAuthState>, action: AuthSignInSucceededEvent) {\n    ctx.patchState({\n      token: action.token,\n      loggedIn: UnknownBoolean.TRUE,\n      profileConfigured: action.isProfileConfigured ? UnknownBoolean.TRUE : UnknownBoolean.FALSE,\n      account: action.account,\n      language: action.account.preferredLanguage\n    });\n\n    this.localStoreService.saveJwtToken(action.token);\n\n    return action.isProfileConfigured ? ctx.dispatch(new Navigate(['/'])) : ctx.dispatch(new Navigate([`/${fromRoutes.completeProfile}`]));\n  }\n\n  @Action(AuthSignInFailedEvent)\n  handleSignInFailed(ctx: StateContext<IAuthState>, action: AuthSignInFailedEvent) {\n    console.warn(action.msg);\n\n    ctx.patchState({\n      token: null,\n      loggedIn: UnknownBoolean.FALSE,\n      profileConfigured: UnknownBoolean.FALSE,\n    });\n  }\n\n  @Action(AuthSignUpAction)\n  signUp(ctx: StateContext<IAuthState>, action: AuthSignUpAction) {\n    return this.profileService.signUp(action.email, action.password)\n      .pipe(\n        map(rsp => new AuthSignUpSucceededEvent(rsp.token)),\n        catchError(err => of(new AuthSignUpFailedEvent(err.message))),\n        map(ctx.dispatch),\n      );\n  }\n\n  @Action(AuthSignUpSucceededEvent)\n  handleSignUpSuccess(ctx: StateContext<IAuthState>, action: AuthSignUpSucceededEvent) {\n    ctx.patchState({\n      token: action.token,\n      loggedIn: UnknownBoolean.TRUE,\n      profileConfigured: UnknownBoolean.FALSE,\n    });\n\n    this.localStoreService.saveJwtToken(action.token);\n\n    return ctx.dispatch(new Navigate([`/${fromRoutes.completeProfile}`]));\n  }\n\n  @Action(AuthSignUpFailedEvent)\n  handleSignUpFailed(ctx: StateContext<IAuthState>, action: AuthSignUpFailedEvent) {\n    console.warn(action.msg);\n\n    ctx.patchState({\n      token: null,\n      loggedIn: UnknownBoolean.FALSE,\n      profileConfigured: UnknownBoolean.FALSE,\n    });\n  }\n\n  @Action(ProfileConfiguredSuccessfullyEvent)\n  handleProfileConfigured(ctx: StateContext<IAuthState>, action: ProfileConfiguredSuccessfullyEvent) {\n    if (ctx.getState().loggedIn) {\n      ctx.patchState({\n        profileConfigured: UnknownBoolean.TRUE,\n      });\n\n      return ctx.dispatch(new Navigate(['/']));\n    }\n    return null;\n  }\n\n  @Action(ProfileLoadedEvent)\n  handleProfileLoadedEvent(ctx: StateContext<IAuthState>, action: ProfileLoadedEvent) {\n    ctx.patchState({\n      profileConfigured: action.profile.profileConfigured ? UnknownBoolean.TRUE : UnknownBoolean.FALSE,\n    });\n  }\n\n  @Action(LanguageChangedEvent)\n  handleLanguageChangedEvent(ctx: StateContext<IAuthState>, action: LanguageChangedEvent) {\n    const account = ctx.getState().account;\n    ctx.patchState({\n      language: action.lang\n    })\n    if (account != null) {\n      ctx.patchState({\n        account: {\n          ...account,\n          preferredLanguage: action.lang\n        }\n      });\n    }\n  }\n\n}\n","import {\n  IDish,\n  IDishToCreate,\n  IFood,\n  IMeal,\n  IProfile,\n  IProfileResponse,\n  IProfileStatistics\n} from '../../commons/models/domain.models';\nimport {IPfcc} from '../../commons/models/common.models';\nimport {IFormState} from \"../form/form.commons\";\n\nexport interface ICookADishFormModel {\n  name: string | null;\n  ingredients: {\n    ingredient: IFood,\n    ingredientWeight: number,\n    index: number\n  }[];\n  cookedWeight: number\n}\n\nexport interface IDomainState {\n  profile: IProfile | null;\n  foods: IFood[];\n  meals: IMeal[];\n  dishes: IDish[];\n  stats?: IProfileStatistics;\n  forms: {\n    cookADish: IFormState<ICookADishFormModel>\n  }\n}\n\nexport class ProfileLoadedEvent {\n  static readonly type = '[DOMAIN] Profile loaded';\n\n  constructor(public readonly profile: IProfileResponse) {\n  }\n}\n\nexport class ConfigureProfileAction {\n  static readonly type = '[DOMAIN] Configure profile';\n\n  constructor(public readonly aims: IPfcc) {\n  }\n}\n\nexport class ProfileConfiguredSuccessfullyEvent {\n  static readonly type = '[DOMAIN] Profile configuration updated';\n\n  constructor(public readonly aims: IPfcc) {\n  }\n}\n\nexport class ProfileConfigurationFailedEvent {\n  static readonly type = '[DOMAIN] Profile configuration failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n\nexport class RemoveMealAction {\n  static readonly type = '[DOMAIN] Remove meal';\n\n  constructor(public readonly mealId: number) {\n  }\n}\n\nexport class MealRemovedSuccessfullyEvent {\n  static readonly type = '[DOMAIN] Meal removed';\n\n  constructor(public readonly mealId: number) {\n  }\n}\n\nexport class MealRemovingFailedEvent {\n  static readonly type = '[DOMAIN] Meal removing failed';\n\n  constructor(public readonly mealId: number,\n              public readonly msg: string) {\n  }\n}\n\nexport class DeleteDishAction {\n  static readonly type = '[DOMAIN] Delete dish';\n\n  constructor(public readonly dishId: number) {\n  }\n}\n\nexport class DishDeletedEvent {\n  static readonly type = '[DOMAIN] Dish deleted';\n\n  constructor(public readonly dishId: number) {\n  }\n}\n\nexport class DishDeletionFailedEvent {\n  static readonly type = '[DOMAIN] Dish deletion failed';\n\n  constructor(public readonly dishId: number,\n              public readonly msg: string) {\n  }\n}\n\nexport class AddMealAction {\n  static readonly type = '[DOMAIN] Add meal';\n\n  constructor(public readonly meal: IMeal) {\n  }\n}\n\nexport class MealAddedSuccessfullyEvent {\n  static readonly type = '[DOMAIN] Meal added';\n\n  constructor(public readonly meal: IMeal) {\n  }\n}\n\nexport class MealAddingFailedEvent {\n  static readonly type = '[DOMAIN] Meal adding failed';\n\n  constructor(public readonly meal: IMeal,\n              public readonly msg: string) {\n  }\n}\n\nexport class InitiateCookADishForm {\n  static readonly type = '[DOMAIN] Initiate Cook a Dish form';\n\n  constructor(public readonly recipeId: number) {\n  }\n}\n\nexport class CookADishAddIngredient {\n  static readonly type = '[DOMAIN] Cook a Dish - add ingredient';\n\n  constructor(public readonly ingredient: { ingredient?: IFood, ingredientWeight: number, index: number }) {\n  }\n}\n\nexport class CookADishRemoveIngredient {\n  static readonly type = '[DOMAIN] Cook a Dish - remove ingredient';\n\n  constructor(public readonly idx: number) {\n  }\n}\n\nexport class CreateDishAction {\n  static readonly type = '[DOMAIN] Create dish';\n\n  constructor(public readonly dish: IDishToCreate) {\n  }\n}\n\nexport class DishCreatedEvent {\n  static readonly type = '[DOMAIN] Dish created successfully';\n\n  constructor(public readonly dish: IDish) {\n  }\n}\n\nexport class DishCreationFailedEvent {\n  static readonly type = '[DOMAIN] Dish creation failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n\nexport class CreateFoodAction {\n  static readonly type = '[DOMAIN] Create food';\n\n  constructor(public readonly food: Omit<IFood, 'id'|'ownedByUser'>) {\n  }\n}\n\nexport class FoodCreatedEvent {\n  static readonly type = '[DOMAIN] Food created';\n\n  constructor(public readonly food: IFood) {\n  }\n}\n\nexport class CreateFoodFailedEvent {\n  static readonly type = '[DOMAIN] Food creation failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n\nexport class EditFoodAction {\n  static readonly type = '[DOMAIN] Edit food';\n\n  constructor(public readonly food: Omit<IFood, 'ownedByUser'>) {\n  }\n}\n\nexport class FoodUpdatedEvent {\n  static readonly type = '[DOMAIN] Food updated';\n\n  constructor(public readonly newFood: IFood, public readonly originalFoodId: number) {\n  }\n}\n\nexport class UpdateFoodFailedEvent {\n  static readonly type = '[DOMAIN] Food update failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n\nexport class DeleteFoodAction {\n  static readonly type = '[DOMAIN] Delete food';\n\n  constructor(public readonly id: number) {\n  }\n}\n\nexport class FoodDeletedEvent {\n  static readonly type = '[DOMAIN] Food deleted';\n\n  constructor(public readonly id: number) {\n  }\n}\n\nexport class DeleteFoodFailedEvent {\n  static readonly type = '[DOMAIN] Food delete failed';\n\n  constructor(public readonly msg: string) {\n  }\n}\n","import {Action, createSelector, Selector, State, StateContext} from '@ngxs/store';\nimport {\n  AddMealAction,\n  ConfigureProfileAction,\n  CookADishAddIngredient,\n  CookADishRemoveIngredient,\n  CreateDishAction,\n  CreateFoodAction,\n  CreateFoodFailedEvent,\n  DeleteDishAction, DeleteFoodAction, DeleteFoodFailedEvent,\n  DishCreatedEvent,\n  DishCreationFailedEvent,\n  DishDeletedEvent,\n  DishDeletionFailedEvent,\n  EditFoodAction,\n  FoodCreatedEvent, FoodDeletedEvent,\n  FoodUpdatedEvent,\n  ICookADishFormModel,\n  IDomainState,\n  InitiateCookADishForm,\n  MealAddedSuccessfullyEvent,\n  MealAddingFailedEvent,\n  MealRemovedSuccessfullyEvent,\n  MealRemovingFailedEvent,\n  ProfileConfigurationFailedEvent,\n  ProfileConfiguredSuccessfullyEvent,\n  ProfileLoadedEvent,\n  RemoveMealAction,\n  UpdateFoodFailedEvent,\n} from './domain.state-models';\nimport {Injectable} from '@angular/core';\nimport {ProfileService} from '../../service/profile.service';\nimport {catchError, map, of} from 'rxjs';\nimport {IDish, IFood, IMeal, IProfile} from '../../commons/models/domain.models';\nimport {emptyPfcc, IPfcc} from '../../commons/models/common.models';\nimport {isOnCurrentWeek, isToday, sumPfccs} from '../../commons/functions';\nimport {DateTime} from 'luxon';\nimport {ResetForm, UpdateFormValue} from \"@ngxs/form-plugin\";\nimport {IFormState} from \"../form/form.commons\";\n\nexport const DOMAIN_STATE_NAME = 'domain';\n\n@State<IDomainState>({\n  name: DOMAIN_STATE_NAME,\n  defaults: {\n    profile: null,\n    dishes: [],\n    foods: [],\n    meals: [],\n    forms: {\n      cookADish: {\n        model: {\n          name: null,\n          cookedWeight: 0,\n          ingredients: []\n        },\n        dirty: false,\n        status: 'PENDING',\n        errors: {}\n      }\n    }\n  },\n})\n@Injectable()\nexport class DomainState {\n\n  constructor(private service: ProfileService) {\n  }\n\n  @Selector()\n  static ingredientFoods(state: IDomainState): IFood[] {\n    return state.foods.filter(f => f.type === 'ingredient');\n  }\n\n  @Selector()\n  static recipeFoods(state: IDomainState): IFood[] {\n    return state.foods.filter(f => f.type === 'recipe');\n  }\n\n  @Selector()\n  static profile(state: IDomainState) {\n    return state.profile;\n  }\n\n  @Selector()\n  static dishes(state: IDomainState) {\n    return state.dishes;\n  }\n\n  @Selector()\n  static foods(state: IDomainState) {\n    return state.foods;\n  }\n\n  @Selector()\n  static meals(state: IDomainState) {\n    return state.meals;\n  }\n\n  @Selector()\n  static foodsMap(state: IDomainState): Map<number, IFood> {\n    const result = new Map<number, IFood>();\n    state.foods.forEach(f => result.set(f.id, f));\n    return result;\n  }\n\n  @Selector()\n  static dishesMap(state: IDomainState): Map<number, IDish> {\n    const result = new Map<number, IDish>();\n    state.dishes.forEach(d => result.set(d.id, d));\n    return result;\n  }\n\n  @Selector()\n  static todayNutrients(state: IDomainState): IPfcc {\n    const eaten = state.meals\n      .filter(m => isToday(m.eatenOn))\n      .map(m => m.pfcc);\n\n    return sumPfccs(...eaten);\n  }\n\n  @Selector()\n  static cookADishForm(state: IDomainState): IFormState<ICookADishFormModel> {\n    return state.forms.cookADish;\n  }\n\n  @Selector()\n  static cookADishUsedIngredients(state: IDomainState): IFood[] {\n    return (state.forms.cookADish.model?.ingredients || [])\n      .map(i => i.ingredient)\n      .filter(i => i != null);\n  }\n\n  @Selector()\n  static weeklyNutrients(state: IDomainState): IPfcc {\n    const eaten = state.meals\n      .filter(m => isOnCurrentWeek(m.eatenOn))\n      .map(m => m.pfcc);\n\n    return sumPfccs(...eaten);\n  }\n\n  @Selector()\n  static todayMeals(state: IDomainState): IMeal[] {\n    return state.meals\n      .filter(m => isToday(m.eatenOn));\n  }\n\n  static food(id: number) {\n    return createSelector([DomainState], (state: IDomainState) => {\n      return state.foods.find(f => f.id === id) || null;\n    });\n  }\n\n  @Action(ProfileLoadedEvent)\n  handleSuccessfulSignIn(ctx: StateContext<IDomainState>, action: ProfileLoadedEvent) {\n    ctx.patchState({\n      profile: {\n        ...action.profile,\n      },\n      meals: action.profile.meals,\n      dishes: action.profile.dishes,\n      foods: action.profile.foods,\n    });\n  }\n\n  @Action(DeleteDishAction)\n  handleDeleteDishAction(ctx: StateContext<IDomainState>, action: DeleteDishAction) {\n    return this.service.deleteDish(action.dishId)\n      .pipe(\n        map(_ => new DishDeletedEvent(action.dishId)),\n        catchError(err => of(new DishDeletionFailedEvent(action.dishId, err.message))),\n        map(ctx.dispatch)\n      );\n  }\n\n  @Action(DishDeletedEvent)\n  handleDishDeletedEvent(ctx: StateContext<IDomainState>, action: DishDeletedEvent) {\n    ctx.patchState({\n      dishes: ctx.getState().dishes.map(d => {\n        if (d.id !== action.dishId) {\n          return d;\n        } else {\n          return {\n            ...d,\n            deleted: true\n          }\n        }\n      })\n    });\n  }\n\n  @Action(DishDeletionFailedEvent)\n  handleDishDeletionFailedEvent(ctx: StateContext<IDomainState>, action: DishDeletionFailedEvent) {\n    console.warn(`Failed to delete dish#${action.dishId}: ${action.msg}`);\n  }\n\n  @Action(ConfigureProfileAction)\n  configureProfile(ctx: StateContext<IDomainState>, action: ConfigureProfileAction) {\n    return this.service.configureProfile(action.aims)\n      .pipe(\n        map(_ => new ProfileConfiguredSuccessfullyEvent(action.aims)),\n        catchError(err => of(new ProfileConfigurationFailedEvent(err.message))),\n        map(ctx.dispatch),\n      );\n  }\n\n  @Action(ProfileConfiguredSuccessfullyEvent)\n  handleProfileConfiguredSuccessfullyEvent(ctx: StateContext<IDomainState>, action: ProfileConfiguredSuccessfullyEvent) {\n    const profile = ctx.getState().profile as IProfile;\n    ctx.patchState({\n      profile: {\n        ...profile,\n        profileConfigured: true,\n        aims: action.aims,\n      },\n    });\n  }\n\n  @Action(ProfileConfigurationFailedEvent)\n  handleProfileConfiguringFailed(ctx: StateContext<IDomainState>, action: ProfileConfigurationFailedEvent) {\n    ctx.patchState({\n      profile: {\n        ...ctx.getState().profile as IProfile,\n        profileConfigured: false,\n        aims: emptyPfcc,\n      },\n    });\n  }\n\n  @Action(RemoveMealAction)\n  handleRemoveMealAction(ctx: StateContext<IDomainState>, action: RemoveMealAction) {\n    return this.service.removeMeal(action.mealId).pipe(\n      map(_ => new MealRemovedSuccessfullyEvent(action.mealId)),\n      catchError(err => of(new MealRemovingFailedEvent(action.mealId, err.message))),\n      map(ctx.dispatch),\n    );\n  }\n\n  @Action(MealRemovedSuccessfullyEvent)\n  handleMealRemovedEvent(ctx: StateContext<IDomainState>, action: MealRemovedSuccessfullyEvent) {\n    ctx.patchState({\n      meals: ctx.getState().meals.filter(m => m.id !== action.mealId),\n    });\n  }\n\n  @Action(MealRemovingFailedEvent)\n  handleMealRemovingFailed(ctx: StateContext<IDomainState>, action: MealRemovingFailedEvent) {\n    console.error(`Failed to remove meal, reason: ${action.msg}`);\n  }\n\n  @Action(CreateDishAction)\n  handleCreateDishAction(ctx: StateContext<IDomainState>, action: CreateDishAction) {\n    return this.service.addDish(action.dish).pipe(\n      map(rsp => new DishCreatedEvent(rsp.dish)),\n      catchError(err => of(new DishCreationFailedEvent(err.message))),\n      map(ctx.dispatch)\n    )\n  }\n\n  @Action(DishCreationFailedEvent)\n  handleDishCreationFailedEvent(ctx: StateContext<IDomainState>, action: DishCreationFailedEvent) {\n    console.log(`Failed to create a dish: ${action.msg}`);\n  }\n\n  @Action(DishCreatedEvent)\n  handleDishCreatedEvent(ctx: StateContext<IDomainState>, action: DishCreatedEvent) {\n    ctx.patchState({\n      dishes: [\n        ...ctx.getState().dishes,\n        action.dish\n      ]\n    })\n  }\n\n  @Action(AddMealAction)\n  handleAddMealAction(ctx: StateContext<IDomainState>, action: AddMealAction) {\n    return this.service.addMeal(action.meal).pipe(\n      map(rsp => new MealAddedSuccessfullyEvent(rsp.meal)),\n      catchError(err => of(new MealAddingFailedEvent(action.meal, err.message))),\n      map(ctx.dispatch)\n    );\n  }\n\n  @Action(MealAddedSuccessfullyEvent)\n  handleMealAddedSuccessfullyEvent(ctx: StateContext<IDomainState>, action: MealAddedSuccessfullyEvent) {\n    ctx.patchState({\n      meals: [\n        ...ctx.getState().meals,\n        action.meal\n      ]\n    });\n  }\n\n  @Action(MealAddingFailedEvent)\n  handleMealAddingFailedEvent(ctx: StateContext<IDomainState>, action: MealAddingFailedEvent) {\n    console.error(action.msg);\n  }\n\n  @Action(InitiateCookADishForm)\n  handleInitiateCookADishForm(ctx: StateContext<IDomainState>, action: InitiateCookADishForm) {\n    const foods = ctx.getState().foods;\n\n    const recipe = foods.find(f => f.type === 'recipe' && f.id === action.recipeId);\n\n    if (recipe == null) {\n      console.warn(`Can't find recipe with provided id == ${action.recipeId}`);\n      return;\n    }\n\n    const formIngredients = (recipe.consistOf || []).map((i, index) => {\n      return {\n        ingredient: foods.find(f => f.id === i.id),\n        ingredientWeight: i.ingredientWeight,\n        index\n      };\n    });\n\n    ctx.dispatch(new ResetForm({\n      path: `${DOMAIN_STATE_NAME}.forms.cookADish`,\n      value: {\n        name: `${recipe.name} ${DateTime.now().toFormat(\"dd.MM\")}`,\n        ingredients: formIngredients,\n        cookedWeight: recipe.consistOf\n          ?.map(i => i.ingredientWeight)\n          .reduce((w1, w2) => w1 + w2, 0) || 0\n      }\n    }));\n  }\n\n  @Action(CookADishAddIngredient)\n  handleCookADishAddIngredient(ctx: StateContext<IDomainState>, action: CookADishAddIngredient) {\n    ctx.dispatch(new UpdateFormValue({\n      path: `${DOMAIN_STATE_NAME}.forms.cookADish`,\n      propertyPath: `ingredients.${ctx.getState().forms.cookADish?.model?.ingredients?.length || 0}`,\n      value: action.ingredient\n    }));\n  }\n\n  @Action(CookADishRemoveIngredient)\n  handleCookADishRemoveIngredient(ctx: StateContext<IDomainState>, action: CookADishRemoveIngredient) {\n    const ingredients = ctx.getState().forms.cookADish?.model?.ingredients;\n    const idx = action.idx;\n    if (ingredients == null || ingredients.length <= 0 || idx >= ingredients.length) {\n      return;\n    }\n\n\n    ctx.dispatch(new UpdateFormValue({\n      path: `${DOMAIN_STATE_NAME}.forms.cookADish`,\n      propertyPath: 'ingredients',\n      value: [\n        ...ingredients?.slice(0, idx),\n        ...ingredients?.slice(idx + 1, ingredients?.length)\n      ]\n    }));\n  }\n\n  @Action(CreateFoodAction)\n  handleCreateFoodAction(ctx: StateContext<IDomainState>, action: CreateFoodAction) {\n    return this.service.addFood({\n      ...action.food,\n      ownedByUser: true\n    }).pipe(\n      map(food => new FoodCreatedEvent(food)),\n      catchError(err => of(new CreateFoodFailedEvent(err.message))),\n      map(ctx.dispatch)\n    )\n  }\n\n  @Action(FoodCreatedEvent)\n  handleFoodCreatedEvent(ctx: StateContext<IDomainState>, action: FoodCreatedEvent) {\n    ctx.patchState({\n      foods: [\n        ...ctx.getState().foods,\n        action.food\n      ]\n    })\n  }\n\n  @Action(CreateFoodFailedEvent)\n  handleCreateFoodFailedEvent(ctx: StateContext<IDomainState>, action: CreateFoodFailedEvent) {\n    console.warn(action.msg);\n  }\n\n  @Action(EditFoodAction)\n  handleEditFoodAction(ctx: StateContext<IDomainState>, action: EditFoodAction) {\n    return this.service.updateFood({\n      ...action.food\n    }).pipe(\n      map(food => new FoodUpdatedEvent(food, action.food.id)),\n      catchError(err => of(new UpdateFoodFailedEvent(err.message))),\n      map(ctx.dispatch)\n    )\n  }\n\n  @Action(FoodUpdatedEvent)\n  handleFoodUpdatedEvent(ctx: StateContext<IDomainState>, action: FoodUpdatedEvent) {\n    ctx.patchState({\n      foods: [\n        ...ctx.getState().foods.map(f => f.id === action.originalFoodId ? action.newFood : f)\n      ]\n    })\n  }\n\n  @Action(UpdateFoodFailedEvent)\n  handleUpdateFoodFailedEvent(ctx: StateContext<IDomainState>, action: UpdateFoodFailedEvent) {\n    console.warn(action.msg);\n  }\n\n  @Action(DeleteFoodAction)\n  handleDeleteFoodAction(ctx: StateContext<IDomainState>, action: DeleteFoodAction) {\n    return this.service.deleteFood(action.id).pipe(\n      map(id => new FoodDeletedEvent(id)),\n      catchError(err => of(new DeleteFoodFailedEvent(err.message))),\n      map(ctx.dispatch)\n    )\n  }\n\n  @Action(FoodUpdatedEvent)\n  handleFoodDeletedEvent(ctx: StateContext<IDomainState>, action: FoodDeletedEvent) {\n    ctx.patchState({\n      foods: [\n        ...ctx.getState().foods.filter(f => f.id !== action.id)\n      ]\n    })\n  }\n\n  @Action(DeleteFoodFailedEvent)\n  handleDeleteFoodFailedEvent(ctx: StateContext<IDomainState>, action: DeleteFoodFailedEvent) {\n    console.warn(action.msg);\n  }\n}\n","import {IPfcc} from \"../../commons/models/common.models\";\nimport {IFood} from \"../../commons/models/domain.models\";\nimport {IFormState} from \"./form.commons\";\nimport {FormControlStatus, ValidationErrors} from \"@angular/forms\";\n\nexport interface IAddFoodFormState extends IFormState<IAddFoodFormModel> {\n}\n\nexport interface FoodFormIngredient {\n  ingredient: IFood;\n  weight: number;\n  index: number;\n}\n\nexport interface IAddFoodFormModel {\n  id?: number;\n  name: string | null;\n  description: string | null;\n  isHidden: boolean;\n  pfcc: IPfcc;\n  ingredients: FoodFormIngredient[];\n}\n\nexport class AddFoodFormResetAction {\n  static readonly type = '[ADD FOOD] Reset form';\n}\n\nexport class AddFoodFormValueChangedEvent {\n  static readonly type = '[ADD FOOD] Form value changed';\n\n  constructor(public readonly data: IAddFoodFormModel) {\n  }\n}\n\nexport class AddFoodFormStatusChangedEvent {\n  static readonly type = '[ADD FOOD] Form status changed';\n\n  constructor(public readonly status: FormControlStatus,\n              public readonly errors: ValidationErrors | null = null) {\n  }\n}\n\nexport class AddFoodPfccRecalculatedEvent {\n  static readonly type = '[DOMAIN] Add food - pfcc recalculated';\n\n  constructor(public readonly pfcc: IPfcc) {\n  }\n}\n\nexport class AddFoodIngredientsCleanedUpEvent {\n  static readonly type = '[DOMAIN] Add food - ingredients cleaned up';\n\n  constructor() {\n  }\n}\n","import {Action, Selector, State, StateContext} from \"@ngxs/store\";\nimport {\n  AddFoodFormResetAction,\n  AddFoodFormStatusChangedEvent,\n  AddFoodFormValueChangedEvent,\n  AddFoodIngredientsCleanedUpEvent,\n  AddFoodPfccRecalculatedEvent, FoodFormIngredient,\n  IAddFoodFormModel,\n  IAddFoodFormState\n} from \"./add-food-form.state-models\";\nimport {Injectable} from \"@angular/core\";\n\nexport const ADD_FOOD_FORM_STATE_NAME = 'addFoodForm';\n\nconst DEFAULTS: IAddFoodFormState = {\n  model: {\n    name: null,\n    description: null,\n    isHidden: false,\n    pfcc: {\n      protein: 0,\n      fat: 0,\n      carbohydrates: 0,\n      calories: 0\n    },\n    ingredients: []\n  },\n  dirty: false,\n  status: 'PENDING',\n  errors: null\n};\n\n@State<IAddFoodFormState>({\n  name: ADD_FOOD_FORM_STATE_NAME,\n  defaults: DEFAULTS\n})\n@Injectable()\nexport class AddFoodFormState {\n\n  @Selector()\n  static model(state: IAddFoodFormState): IAddFoodFormModel | undefined {\n    return state.model;\n  }\n\n  @Selector()\n  static ingredients(state: IAddFoodFormState): FoodFormIngredient[] {\n    return state.model.ingredients;\n  }\n\n  @Action(AddFoodFormValueChangedEvent)\n  handleAddFoodFormValueChangedEvent(ctx: StateContext<IAddFoodFormState>, action: AddFoodFormValueChangedEvent) {\n    ctx.patchState({\n      model: {...action.data}\n    });\n  }\n\n  @Action(AddFoodFormStatusChangedEvent)\n  handleAddFoodFormStatusChangedEvent(ctx: StateContext<IAddFoodFormState>, action: AddFoodFormStatusChangedEvent) {\n    ctx.patchState({\n      status: action.status,\n      errors: action.errors\n    });\n  }\n\n  @Action(AddFoodFormResetAction)\n  handleAddFoodFormResetAction(ctx: StateContext<IAddFoodFormState>, action: AddFoodFormResetAction) {\n    ctx.setState(DEFAULTS);\n  }\n\n  @Action(AddFoodPfccRecalculatedEvent)\n  handleAddFoodPfccRecalculatedEvent(ctx: StateContext<IAddFoodFormState>, action: AddFoodPfccRecalculatedEvent): void {\n    ctx.patchState({\n      model: {\n        ...ctx.getState().model,\n        pfcc: action.pfcc\n      }\n    });\n  }\n\n  @Action(AddFoodIngredientsCleanedUpEvent)\n  handleAddFoodIngredientsChangedEvent(ctx: StateContext<IAddFoodFormState>, action: AddFoodIngredientsCleanedUpEvent): void {\n    ctx.patchState({\n      model: {\n        ...ctx.getState().model,\n        ingredients: []\n      }\n    })\n  }\n}\n","export interface IUiStateModel {\n  sideMenuOpened: boolean;\n}\n\nexport class ToggleMenuAction {\n   static readonly type = '[UI] Toggle side menu';\n\n   constructor(public readonly isOpened?: boolean) {\n   }\n}\n","import {Action, Selector, State, StateContext} from \"@ngxs/store\";\nimport {IUiStateModel, ToggleMenuAction} from \"./ui.state-model\";\n\nexport const UI_STATE_NAME = 'ui';\n@State<IUiStateModel>({\n  name: UI_STATE_NAME,\n  defaults: {\n    sideMenuOpened: false,\n  }\n})\nexport class UiState {\n  @Selector()\n  static sideMenuOpened(state: IUiStateModel): boolean {\n    return state.sideMenuOpened;\n  }\n\n  @Action(ToggleMenuAction)\n  handleToggleMenuAction(ctx: StateContext<IUiStateModel>, action: ToggleMenuAction) {\n    ctx.patchState({\n      sideMenuOpened: action.isOpened != null ? action.isOpened : !ctx.getState().sideMenuOpened\n    });\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import {enableProdMode} from '@angular/core';\nimport {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n\nimport {AppModule} from './app/app.module';\nimport {environment} from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":["RouterModule","fromRoutes","isAuthenticatedGuardFn","isNotAuthenticatedGuardFn","profileConfiguredGuardFn","routes","path","dashboard","loadComponent","then","mod","DashboardPageComponent","canActivate","signIn","SignInPageComponent","signUp","SignUpPageComponent","completeProfile","ConfigureProfileComponent","foodsManagement","FoodsManagementPageComponent","redirectTo","AppRoutingModule","forRoot","imports","exports","AuthState","filter","UiState","ToggleMenuAction","AppComponent","constructor","translateService","store","select","sideMenuOpened","language","pipe","lang","subscribe","use","setDefaultLang","DEFAULT_LANGUAGE","handleMenuClosed","dispatch","selectors","decls","vars","consts","template","i0","ctx","BrowserModule","BrowserAnimationsModule","NgxsReduxDevtoolsPluginModule","environment","NgxsRouterPluginModule","NgxsLoggerPluginModule","NgxsModule","DomainState","HttpClient","HttpClientModule","TranslateLoader","TranslateModule","TranslateHttpLoader","HeadingComponent","NgxsFormPluginModule","AddFoodFormState","MatSidenavModule","MenuComponent","HttpLoaderFactory","http","AppModule","bootstrap","developmentMode","production","disabled","defaultLanguage","loader","provide","useFactory","deps","declarations","DateTime","FormGroup","sumUndefined","n1","n2","isValueAbsent","undefined","isDefined","Error","isToday","date","set","atStartOfDay","equals","now","isOnCurrentWeek","atStartOfWeek","hour","minute","second","millisecond","weekday","value","sumPfccs","pfccs","reduce","m1","m2","protein","fat","carbohydrates","calories","ceilPfcc","pfcc","afterDotSigns","caloriesAfterDotSign","ceil","multiplyPfcc","multiplier","Math","pow","sum","v1","v2","pfccFormGroupIsNotEmpty","control","proteinControl","get","fatControl","carbohydratesControl","caloriesControl","pfccIsZero","emptyPfcc","UnknownBoolean","and","other","UNKNOWN","FALSE","TRUE","or","not","isTrue","isFalse","of","CommonModule","MatFormFieldModule","MatIconModule","MatSelectModule","LanguageChangedEvent","take","MatButtonModule","isAuthenticated","handleLangChanged","selection","ngAfterViewInit","langSelector","writeValue","handleMenuClicked","viewQuery","styles","changeDetection","MatListModule","Navigate","handleRouteClick","url","standalone","features","inject","map","tap","Store","isNotAuthenticated","profileConfigured","isProfileConfigured","LocalStoreService","loadJwtToken","localStorage","getItem","JWT_KEY","saveJwtToken","token","setItem","dropJwtToken","removeItem","factory","providedIn","throwError","ProfileService","aims","foods","id","type","name","isCookable","consistOf","hidden","ownedByUser","ingredientWeight","dishes","cookedOn","foodId","recipeWeight","cookedWeight","ingredients","deleted","meals","cooked","dishId","eatenOn","weight","account","email","preferredLanguage","password","mockProfile","getProfile","includes","configureProfile","removeMeal","mealId","addMeal","meal","random","addDish","dish","i","deleteDish","addFood","food","updateFood","_","rest","deleteFood","AuthSignInAction","AuthSignInSucceededEvent","AuthSignInFailedEvent","msg","AuthLogOutAction","AuthSignUpAction","AuthSignUpSucceededEvent","AuthSignUpFailedEvent","Action","Selector","State","catchError","mergeMap","ProfileConfiguredSuccessfullyEvent","ProfileLoadedEvent","profileService","localStoreService","state","loggedIn","ngxsOnInit","patchState","profile","handleAuthLogOutAction","action","rsp","err","message","signInSucceeded","handleSignInFailed","console","warn","handleSignUpSuccess","handleSignUpFailed","handleProfileConfigured","getState","handleProfileLoadedEvent","handleLanguageChangedEvent","__decorate","defaults","AuthState_1","ConfigureProfileAction","ProfileConfigurationFailedEvent","RemoveMealAction","MealRemovedSuccessfullyEvent","MealRemovingFailedEvent","DeleteDishAction","DishDeletedEvent","DishDeletionFailedEvent","AddMealAction","MealAddedSuccessfullyEvent","MealAddingFailedEvent","InitiateCookADishForm","recipeId","CookADishAddIngredient","ingredient","CookADishRemoveIngredient","idx","CreateDishAction","DishCreatedEvent","DishCreationFailedEvent","CreateFoodAction","FoodCreatedEvent","CreateFoodFailedEvent","EditFoodAction","FoodUpdatedEvent","newFood","originalFoodId","UpdateFoodFailedEvent","DeleteFoodAction","FoodDeletedEvent","DeleteFoodFailedEvent","createSelector","ResetForm","UpdateFormValue","DOMAIN_STATE_NAME","service","f","result","Map","forEach","d","eaten","m","forms","cookADish","model","DomainState_1","find","handleSuccessfulSignIn","handleDeleteDishAction","handleDishDeletedEvent","handleDishDeletionFailedEvent","handleProfileConfiguredSuccessfullyEvent","handleProfileConfiguringFailed","handleRemoveMealAction","handleMealRemovedEvent","handleMealRemovingFailed","error","handleCreateDishAction","handleDishCreationFailedEvent","log","handleDishCreatedEvent","handleAddMealAction","handleMealAddedSuccessfullyEvent","handleMealAddingFailedEvent","handleInitiateCookADishForm","recipe","formIngredients","index","toFormat","w1","w2","handleCookADishAddIngredient","propertyPath","length","handleCookADishRemoveIngredient","slice","handleCreateFoodAction","handleFoodCreatedEvent","handleCreateFoodFailedEvent","handleEditFoodAction","handleFoodUpdatedEvent","handleUpdateFoodFailedEvent","handleDeleteFoodAction","handleFoodDeletedEvent","handleDeleteFoodFailedEvent","dirty","status","errors","AddFoodFormResetAction","AddFoodFormValueChangedEvent","data","AddFoodFormStatusChangedEvent","AddFoodPfccRecalculatedEvent","AddFoodIngredientsCleanedUpEvent","ADD_FOOD_FORM_STATE_NAME","DEFAULTS","description","isHidden","handleAddFoodFormValueChangedEvent","handleAddFoodFormStatusChangedEvent","handleAddFoodFormResetAction","setState","handleAddFoodPfccRecalculatedEvent","handleAddFoodIngredientsChangedEvent","isOpened","UI_STATE_NAME","handleToggleMenuAction","enableProdMode","__NgCli_bootstrap_1","bootstrapModule","catch"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}